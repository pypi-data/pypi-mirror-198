import{r as P,o as re,c as C,a as Qe,g as G,u as Be,t as J,b as l,m as j,d as F,e as Ee,f as Ze,s as b,h as p,i as S,w as u,j as D,k as e,l as T,n as w,p as $,q as A,v as k,x as ie,F as ee,y as ne,z as H,A as Ie,C as Xe,B as fe,D as Ne,E as ye,G as Ke,H as Je,I as et,J as tt,T as ze,K as at,L as nt,M as X,P as it,N as ce,O as Le,Q as Ve,R as lt,_ as ot,S as st}from"./index-b6297644.js";import{u as Q,V as E,a as B,b as De,m as Oe,c as qe,d as We,e as ue,f as Ue,g as ve,h as He,i as Ye,j as rt,t as ut,k as dt}from"./VBtn-a638fdfe.js";import{V as ct,a as te,b as mt}from"./VTooltip-138f7f67.js";import{V as se}from"./VMenu-ee0bbc98.js";import{m as vt,f as pt,V as ft,a as yt,b as gt}from"./VToolbar-b9e353fc.js";import{m as ge,u as he,a as ht,b as _t,c as bt}from"./layout-78d5b8aa.js";import{V as ae,a as wt,b as me}from"./VCardText-db93722d.js";/* empty css              */import{g as _e,t as kt,f as Te,_ as At,a as xt,b as Se}from"./MediaItemThumb.vue_vue_type_style_index_0_lang-e5f347c5.js";import{V as pe,a as Ct,b as Vt,c as Tt,d as St}from"./VExpansionPanel-45249392.js";import{V as K}from"./VDivider-6186aa73.js";import{V as $t,a as Rt}from"./VCardTitle-916720bd.js";import{i as Pt,a as Mt,g as $e,b as Bt}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_f7db673c_lang-31b56941.js";import{V as Re}from"./VCard-32859bd2.js";import{_ as Et}from"./_plugin-vue_export-helper-c27b6911.js";import"./VLabel-ae9cbd15.js";function be(){const t=P(!1);return re(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:C(()=>t.value?void 0:{transition:"none !important"}),isBooted:Qe(t)}}const It=G()({name:"VAppBar",props:{modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...vt(),...ge(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":t=>!0},setup(t,d){let{slots:s}=d;const r=P(),n=Be(t,"modelValue"),a=C(()=>{var v,i;const y=((v=r.value)==null?void 0:v.contentHeight)??0,c=((i=r.value)==null?void 0:i.extensionHeight)??0;return y+c}),{ssrBootStyles:o}=be(),{layoutItemStyles:g}=he({id:t.name,order:C(()=>parseInt(t.order,10)),position:J(t,"location"),layoutSize:a,elementSize:a,active:n,absolute:J(t,"absolute")});return Q(()=>{const[y]=pt(t);return l(ft,j({ref:r,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"}],style:{...g.value,height:void 0,...o.value}},y),s)}),{}}}),Nt=G()({name:"VAppBarTitle",props:yt(),setup(t,d){let{slots:s}=d;return Q(()=>l(gt,j(t,{class:"v-app-bar-title"}),s)),{}}}),zt={key:0,style:{opacity:"0.5"}},Lt={class:"listitem-actions"},Dt={key:0},Ot={key:1},qt=F({__name:"AppBar",setup(t){const d=Ee();P(!1);const{t:s}=Ze(),r=C(()=>{if(d.currentRoute.value.name=="home")return{mainTitle:s("mass"),subTitle:s("home")};if(d.currentRoute.value.path.includes("settings"))return{mainTitle:s("mass"),subTitle:s("settings.settings")};if(d.currentRoute.value.name!="home"&&!b.topBarTitle)return{mainTitle:s("mass"),mainLink:()=>{d.push({name:"home"})},subTitle:s(d.currentRoute.value.name.toString())};if(d.currentRoute.value.name!="home"&&b.topBarTitle){if(n.value&&d.currentRoute.value.path.includes(n.value.path))return{mainTitle:s(n.value.name.replace("home","mass")),mainLink:()=>{a()},subTitle:b.topBarTitle};const o=d.currentRoute.value.path.split("/")[1];return{mainTitle:s(o),mainLink:()=>{d.push(`/${o}`)},subTitle:b.topBarTitle}}return d.currentRoute.value?{mainTitle:s(d.currentRoute.value.name.toString())}:{mainTitle:s("mass")}}),n=C(()=>{if(b.prevRoutes.length>0)return b.prevRoutes[b.prevRoutes.length-1]}),a=function(){const o=b.prevRoutes.pop();o&&(o.params.backnav="true",d.replace(o).then(()=>{setTimeout(()=>{window.scrollTo(0,o.meta.scrollPos||0)},400)}))};return(o,g)=>(p(),S(It,{color:"grey-darken-3",density:"compact",style:{height:"56px"},elevation:2},{prepend:u(()=>[l(B,{style:{"margin-left":"-8px","margin-right":"-20px"},variant:"plain",onClick:g[0]||(g[0]=y=>e(b).showNavigationMenu=!e(b).showNavigationMenu)},{default:u(()=>[l(E,{size:"40"},{default:u(()=>[D(" mdi-playlist-play ")]),_:1})]),_:1})]),append:u(()=>[T("div",Lt,[l(ct,{location:"top end",origin:"end center"},{activator:u(({props:y})=>[e(w).syncTasks.value.length>0||e(w).fetchesInProgress.value.length>0?(p(),S(De,j({key:0,indeterminate:""},y),null,16)):$("",!0)]),default:u(()=>[e(w).syncTasks.value.length>0?(p(),A("span",Dt,k(o.$t("sync_running")),1)):(p(),A("span",Ot,k(o.$t("loading")),1))]),_:1}),l(se,{location:"bottom end"},{activator:u(({props:y})=>[e(b).topBarContextMenuItems.length>0?(p(),S(B,j({key:0,icon:"mdi-dots-vertical",style:{"margin-right":"-6px"}},y,{variant:"plain"}),null,16)):$("",!0)]),default:u(()=>[l(te,null,{default:u(()=>[(p(!0),A(ee,null,ie(e(b).topBarContextMenuItems,(y,c)=>(p(),S(ae,{key:c,title:o.$t(y.label,y.labelArgs),onClick:v=>y.action?y.action():""},{prepend:u(()=>[l(wt,{icon:y.icon},null,8,["icon"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})])]),default:u(()=>[l(Nt,null,{default:u(()=>[T("span",{style:{cursor:"pointer"},onClick:g[1]||(g[1]=(...y)=>e(r).mainLink&&e(r).mainLink(...y))},k(e(r).mainTitle),1),e(r).subTitle?(p(),A("span",zt," | "+k(e(r).subTitle),1)):$("",!0)]),_:1})]),_:1}))}});function Wt(t){let{rootEl:d,isSticky:s,layoutItemStyles:r}=t;const n=P(!1),a=P(0),o=C(()=>{const c=typeof n.value=="boolean"?"top":n.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[c]:ne(a.value)}:{top:r.value.top}]});re(()=>{H(s,c=>{c?window.addEventListener("scroll",y,{passive:!0}):window.removeEventListener("scroll",y)},{immediate:!0})}),Ie(()=>{document.removeEventListener("scroll",y)});let g=0;function y(){const c=g>window.scrollY?"up":"down",v=d.value.getBoundingClientRect(),i=parseFloat(r.value.top??0),m=window.scrollY-Math.max(0,a.value-i),_=v.height+Math.max(a.value,i)-window.scrollY-window.innerHeight;v.height<window.innerHeight-i?(n.value="top",a.value=i):c==="up"&&n.value==="bottom"||c==="down"&&n.value==="top"?(a.value=window.scrollY+v.top,n.value=!0):c==="down"&&_<=0?(a.value=0,n.value="bottom"):c==="up"&&m<=0&&(a.value=v.top+m,n.value="top"),g=window.scrollY}return{isStuck:n,stickyStyles:o}}const Ut=100,Ht=20;function Pe(t){const d=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*d}function Me(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let d=0;for(let s=t.length-1;s>0;s--){if(t[s].t===t[s-1].t)continue;const r=Pe(d),n=(t[s].d-t[s-1].d)/(t[s].t-t[s-1].t);d+=(n-r)*Math.abs(n),s===t.length-1&&(d*=.5)}return Pe(d)*1e3}function Yt(){const t={};function d(n){Array.from(n.changedTouches).forEach(a=>{(t[a.identifier]??(t[a.identifier]=new Xe(Ht))).push([n.timeStamp,a])})}function s(n){Array.from(n.changedTouches).forEach(a=>{delete t[a.identifier]})}function r(n){var c;const a=(c=t[n])==null?void 0:c.values().reverse();if(!a)throw new Error(`No samples for touch id ${n}`);const o=a[0],g=[],y=[];for(const v of a){if(o[0]-v[0]>Ut)break;g.push({t:v[0],d:v[1].clientX}),y.push({t:v[0],d:v[1].clientY})}return{x:Me(g),y:Me(y),get direction(){const{x:v,y:i}=this,[m,_]=[Math.abs(v),Math.abs(i)];return m>_&&v>=0?"right":m>_&&v<=0?"left":_>m&&i>=0?"down":_>m&&i<=0?"up":jt()}}}return{addMovement:d,endTouch:s,getVelocity:r}}function jt(){throw new Error}function Ft(t){let{isActive:d,isTemporary:s,width:r,touchless:n,position:a}=t;re(()=>{window.addEventListener("touchstart",O,{passive:!0}),window.addEventListener("touchmove",W,{passive:!1}),window.addEventListener("touchend",q,{passive:!0})}),Ie(()=>{window.removeEventListener("touchstart",O),window.removeEventListener("touchmove",W),window.removeEventListener("touchend",q)});const o=C(()=>["left","right"].includes(a.value)),{addMovement:g,endTouch:y,getVelocity:c}=Yt();let v=!1;const i=P(!1),m=P(0),_=P(0);let x;function R(V,f){return(a.value==="left"?V:a.value==="right"?document.documentElement.clientWidth-V:a.value==="top"?V:a.value==="bottom"?document.documentElement.clientHeight-V:Z())-(f?r.value:0)}function Y(V){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const h=a.value==="left"?(V-_.value)/r.value:a.value==="right"?(document.documentElement.clientWidth-V-_.value)/r.value:a.value==="top"?(V-_.value)/r.value:a.value==="bottom"?(document.documentElement.clientHeight-V-_.value)/r.value:Z();return f?Math.max(0,Math.min(1,h)):h}function O(V){if(n.value)return;const f=V.changedTouches[0].clientX,h=V.changedTouches[0].clientY,M=25,N=a.value==="left"?f<M:a.value==="right"?f>document.documentElement.clientWidth-M:a.value==="top"?h<M:a.value==="bottom"?h>document.documentElement.clientHeight-M:Z(),z=d.value&&(a.value==="left"?f<r.value:a.value==="right"?f>document.documentElement.clientWidth-r.value:a.value==="top"?h<r.value:a.value==="bottom"?h>document.documentElement.clientHeight-r.value:Z());(N||z||d.value&&s.value)&&(v=!0,x=[f,h],_.value=R(o.value?f:h,d.value),m.value=Y(o.value?f:h),y(V),g(V))}function W(V){const f=V.changedTouches[0].clientX,h=V.changedTouches[0].clientY;if(v){if(!V.cancelable){v=!1;return}const N=Math.abs(f-x[0]),z=Math.abs(h-x[1]);(o.value?N>z&&N>3:z>N&&z>3)?(i.value=!0,v=!1):(o.value?z:N)>3&&(v=!1)}if(!i.value)return;V.preventDefault(),g(V);const M=Y(o.value?f:h,!1);m.value=Math.max(0,Math.min(1,M)),M>1?_.value=R(o.value?f:h,!0):M<0&&(_.value=R(o.value?f:h,!1))}function q(V){if(v=!1,!i.value)return;g(V),i.value=!1;const f=c(V.changedTouches[0].identifier),h=Math.abs(f.x),M=Math.abs(f.y);(o.value?h>M&&h>400:M>h&&M>3)?d.value=f.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||Z()):d.value=m.value>.5}const I=C(()=>i.value?{transform:a.value==="left"?`translateX(calc(-100% + ${m.value*r.value}px))`:a.value==="right"?`translateX(calc(100% - ${m.value*r.value}px))`:a.value==="top"?`translateY(calc(-100% + ${m.value*r.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${m.value*r.value}px))`:Z(),transition:"none"}:void 0);return{isDragging:i,dragProgress:m,dragStyles:I}}function Z(){throw new Error}const Gt=["start","end","left","right","top","bottom"],je=G()({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>Gt.includes(t)},sticky:Boolean,...Oe(),...qe(),...ge(),...We(),...ue({tag:"nav"}),...fe()},emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,d){let{attrs:s,emit:r,slots:n}=d;const{isRtl:a}=Ne(),{themeClasses:o}=ye(t),{borderClasses:g}=Ue(t),{backgroundColorClasses:y,backgroundColorStyles:c}=ve(J(t,"color")),{elevationClasses:v}=He(t),{mobile:i}=Ke(),{roundedClasses:m}=Ye(t),_=rt(),x=Be(t,"modelValue",null,L=>!!L),{ssrBootStyles:R}=be(),Y=P(),O=P(!1),W=C(()=>t.rail&&t.expandOnHover&&O.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),q=C(()=>ut(t.location,a.value)),I=C(()=>!t.permanent&&(i.value||t.temporary)),V=C(()=>t.sticky&&!I.value&&q.value!=="bottom");t.expandOnHover&&t.rail!=null&&H(O,L=>r("update:rail",!L)),t.disableResizeWatcher||H(I,L=>!t.permanent&&Je(()=>x.value=!L)),!t.disableRouteWatcher&&_&&H(_.currentRoute,()=>I.value&&(x.value=!1)),H(()=>t.permanent,L=>{L&&(x.value=!0)}),et(()=>{t.modelValue!=null||I.value||(x.value=t.permanent||!i.value)});const{isDragging:f,dragProgress:h,dragStyles:M}=Ft({isActive:x,isTemporary:I,width:W,touchless:J(t,"touchless"),position:q}),N=C(()=>{const L=I.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):W.value;return f.value?L*h.value:L}),{layoutItemStyles:z,layoutRect:U,layoutItemScrimStyles:le}=he({id:t.name,order:C(()=>parseInt(t.order,10)),position:q,layoutSize:N,elementSize:W,active:C(()=>x.value||f.value),disableTransitions:C(()=>f.value),absolute:C(()=>t.absolute||V.value&&typeof de.value!="string")}),{isStuck:de,stickyStyles:oe}=Wt({rootEl:Y,isSticky:V,layoutItemStyles:z}),we=ve(C(()=>typeof t.scrim=="string"?t.scrim:null)),Ge=C(()=>({...f.value?{opacity:h.value*.2,transition:"none"}:void 0,...U.value?{left:ne(U.value.left),right:ne(U.value.right),top:ne(U.value.top),bottom:ne(U.value.bottom)}:void 0,...le.value}));return tt({VList:{bgColor:"transparent"}}),Q(()=>{const L=n.image||t.image;return l(ee,null,[l(t.tag,j({ref:Y,onMouseenter:()=>O.value=!0,onMouseleave:()=>O.value=!1,class:["v-navigation-drawer",`v-navigation-drawer--${q.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":O.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":I.value,"v-navigation-drawer--active":x.value,"v-navigation-drawer--sticky":V.value},o.value,y.value,g.value,v.value,m.value],style:[c.value,z.value,M.value,R.value,oe.value]},s),{default:()=>{var ke,Ae,xe,Ce;return[L&&l("div",{key:"image",class:"v-navigation-drawer__img"},[n.image?(ke=n.image)==null?void 0:ke.call(n,{image:t.image}):l("img",{src:t.image,alt:""},null)]),n.prepend&&l("div",{class:"v-navigation-drawer__prepend"},[(Ae=n.prepend)==null?void 0:Ae.call(n)]),l("div",{class:"v-navigation-drawer__content"},[(xe=n.default)==null?void 0:xe.call(n)]),n.append&&l("div",{class:"v-navigation-drawer__append"},[(Ce=n.append)==null?void 0:Ce.call(n)])]}}),l(ze,{name:"fade-transition"},{default:()=>[I.value&&(f.value||x.value)&&!!t.scrim&&l("div",{class:["v-navigation-drawer__scrim",we.backgroundColorClasses.value],style:[Ge.value,we.backgroundColorStyles.value],onClick:()=>x.value=!1},null)]})])}),{isStuck:de}}}),Qt=T("div",{style:{height:"20px"}},null,-1),Zt=F({__name:"NavigationMenu",setup(t){const d=[{label:"home",icon:"mdi-home",path:"/home"},{label:"search",icon:"mdi-magnify",path:"/search"},{label:"artists",icon:"mdi-account-music",path:"/artists"},{label:"albums",icon:"mdi-album",path:"/albums"},{label:"tracks",icon:"mdi-file-music",path:"/tracks"},{label:"radios",icon:"mdi-radio",path:"/radios"},{label:"playlists",icon:"mdi-playlist-music",path:"/playlists"},{label:"browse",icon:"mdi-folder",path:"/browse"},{label:"settings.settings",icon:"mdi-cog",path:"/settings"}];return(s,r)=>(p(),S(je,{app:"",permanent:!s.$vuetify.display.mobile,rail:!s.$vuetify.display.mobile&&!e(b).showNavigationMenu,"model-value":s.$vuetify.display.mobile&&e(b).showNavigationMenu||!s.$vuetify.display.mobile,width:220,"onUpdate:modelValue":r[0]||(r[0]=n=>{s.$vuetify.display.mobile&&(e(b).showNavigationMenu=n)})},{default:u(()=>[Qt,l(te,{lines:"one",density:"compact",nav:""},{default:u(()=>[(p(),A(ee,null,ie(d,n=>l(ae,{key:n.path,nav:"",density:"compact",height:15,title:s.$t(n.label),"prepend-icon":n.icon,to:n.path},null,8,["title","prepend-icon","to"])),64))]),_:1})]),_:1},8,["permanent","rail","model-value"]))}}),Xt=G()({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...ue()},setup(t,d){let{slots:s}=d;return Q(()=>l(t.tag,{class:["v-container",{"v-container--fluid":t.fluid}]},s)),{}}});const Kt=G()({name:"VMain",props:{scrollable:Boolean,...ue({tag:"main"})},setup(t,d){let{slots:s}=d;const{mainStyles:r}=ht(),{ssrBootStyles:n}=be();return Q(()=>l(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable}],style:[r.value,n.value]},{default:()=>{var a,o;return[t.scrollable?l("div",{class:"v-main__scroller"},[(a=s.default)==null?void 0:a.call(s)]):(o=s.default)==null?void 0:o.call(s)]}})),{}}}),Jt=F({__name:"View",setup(t){return(d,s)=>{const r=nt("router-view");return p(),S(Kt,{id:"cont"},{default:u(()=>[l(Zt),l(Xt,{fluid:"",style:{"padding-left":"0","padding-right":"0"}},{default:u(()=>[l(r,{app:""},{default:u(({Component:n})=>[l(ze,{name:"fade",mode:"out-in"},{default:u(()=>[(p(),S(at(n)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),ea=""+new URL("crossfade-ba51f69a.png",import.meta.url).href,ta="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAnElEQVRYw+2UwQ6AMAhDwfjh+OXzZrgslqxjW8K7GWdtRqlIUYyh/qG1Zt8LVYuKzTDUnCGNy41zrfhpGRrhZgn5/HmiWdzuhsrQH7QMicjDENmuGKEbQjaotiwLaGSZeUIzZB2jhnwfAdqyzFAze+gXxPSZxcgaB6JDa+rUDLG2DNFJ3TLkzDlN3bveGWc83ZFlctTIKOVWFCt5AYSDaENMYFhMAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA0LTE1VDEzOjExOjE0KzAwOjAwADepDgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNC0xNVQxMzoxMToxNCswMDowMHFqEbIAAAAASUVORK5CYII=",aa={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},na={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},ia={class:"text-body-2"},la={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},oa={key:0,class:"syncbtn"},sa={key:1,class:"syncbtn"},ra={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},Fe=F({__name:"VolumeControl",props:{player:null},setup(t){const d=function(r){var a;const n=[];r.type!=it.GROUP&&n.push(r);for(const o of r.group_childs){const g=(a=w)==null?void 0:a.players[o];g&&g.available&&n.push(g)}return n.sort((o,g)=>o.display_name.toUpperCase()>g.display_name.toUpperCase()?1:-1),n},s=function(r,n){for(const a of d(r))for(const o of d(r))w.sendCommand("players/cmd/power",{player_id:o.player_id,powered:n})};return(r,n)=>(p(),S(te,{style:{overflow:"hidden"},lines:"two"},{default:u(()=>[t.player.group_childs.length>0?(p(),A("div",{key:0,class:"volumerow",style:X(t.player.powered?"opacity: 0.75":"opacity: 0.5")},[l(B,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:n[0]||(n[0]=a=>s(t.player,!t.player.powered))},{default:u(()=>[l(E,{icon:"mdi-power"})]),_:1}),T("span",aa,k(e(_e)(t.player,30)),1),T("div",na,k(t.player.group_volume),1),l(pe,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!t.player.powered,"model-value":Math.round(t.player.group_volume),style:{"margin-left":"5px"},"onUpdate:modelValue":n[1]||(n[1]=a=>e(w).playerCommandGroupVolume(t.player.player_id,a))},null,8,["disabled","model-value"])],4)):$("",!0),t.player.group_childs.length>0?(p(),S(K,{key:1,style:{"margin-top":"10px","margin-bottom":"10px"}})):$("",!0),(p(!0),A(ee,null,ie(d(t.player),a=>(p(),A("div",{key:a.player_id,class:"volumerow",style:X(a.powered?"opacity: 0.75":"opacity: 0.5")},[T("span",ia,[l(B,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:o=>e(w).playerCommandPowerToggle(a.player_id)},{default:u(()=>[l(E,{icon:"mdi-power"})]),_:2},1032,["onClick"]),T("span",la,k(e(kt)(a.display_name,27)),1),!a.synced_to&&!a.group_childs.length&&Object.values(e(w).players).filter(o=>!o.synced_to&&o.can_sync_with.includes(a.player_id)).length>0?(p(),A("div",oa,[l(se,{location:"bottom end",style:{"z-index":"999999"}},{activator:u(({props:o})=>[l(B,j({icon:""},o,{variant:"plain"}),{default:u(()=>[l(E,null,{default:u(()=>[D("mdi-link-variant")]),_:1})]),_:2},1040)]),default:u(()=>[l(te,null,{default:u(()=>[l($t,null,{default:u(()=>[D(k(r.$t("sync_player_to")),1)]),_:1}),(p(!0),A(ee,null,ie(Object.values(e(w).players).filter(o=>!o.synced_to&&o.can_sync_with.includes(a.player_id)),o=>(p(),S(ae,{key:o.player_id,title:o.display_name,onClick:g=>e(w).playerCommandSync(a.player_id,o.player_id)},null,8,["title","onClick"]))),128)),l(K)]),_:2},1024)]),_:2},1024)])):$("",!0),a.synced_to?(p(),A("div",sa,[l(B,{icon:"",variant:"plain",onClick:o=>e(w).playerCommandUnSync(a.player_id)},{default:u(()=>[l(E,null,{default:u(()=>[D("mdi-link-variant-off")]),_:1})]),_:2},1032,["onClick"])])):$("",!0)]),T("div",ra,k(a.volume_level),1),l(pe,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!a.powered,"model-value":Math.round(a.volume_level),style:{"margin-left":"5px"},"onUpdate:modelValue":o=>e(w).playerCommandVolumeSet(a.player_id,o)},null,8,["disabled","model-value","onUpdate:modelValue"])],4))),128))]),_:1}))}});const ua=G()({name:"VFooter",props:{app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Oe(),...qe(),...ge(),...We(),...ue({tag:"footer"}),...fe()},setup(t,d){let{slots:s}=d;const{themeClasses:r}=ye(t),{backgroundColorClasses:n,backgroundColorStyles:a}=ve(J(t,"color")),{borderClasses:o}=Ue(t),{elevationClasses:g}=He(t),{roundedClasses:y}=Ye(t),c=P(32),{resizeRef:v}=dt(_=>{_.length&&(c.value=_[0].target.clientHeight)}),i=C(()=>t.height==="auto"?c.value:parseInt(t.height,10)),{layoutItemStyles:m}=he({id:t.name,order:C(()=>parseInt(t.order,10)),position:C(()=>"bottom"),layoutSize:i,elementSize:C(()=>t.height==="auto"?void 0:i.value),active:C(()=>t.app),absolute:J(t,"absolute")});return Q(()=>l(t.tag,{ref:v,class:["v-footer",r.value,n.value,o.value,g.value,y.value],style:[a.value,t.app?m.value:void 0]},s)),{}}}),da={class:"listitem-thumb"},ca={key:0},ma={key:1},va={key:1},pa={key:2},fa={key:3},ya={key:4},ga={class:"listitem-actions"},ha={class:"text-h5",style:{padding:"10px"}},_a={style:{height:"50px",display:"flex","align-items":"center"}},ba=["src"],wa={style:{height:"50px",display:"flex","align-items":"center"}},ka=["src"],Aa={key:0,style:{height:"50px",display:"flex","align-items":"center"}},xa={key:1,style:{height:"50px",display:"flex","align-items":"center"}},Ca={key:1,class:"mediadetails-time text-caption"},Va={key:0,style:{width:"100%",height:"5px","padding-bottom":"20px","margin-top":"-10px"}},Ta={class:"mediacontrols"},Sa={key:0,class:"mediacontrols-left"},$a={key:0},Ra={key:1},Pa={class:"text-subtitle-1"},Ma=F({__name:"PlayerOSD",setup(t){const d=Ee(),s=P(),r=P(!1),n=C(()=>{if(b.selectedPlayer)return w.queues[b.selectedPlayer.active_queue]}),a=C(()=>{if(n.value)return n.value.current_item}),o=C(()=>a.value?Te(c.value):"0:00"),g=C(()=>{if(!a.value)return"0:00";const i=a.value.duration;return Te(i)}),y=C(()=>{var i,m;return(m=(i=n.value)==null?void 0:i.current_item)==null?void 0:m.streamdetails}),c=C(()=>n.value?n.value.elapsed_time:0),v=function(i){d.push({name:i.media_type,params:{itemId:i.item_id,provider:i.provider}})};return H(()=>{var i;return(i=a.value)==null?void 0:i.queue_item_id},async()=>{var i;(i=a.value)!=null&&i.media_item&&(s.value=await Se(a.value.media_item,Ve.FANART)||await Se(a.value.media_item,Ve.THUMB))}),(i,m)=>(p(),S(ua,{bottom:"",fixed:"",class:"d-flex flex-column",style:{width:"100%","border-top-style":"ridge"},elevation:"5",app:""},{default:u(()=>{var _,x,R,Y,O,W,q,I,V;return[l(K),l(me,{class:"bg-image",width:"100%",cover:"",src:s.value,gradient:i.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.80), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.85), rgba(255,255,255,.65)",style:{position:"absolute","background-size":"100%",padding:"0","margin-top":"-10px"}},null,8,["src","gradient"]),l(ae,{style:{height:"60px",width:"100%","margin-top":"-5px","padding-bottom":"30px","padding-top":"5px"},lines:"two"},{prepend:u(()=>[T("div",da,[e(a)?(p(),S(At,{key:0,item:e(a).media_item||e(a),size:50,style:{cursor:"pointer"},onClick:m[0]||(m[0]=f=>{var h;return(h=e(a))!=null&&h.media_item?v(e(a).media_item):""})},null,8,["item"])):(p(),S(me,{key:1,height:"50",src:e(Pt),style:{opacity:"50%"}},null,8,["src"]))])]),title:u(()=>[e(a)&&e(a).media_item?(p(),A("span",{key:0,style:{cursor:"pointer"},onClick:m[1]||(m[1]=f=>{var h;return(h=e(a))!=null&&h.media_item?v(e(a).media_item):""})},[D(k(e(a).media_item.name)+" ",1),"version"in e(a).media_item&&e(a).media_item.version?(p(),A("span",ca,"("+k(e(a).media_item.version)+")",1)):$("",!0)])):e(a)?(p(),A("span",ma,k(e(a).name),1)):$("",!0)]),subtitle:u(()=>{var f,h,M,N,z,U,le;return[e(a)&&((f=e(a).media_item)==null?void 0:f.media_type)==e(ce).TRACK&&"album"in e(a).media_item&&e(a).media_item.album?(p(),A("div",{key:0,style:{cursor:"pointer"},onClick:m[2]||(m[2]=de=>{var oe;return(oe=e(a))!=null&&oe.media_item?v(e(a).media_item):""})},k(e(xt)(e(a).media_item.artists))+" â€¢ "+k(e(a).media_item.album.name),1)):e(a)&&e(a).media_item&&"artists"in e(a).media_item&&e(a).media_item.artists.length>0?(p(),A("div",va,k(e(a).media_item.artists[0].name),1)):(M=(h=e(a))==null?void 0:h.streamdetails)!=null&&M.stream_title?(p(),A("div",pa,k((z=(N=e(a))==null?void 0:N.streamdetails)==null?void 0:z.stream_title),1)):e(a)&&((U=e(a).media_item)!=null&&U.metadata.description)?(p(),A("div",fa,k(e(a).media_item.metadata.description),1)):e(a)?$("",!0):(p(),A("div",ya,k((le=e(n))==null?void 0:le.display_name),1))]}),append:u(()=>{var f;return[T("div",ga,[e(y)?(p(),S(se,{key:0,location:"bottom end"},{activator:u(({props:h})=>[l(me,j({contain:"",src:e(y).bit_depth>16?e(Mt):e($e)(e(y).content_type),height:"25",style:i.$vuetify.theme.current.dark?"":"filter: invert(100%)",class:"v-list-item-subtitle mediadetails-streamdetails"},h),null,16,["src","style"])]),default:u(()=>[l(Re,{class:"mx-auto",width:"300"},{default:u(()=>[l(te,{style:{overflow:"hidden"}},{default:u(()=>[T("span",ha,k(i.$t("stream_details")),1),l(K),T("div",_a,[T("img",{height:"30",width:"50",center:"",src:e(Bt)(e(y).provider),style:{"object-fit":"contain"}},null,8,ba),D(" "+k(i.$t("providers."+e(y).provider)),1)]),T("div",wa,[T("img",{height:"30",width:"50",src:e($e)(e(y).content_type),style:X(i.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,12,ka),D(" "+k(e(y).sample_rate/1e3)+" kHz / "+k(e(y).bit_depth)+" bits ",1)]),e(n)&&e(n).crossfade_enabled?(p(),A("div",Aa,[T("img",{height:"30",width:"50",contain:"",src:ea,style:X(i.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),D(" "+k(i.$t("crossfade_enabled")),1)])):$("",!0),e(y).gain_correct?(p(),A("div",xa,[T("img",{height:"30",width:"50",contain:"",src:ta,style:X(i.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),D(" "+k(e(y).gain_correct)+" dB ",1)])):$("",!0)]),_:1})]),_:1})]),_:1})):$("",!0),!i.$vuetify.display.mobile&&e(y)&&e(a)&&((f=e(a).media_item)==null?void 0:f.media_type)!==e(ce).RADIO?(p(),A("div",Ca,k(e(o))+" / "+k(e(g)),1)):$("",!0)])]}),_:1}),e(a)?(p(),A("div",Va,[l(pe,{"model-value":e(c),height:"3",color:"primary",min:0,max:e(a).duration,"thumb-size":4,style:{"margin-left":"0","margin-right":"0"},disabled:!e(a)||((_=e(a).media_item)==null?void 0:_.media_type)!=e(ce).TRACK,"onUpdate:modelValue":m[3]||(m[3]=f=>{var h;return e(w).queueCommandSeek(((h=e(n))==null?void 0:h.queue_id)||"",Math.round(f))})},null,8,["model-value","max","disabled"])])):$("",!0),T("div",Ta,[e(n)&&e(n).available?(p(),A("div",Sa,[l(B,{small:"",icon:"",variant:"plain",disabled:!e(n)||!((x=e(n))!=null&&x.active)||((R=e(n))==null?void 0:R.items)==0,onClick:m[4]||(m[4]=f=>e(w).queueCommandPrevious(e(n).queue_id))},{default:u(()=>[l(E,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),e(n)&&((Y=e(n))!=null&&Y.active)?(p(),S(B,{key:0,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((O=e(n))==null?void 0:O.items)==0,onClick:m[5]||(m[5]=f=>e(w).queueCommandPlayPause(e(n).queue_id))},{default:u(()=>[l(E,{size:"50"},{default:u(()=>{var f;return[D(k(((f=e(n))==null?void 0:f.state)=="playing"?"mdi-pause":"mdi-play"),1)]}),_:1})]),_:1},8,["disabled"])):((W=e(b).selectedPlayer)==null?void 0:W.state)==e(Le).PLAYING?(p(),S(B,{key:1,icon:"","x-large":"",variant:"plain",onClick:m[6]||(m[6]=f=>e(w).queueCommandStop(e(n).queue_id))},{default:u(()=>[l(E,{size:"50"},{default:u(()=>[D(" mdi-stop ")]),_:1})]),_:1})):(p(),S(B,{key:2,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((q=e(n))==null?void 0:q.items)==0,onClick:m[7]||(m[7]=f=>e(w).queueCommandPlay(e(n).queue_id))},{default:u(()=>[l(E,{size:"50"},{default:u(()=>[D(" mdi-play ")]),_:1})]),_:1},8,["disabled"])),l(B,{icon:"",small:"",variant:"plain",disabled:!e(n)||!((I=e(n))!=null&&I.active)||((V=e(n))==null?void 0:V.items)==0,onClick:m[8]||(m[8]=f=>e(w).queueCommandNext(e(n).queue_id))},{default:u(()=>[l(E,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])):$("",!0),l(B,{icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"80",onClick:m[9]||(m[9]=f=>e(b).showPlayersMenu=!0)},{default:u(()=>[l(E,{icon:"mdi-speaker"}),e(n)?(p(),A("div",$a,k(e(_e)(e(w).players[e(n).queue_id])),1)):$("",!0)]),_:1}),!i.$vuetify.display.mobile&&e(n)?(p(),A("div",Ra,[l(se,{modelValue:r.value,"onUpdate:modelValue":m[11]||(m[11]=f=>r.value=f),location:"bottom end","close-on-content-click":!1},{activator:u(({props:f})=>[l(B,j({icon:"",variant:"plain"},f,{class:"mediacontrols-right",height:"50",width:"70"}),{default:u(()=>{var h;return[l(E,{icon:"mdi-volume-high"}),T("div",null,k(Math.round(((h=e(b).selectedPlayer)==null?void 0:h.group_volume)||0)),1)]}),_:2},1040)]),default:u(()=>[l(Re,{"min-width":"300"},{default:u(()=>[l(te,{style:{overflow:"hidden"},lines:"two"},{default:u(()=>[l(ae,{density:"compact"},{prepend:u(()=>[l(E,{size:"50",icon:e(b).selectedPlayer.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:u(()=>{var f;return[T("div",Pa,[T("b",null,k((f=e(b).selectedPlayer)==null?void 0:f.display_name.substring(0,25)),1)])]}),subtitle:u(()=>{var f,h;return[(p(),A("div",{key:(f=e(b).selectedPlayer)==null?void 0:f.state,class:"text-body-2",style:{"line-height":"1em"}},k(i.$t("state."+((h=e(b).selectedPlayer)==null?void 0:h.state))),1))]}),default:u(()=>[l(B,{variant:"plain",style:{position:"absolute",right:"0px",top:"0px"},icon:"mdi-close",dark:"",onClick:m[10]||(m[10]=f=>r.value=!r.value)})]),_:1}),l(K),e(b).selectedPlayer?(p(),S(Fe,{key:0,player:e(b).selectedPlayer},null,8,["player"])):$("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):$("",!0),e(n)?(p(),S(B,{key:2,text:"",icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"70",onClick:m[12]||(m[12]=f=>i.$router.push("/playerqueue/"))},{default:u(()=>[l(E,{icon:"mdi-playlist-music"}),T("div",null,k(i.$t("queue")),1)]),_:1})):$("",!0)])]}),_:1}))}});const Ba=Et(Ma,[["__scopeId","data-v-a88e22ad"]]),Ea={class:"text-subtitle-1"},Ia=F({__name:"PlayerSelect",setup(t){const d=P(void 0),s=C(()=>{var v,i;const c=[];for(const m in(v=w)==null?void 0:v.players){const _=(i=w)==null?void 0:i.players[m];o(_,!0)&&c.push(_)}return c.slice().sort((m,_)=>{var x;return m.display_name.toUpperCase()>((x=_.display_name)==null?void 0:x.toUpperCase())?1:-1})});H(()=>b.showPlayersMenu,c=>{c||(d.value=void 0)}),H(()=>b.selectedPlayer,c=>{c&&localStorage.setItem("mass.LastPlayerId",c.player_id)}),H(()=>w.players,c=>{c&&g()});const r=P(),n=P();re(()=>{var c,v,i;r.value=(i=(v=(c=lt())==null?void 0:c.vnode)==null?void 0:v.el)==null?void 0:i.getRootNode(),g()});const a=function(c){n.value!=c&&(n.value=c,setTimeout(()=>{var i;const v=(i=r.value)==null?void 0:i.getElementById(c);v==null||v.scrollIntoView({behavior:"smooth"})},0))},o=function(c,v=!0,i=!1,m=!1){return!(!c.enabled||!c.available&&!v||c.synced_to&&!i||c.hidden_by.length&&!m)},g=function(){if(b.selectedPlayer&&o(b.selectedPlayer,!1,!1,!1))return;const c=y();c&&(b.selectedPlayer=c,console.log("Selected new default player: ",c.display_name))},y=function(){var v,i,m,_;const c=localStorage.getItem("mass.LastPlayerId");if(c&&c in w.players&&o(w.players[c],!1,!1,!1))return w.players[c];if((v=w)!=null&&v.players){for(const x in(i=w)==null?void 0:i.players){const R=w.players[x];if(R.state==Le.PLAYING)return R}for(const x in(m=w)==null?void 0:m.queues){const R=w.queues[x];if(o(w.players[x],!1,!1,!1)&&R.items)return w.players[x]}for(const x in(_=w)==null?void 0:_.queues)if(o(w.players[x],!1,!1,!1))return w.players[x]}};return(c,v)=>(p(),S(je,{modelValue:e(b).showPlayersMenu,"onUpdate:modelValue":v[2]||(v[2]=i=>e(b).showPlayersMenu=i),location:"right",app:"",clipped:"",temporary:"",width:"300",style:{"z-index":"9999"}},{default:u(()=>[l(Rt,{class:"headline"},{default:u(()=>[T("b",null,k(c.$t("players")),1)]),_:1}),l(B,{variant:"plain",style:{position:"absolute",right:"-10px",top:"0px"},icon:"mdi-close",dark:"",text:"",onClick:v[0]||(v[0]=i=>e(b).showPlayersMenu=!e(b).showPlayersMenu)}),l(K),l(Ct,{modelValue:d.value,"onUpdate:modelValue":v[1]||(v[1]=i=>d.value=i),focusable:"",accordion:"",flat:""},{default:u(()=>[(p(!0),A(ee,null,ie(e(s),i=>(p(),S(Vt,{id:i.player_id,key:i.player_id,disabled:!i.available,flat:""},{default:u(()=>{var m;return[l(Tt,{class:"playerrow",style:X(((m=e(b).selectedPlayer)==null?void 0:m.player_id)==i.player_id?"padding:0;background-color:rgba(50, 115, 220, 0.2);":"padding:0"),"expand-icon":"mdi-chevron-down","collapse-icon":"mdi-chevron-up",onClick:_=>{e(b).selectedPlayer=i,a(i.player_id)}},{default:u(()=>[l(ae,{density:"compact"},{prepend:u(()=>[l(E,{size:"50",icon:i.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:u(()=>[T("div",Ea,[T("b",null,k(e(_e)(i)),1)])]),subtitle:u(()=>[(p(),A("div",{key:i.state,class:"text-body-2",style:{"line-height":"1em"}},k(c.$t("state."+i.state)),1))]),_:2},1024)]),_:2},1032,["style","onClick"]),l(St,{variant:"contain"},{default:u(()=>[l(Fe,{player:i},null,8,["player"])]),_:2},1024)]}),_:2},1032,["id","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}});function Na(t={}){const{immediate:d=!1,onNeedRefresh:s,onOfflineReady:r,onRegistered:n,onRegisteredSW:a,onRegisterError:o}=t;let g,y,c;const v=async(m=!0)=>{await y,await(c==null?void 0:c())};async function i(){if("serviceWorker"in navigator){const{Workbox:m}=await ot(()=>import("./workbox-window.prod.es5-dc90f814.js"),[],import.meta.url);g=new m("./sw.js",{scope:"./",type:"classic"}),c=async()=>{await(g==null?void 0:g.messageSkipWaiting())};{let _=!1;const x=()=>{_=!0,g==null||g.addEventListener("controlling",R=>{R.isUpdate&&window.location.reload()}),s==null||s()};g.addEventListener("installed",R=>{typeof R.isUpdate>"u"?typeof R.isExternal<"u"?R.isExternal?x():!_&&(r==null||r()):R.isExternal?window.location.reload():!_&&(r==null||r()):R.isUpdate||r==null||r()}),g.addEventListener("waiting",x),g.addEventListener("externalwaiting",x)}g.register({immediate:d}).then(_=>{a?a("./sw.js",_):n==null||n(_)}).catch(_=>{o==null||o(_)})}}return y=i(),v}function za(t={}){const{immediate:d=!0,onNeedRefresh:s,onOfflineReady:r,onRegistered:n,onRegisteredSW:a,onRegisterError:o}=t,g=P(!1),y=P(!1);return{updateServiceWorker:Na({immediate:d,onNeedRefresh(){g.value=!0,s==null||s()},onOfflineReady(){y.value=!0,r==null||r()},onRegistered:n,onRegisteredSW:a,onRegisterError:o}),offlineReady:y,needRefresh:g}}const La={key:0,class:"pwa-toast",role:"alert"},Da={class:"message"},Oa={key:0},qa={key:1},Wa=F({__name:"ReloadPrompt",setup(t){const{offlineReady:d,needRefresh:s,updateServiceWorker:r}=za(),n=async()=>{d.value=!1,s.value=!1};return(a,o)=>e(d)||e(s)?(p(),A("div",La,[T("div",Da,[e(d)?(p(),A("span",Oa," App ready to work offline ")):(p(),A("span",qa," New content available, click on reload button to update. "))]),e(s)?(p(),A("button",{key:0,onClick:o[0]||(o[0]=g=>e(r)())}," Reload ")):$("",!0),T("button",{onClick:n}," Close ")])):$("",!0)}});const Ua=G()({name:"VApp",props:{..._t({fullHeight:!0}),...fe()},setup(t,d){let{slots:s}=d;const r=ye(t),{layoutClasses:n,layoutStyles:a,getLayoutItem:o,items:g,layoutRef:y}=bt(t),{rtlClasses:c}=Ne();return Q(()=>{var v;return l("div",{ref:y,class:["v-application",r.themeClasses.value,n.value,c.value],style:a.value},[l("div",{class:"v-application__wrap"},[(v=s.default)==null?void 0:v.call(s)])])}),{getLayoutItem:o,items:g,theme:r}}}),sn=F({__name:"Default",setup(t){return(d,s)=>(p(),S(Ua,null,{default:u(()=>[l(Ia),l(qt),l(Ba),e(w).state.value==e(st).CONNECTED?(p(),S(Jt,{key:0})):(p(),S(mt,{key:1},{default:u(()=>[l(De,{indeterminate:"",size:"64"})]),_:1})),e(b).isInStandaloneMode?(p(),S(Wa,{key:2})):$("",!0)]),_:1}))}});export{sn as default};
