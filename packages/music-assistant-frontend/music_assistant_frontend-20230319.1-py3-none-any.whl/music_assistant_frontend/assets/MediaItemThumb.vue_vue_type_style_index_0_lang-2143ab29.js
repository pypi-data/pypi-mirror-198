import{d as h,r as g,a6 as d,c as v,z as b,h as m,q as z,b as l,w as f,i as x,l as k,Q as o,n as w}from"./index-a7cfb084.js";import{b as S}from"./VBtn-48709670.js";import{c as y,a as $}from"./VCardText-47c6afd9.js";const T=["max-height","max-width","min-height","min-width"],U={class:"d-flex align-center justify-center fill-height"},B=function(t,i=o.THUMB,a=!1){if(t){if("metadata"in t&&t.metadata.images){for(const e of t.metadata.images)if(!(e.is_file&&!a)&&e.type==i)return e}if("album"in t&&t.album&&"metadata"in t.album&&t.album.metadata&&t.album.metadata.images){for(const e of t.album.metadata.images)if(!(e.is_file&&!a)&&e.type==i)return e}if("artist"in t&&"metadata"in t.artist&&t.artist.metadata&&t.artist.metadata.images){for(const e of t.artist.metadata.images)if(!(e.is_file&&!a)&&e.type==i)return e}if("artists"in t&&t.artists){for(const e of t.artists)if("metadata"in e&&e.metadata.images){for(const n of e.metadata.images)if(!(n.is_file&&!a)&&n.type==i)return n}}}},M=async function(t,i=o.THUMB,a){var n;if(!t)return;let e="";if("image_url"in t&&t.image_url)e=t.image_url;else{const r=B(t,i,!0);if(!r)return;if(r.is_file){const c=encodeURIComponent(encodeURIComponent(r.url)),s="metadata"in t?(n=t.metadata)==null?void 0:n.checksum:"";return`${w.baseUrl}/imageproxy?size=${a||0}&path=${c}&checksum=${s}`}e=r.url}return a?`https://images.weserv.nl/?url=${e}&w=${a}&h=${a}&fit=cover&a=attention`:e},q=h({__name:"MediaItemThumb",props:{item:{default:void 0},size:{default:void 0},minSize:{default:void 0},maxSize:{default:256},tile:{type:Boolean,default:!0},cover:{type:Boolean,default:!0},fallback:{default:void 0}},setup(t){const i=t,a=g(),e=d(),n=v(()=>i.fallback?i.fallback:i.item?e.current.value.dark?`https://ui-avatars.com/api/?name=${i.item.name}&size=${i.maxSize}&bold=true&background=1d1d1d&color=383838`:`https://ui-avatars.com/api/?name=${i.item.name}&size=${i.maxSize}&bold=true&background=a0a0a0&color=cccccc`:"");return b(()=>i.item,async r=>{r&&(a.value=await M(r,o.THUMB,i.maxSize)||n.value)},{immediate:!0}),(r,c)=>(m(),z("div",{"max-height":t.maxSize,"max-width":t.maxSize,"min-height":t.minSize||t.size,"min-width":t.minSize||t.size,height:"auto",width:"100%"},[l($,{size:t.size,"min-height":t.minSize,"min-width":t.minSize,rounded:t.tile?0:void 0},{default:f(()=>{var s,u;return[(m(),x(y,{key:"uri"in t.item?(s=t.item)==null?void 0:s.uri:(u=t.item)==null?void 0:u.queue_item_id,"min-height":t.minSize,"min-width":t.minSize,cover:t.cover,src:a.value},{placeholder:f(()=>[k("div",U,[l(S,{indeterminate:"",color:"grey-lighten-4"})])]),_:1},8,["min-height","min-width","cover","src"]))]}),_:1},8,["size","min-height","min-width","rounded"])],8,T))}});export{q as _,M as g};
