import{d as T,e as x,r as I,a2 as L,n as a,V as z,A,z as F,h as r,q as u,b as l,w as i,l as o,F as R,x as M,i as y,k as d,m as g,j as C,v as $,ax as U,ay as j,p as _}from"./index-a7cfb084.js";import{b as q}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_49ec30c1_lang-cd2a9a15.js";import{h as G,V as p,c as O}from"./VCardText-47c6afd9.js";import{V as P,a as S}from"./VTooltip-651180bd.js";import{V as w,a as Y}from"./VBtn-48709670.js";import{V as H}from"./VMenu-40f27db7.js";import"./utils-19cbba22.js";import"./VCard-0ab5cfc8.js";import"./VDivider-ecb40747.js";const J={class:"listitem-actions"},K={key:0,class:"listitem-action"},Q={key:1,class:"listitem-action"},W={class:"listitem-action"},oe=T({__name:"Players",setup(X){const B=x(),c=I([]),v=L({}),N=a.subscribe_multi([z.PLAYER_CONFIG_UPDATED],()=>{k()});A(N);const k=async function(){c.value=await a.getData("config/players");const e=await a.getData("providers/available");for(const s of e)v[s.domain]=s},D=function(e){a.sendCommand("config/players/remove",{player_id:e}),c.value=c.value.filter(s=>s.player_id!=e)},V=function(e){e in a.players&&B.push(`/settings/editplayer/${e}`)},E=function(e){const s={enabled:!e.enabled};a.sendCommand("config/players/update",{player_id:e.player_id,update:s})},b=function(e){var s;return e.name||((s=a.players[e.player_id])==null?void 0:s.name)||e.default_name||e.player_id};return F(()=>a.players,e=>{e&&k()},{immediate:!0}),(e,s)=>(r(),u("section",null,[l(G,null,{default:i(()=>[o("div",null,[(r(!0),u(R,null,M([...c.value].sort((t,m)=>b(t)>b(m)?1:-1),t=>{var m;return r(),y(p,{key:t.player_id,title:b(t),subtitle:((m=d(a).providers[t.provider])==null?void 0:m.name)||t.provider,onClick:f=>V(t.player_id)},{prepend:i(()=>[l(O,{scale:"",width:"36px",class:"listitem-thumb",src:d(q)(t.provider)},null,8,["src"])]),append:i(()=>{var f;return[o("div",J,[t.enabled?(f=d(a).players[t.player_id])!=null&&f.available?_("",!0):(r(),u("div",Q,[l(P,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[l(w,U(j(n)),{default:i(()=>[C(" mdi-timer-sand ")]),_:2},1040)]),default:i(()=>[o("span",null,$(e.$t("settings.player_not_available")),1)]),_:1})])):(r(),u("div",K,[l(P,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[l(w,g(n,{color:"grey"}),{default:i(()=>[C(" mdi-cancel ")]),_:2},1040)]),default:i(()=>[o("span",null,$(e.$t("settings.player_disabled")),1)]),_:1})])),o("div",W,[l(H,{location:"bottom end"},{activator:i(({props:n})=>[l(Y,g({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},n,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:i(()=>[l(S,null,{default:i(()=>{var n;return[t.enabled&&t.player_id in d(a).players?(r(),y(p,{key:0,title:e.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:h=>V(t.player_id)},null,8,["title","onClick"])):_("",!0),l(p,{title:t.enabled?e.$t("settings.disable"):e.$t("settings.enable"),"prepend-icon":"mdi-cog",onClick:h=>E(t)},null,8,["title","onClick"]),v[t.provider].documentation?(r(),y(p,{key:1,title:e.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:v[t.provider].documentation,target:"_blank"},null,8,["title","href"])):_("",!0),(n=d(a).players[t.player_id])!=null&&n.available?_("",!0):(r(),y(p,{key:2,title:e.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:h=>D(t.player_id)},null,8,["title","onClick"]))]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"])}),128))])]),_:1})]))}});export{oe as default};
