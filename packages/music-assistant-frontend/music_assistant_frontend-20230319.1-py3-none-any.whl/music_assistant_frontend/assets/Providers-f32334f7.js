/* empty css                             */import{d as j,e as F,r as O,a2 as q,c as G,n as d,V as H,A as J,z as K,h as a,q as u,b as n,w as i,k as c,aw as C,i as g,l as m,v,j as f,p as b,F as P,x as w,m as y,ax as Q,ay as W}from"./index-a7cfb084.js";import{b as I}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_49ec30c1_lang-cd2a9a15.js";import{V as X}from"./VAlert-ec6a2dfe.js";import{V as Y}from"./VDialog-8c22ca6b.js";import{a as D,V as k}from"./VBtn-48709670.js";import{V as z,b as Z}from"./VToolbar-1ede5451.js";import{a as E,V}from"./VTooltip-651180bd.js";import{h as ee,V as p,c as S}from"./VCardText-47c6afd9.js";import{V as te}from"./VMenu-40f27db7.js";import"./utils-19cbba22.js";import"./VCard-0ab5cfc8.js";import"./VDivider-ecb40747.js";const ie=m("br",null,null,-1),ne={class:"listitem-actions"},ae={key:0,class:"listitem-action",style:{"margin-right":"15px"}},oe={key:1,class:"listitem-action",style:{"margin-right":"15px"}},se={key:2,class:"listitem-action",style:{"margin-right":"15px"}},le={key:3,class:"listitem-action",style:{"margin-right":"15px"}},re={class:"listitem-action"},de=m("br",null,null,-1),Ce=j({__name:"Providers",setup(ce){const T=F(),_=O([]),l=q({}),M=G(()=>Object.values(l).filter(e=>!e.builtin&&(e.multi_instance||!_.value.find(r=>r.domain)))),N=d.subscribe(H.PROVIDERS_UPDATED,()=>{x()});J(N);const x=async function(){_.value=await d.getData("config/providers");const e=await d.getData("providers/available");for(const r of e)l[r.domain]=r},R=function(e){d.sendCommand("config/providers/remove",{instance_id:e}),_.value=_.value.filter(r=>r.instance_id!=e)},B=function(e){T.push(`/settings/editprovider/${e}`)},U=function(e){T.push(`/settings/addprovider/${e.domain}`)},A=function(e){const r={enabled:!e.enabled};d.sendCommand("config/providers/update",{instance_id:e.instance_id,update:r})},L=function(e){d.getData("config/providers/reload",{instance_id:e}).catch(r=>alert(r))};return K(()=>d.providers,e=>{e&&x()},{immediate:!0}),(e,r)=>(a(),u("section",null,[n(ee,null,{default:i(()=>[_.value.filter(o=>o.type==c(C).MUSIC&&o.domain in l&&o.domain!="url").length==0?(a(),g(X,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:"",style:{"margin-bottom":"15px"}},{default:i(()=>[m("b",null,v(e.$t("settings.no_providers")),1),ie,f(" "+v(e.$t("settings.no_providers_detail")),1)]),_:1})):b("",!0),(a(!0),u(P,null,w(c(C),o=>(a(),u("div",null,[n(z,{title:e.$t(`settings.${o}providers`),density:"compact"},null,8,["title"]),(a(!0),u(P,null,w(_.value.filter(t=>t.type==o&&t.domain in l),t=>(a(),g(p,{key:t.instance_id,title:t.name||l[t.domain].name,subtitle:l[t.domain].description,onClick:$=>B(t.instance_id)},{prepend:i(()=>[n(S,{contain:"",width:"36px",class:"listitem-thumb",src:c(I)(t.domain)},null,8,["src"])]),append:i(()=>{var $;return[m("div",ne,[c(d).syncTasks.value.filter(s=>s.provider_instance==t.instance_id).length>0?(a(),u("div",ae,[n(V,{location:"top end",origin:"end center"},{activator:i(({props:s})=>[n(k,y(s,{color:"grey"}),{default:i(()=>[f(" mdi-sync ")]),_:2},1040)]),default:i(()=>[m("span",null,v(e.$t("settings.sync_running")),1)]),_:1})])):b("",!0),t.enabled?t.last_error?(a(),u("div",se,[n(V,{location:"top end",origin:"end center"},{activator:i(({props:s})=>[n(k,y(s,{color:"red"}),{default:i(()=>[f(" mdi-alert-circle ")]),_:2},1040)]),default:i(()=>[m("span",null,v(t.last_error),1)]),_:2},1024)])):($=c(d).providers[t.instance_id])!=null&&$.available?b("",!0):(a(),u("div",le,[n(V,{location:"top end",origin:"end center"},{activator:i(({props:s})=>[n(k,Q(W(s)),{default:i(()=>[f(" mdi-timer-sand ")]),_:2},1040)]),default:i(()=>[m("span",null,v(e.$t("settings.not_loaded")),1)]),_:1})])):(a(),u("div",oe,[n(V,{location:"top end",origin:"end center"},{activator:i(({props:s})=>[n(k,y(s,{color:"grey"}),{default:i(()=>[f(" mdi-cancel ")]),_:2},1040)]),default:i(()=>[m("span",null,v(e.$t("settings.provider_disabled")),1)]),_:1})])),m("div",re,[n(te,{location:"bottom end"},{activator:i(({props:s})=>[n(D,y({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},s,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:i(()=>[n(E,null,{default:i(()=>{var s;return[n(p,{title:e.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:h=>B(t.instance_id)},null,8,["title","onClick"]),n(p,{title:t.enabled?e.$t("settings.disable"):e.$t("settings.enable"),"prepend-icon":"mdi-cancel",disabled:l[t.domain].builtin,onClick:h=>A(t)},null,8,["title","disabled","onClick"]),l[t.domain].documentation?(a(),g(p,{key:0,title:e.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:l[t.domain].documentation,target:"_blank"},null,8,["title","href"])):b("",!0),(s=c(d).providers[t.instance_id])!=null&&s.available&&o==c(C).MUSIC?(a(),g(p,{key:1,title:e.$t("settings.sync"),"prepend-icon":"mdi-sync",onClick:h=>c(d).startSync(void 0,[t.instance_id])},null,8,["title","onClick"])):b("",!0),!l[t.domain].builtin&&!l[t.domain].load_by_default?(a(),g(p,{key:2,title:e.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:h=>R(t.instance_id)},null,8,["title","onClick"])):b("",!0),n(p,{title:e.$t("settings.reload"),"prepend-icon":"mdi-refresh",onClick:h=>L(t.instance_id)},null,8,["title","onClick"])]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"]))),128)),de]))),256)),n(Y,{scrim:!0},{activator:i(({props:o})=>[n(D,y({color:"primary",icon:"mdi-plus",size:"x-large",position:"fixed",location:"bottom right",elevation:"8",style:{"margin-bottom":"180px","margin-right":"15px","z-index":"9999"}},o),null,16)]),default:i(()=>[n(z,{dark:""},{default:i(()=>[n(D,{icon:"mdi-play-circle-outline"}),n(Z,{style:{"padding-left":"10px"}},{default:i(()=>[m("b",null,v(e.$t("settings.add_provider")),1)]),_:1})]),_:1}),n(E,null,{default:i(()=>[(a(!0),u(P,null,w(c(M),o=>(a(),g(p,{key:o.domain,title:o.name,onClick:t=>U(o)},{prepend:i(()=>[n(S,{contain:"",width:"26px",style:{"margin-right":"20px"},src:c(I)(o.domain)},null,8,["src"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1})]))}});export{Ce as default};
