import{P as H}from"./ListviewItem-ed036f87.js";import{g as j,b as n,d as U,r as P,G,e as S,z as D,A as E,s as h,c as Y,h as a,q as d,w as r,i as s,p as m,l as y,j as p,v as u,F as L,x as I,m as q,k as g,n as R,N as K,Q as z}from"./index-a7cfb084.js";import{_ as T,g as A}from"./MediaItemThumb.vue_vue_type_style_index_0_lang-2143ab29.js";import{g as Q,b as J}from"./MediaItemContextMenu.vue_vue_type_style_index_0_lang-f4a2415d.js";import{c as O,d as W,b,V as X,a as Z}from"./VCardText-47c6afd9.js";import{u as _,V as x,a as B,l as ee}from"./VBtn-48709670.js";import{V as te}from"./VMenu-40f27db7.js";import{V as F}from"./VCard-0ab5cfc8.js";import{a as ie}from"./VTooltip-651180bd.js";import{b as ae,c as re}from"./layout-357f0c82.js";import{b as ne}from"./VSelect-7d204a59.js";const N=j()({name:"VLayout",props:ae(),setup(e,l){let{slots:f}=l;const{layoutClasses:k,layoutStyles:V,getLayoutItem:w,items:C,layoutRef:$}=re(e);return _(()=>{var v;return n("div",{ref:$,class:k.value,style:V.value},[(v=f.default)==null?void 0:v.call(f)])}),{getLayoutItem:w,items:C}}}),le={key:0,xs5:"","pa-5":""},me={key:0},oe={key:1},se={key:2},de={style:{"padding-bottom":"10px"}},ue=["onClick"],ce={style:{color:"primary"}},ye={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},ge=["innerHTML"],fe={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},pe={style:{position:"absolute",float:"right",right:"15px",top:"15px"}},Be=U({__name:"InfoHeader",props:{item:null},setup(e){const l=e,f=P(!1),k=P(),{mobile:V}=G(),w=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,C=S();D(()=>l.item,async t=>{t&&(h.topBarTitle=t.name,k.value=await A(l.item,z.FANART)||await A(l.item,z.THUMB),h.topBarContextMenuItems=J([t],t))},{immediate:!0}),E(()=>{h.topBarContextMenuItems=[]});const $=function(t){C.push({name:"album",params:{itemId:t.item_id,provider:t.provider}})},v=function(t){console.log("artistClick",t),C.push({name:"artist",params:{itemId:t.item_id,provider:t.provider}})},M=Y(()=>{let t="";if(!l.item)return"";l.item.metadata&&l.item.metadata.description?t=l.item.metadata.description:l.item.metadata&&l.item.metadata.copyright?t=l.item.metadata.copyright:"artists"in l.item&&l.item.artists.forEach(function(i){"metadata"in i&&i.metadata.description&&(t=i.metadata.description)});const o=V.value?160:260;return t=t.replace(`\r
`,"<br /><br /><br />"),t=t.replace("\r","<br /><br />"),t=t.replace(`
`,"<br /><br />"),f.value?t:t.length>o?t.substring(0,o)+"...":t});return(t,o)=>(a(),d("div",null,[n(F,{variant:"flat",img:g(w),style:{"margin-top":"-10px","z-index":"0"},height:"30vh","max-height":"500px","min-height":"340px"},{default:r(()=>[e.item?m("",!0):(a(),s(ee,{key:0,indeterminate:""})),n(O,{width:"100%",height:"100%",cover:"",class:"background-image",src:k.value,gradient:t.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),e.item?(a(),s(N,{key:1,style:{margin:"0",position:"absolute",top:"50%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:r(()=>[t.$vuetify.display.mobile?m("",!0):(a(),d("div",le,["artists"in e.item&&e.item.media_type?(a(),d("div",me,[n(T,{item:e.item,"min-size":192,style:{"margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},null,8,["item"])])):"owner"in e.item&&e.item.media_type?(a(),d("div",oe,[n(T,{item:e.item,"min-size":192,style:{"margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},null,8,["item"])])):(a(),d("div",se,[n(T,{item:e.item,tile:!1,"min-size":192,style:{"margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},null,8,["item"])]))])),y("div",null,[n(W,null,{default:r(()=>[p(u(e.item.name),1)]),_:1}),y("div",de,["version"in e.item&&e.item.version?(a(),s(b,{key:0,class:"caption"},{default:r(()=>[p(u(e.item.version),1)]),_:1})):m("",!0),"artists"in e.item&&e.item.artists?(a(),s(b,{key:1,class:"title accent--text"},{default:r(()=>[n(x,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(a(!0),d(L,null,I(e.item.artists,(i,c)=>(a(),d("span",{key:i.item_id},[y("a",{style:{color:"accent"},onClick:be=>v(i)},u(i.name),9,ue),c+1<e.item.artists.length?(a(),d("span",{key:c,style:{color:"accent"}},u(" / "))):m("",!0)]))),128))]),_:1})):m("",!0),"artist"in e.item&&e.item.artist?(a(),s(b,{key:2,class:"title"},{default:r(()=>[n(x,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),y("a",{onClick:o[0]||(o[0]=i=>v(e.item.artist))},u(e.item.artist.name),1)]),_:1})):m("",!0),"owner"in e.item&&e.item.owner?(a(),s(b,{key:3,class:"title"},{default:r(()=>[n(x,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),y("a",ce,u(e.item.owner),1)]),_:1})):m("",!0),"album"in e.item&&e.item.album?(a(),s(b,{key:4},{default:r(()=>[n(x,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),y("a",{style:{color:"secondary"},onClick:o[1]||(o[1]=i=>{var c;return $((c=e.item)==null?void 0:c.album)})},u(e.item.album.name),1)]),_:1})):m("",!0)]),y("div",ye,[n(te,{location:"bottom"},{activator:r(({props:i})=>{var c;return[n(B,q({color:"primary"},i,{"prepend-icon":"mdi-play-circle",disabled:!((c=g(h).selectedPlayer)!=null&&c.available)||g(h).blockGlobalPlayMenu}),{default:r(()=>[p(u(t.$t("play")),1)]),_:2},1040,["disabled"])]}),default:r(()=>[n(F,{"min-width":"300"},{default:r(()=>[n(ie,{lines:"one",density:"comfortable"},{default:r(()=>[(a(!0),d(L,null,I(g(Q)([e.item]),i=>(a(),s(X,{key:i.label,title:t.$t(i.label,i.labelArgs),onClick:c=>i.action?i.action():""},{prepend:r(()=>[n(Z,{style:{"padding-right":"10px"}},{default:r(()=>[n(x,{icon:i.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1}),!t.$vuetify.display.mobile&&!e.item.in_library?(a(),s(B,{key:0,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart-outline",onClick:o[2]||(o[2]=i=>g(R).addItemsToLibrary([e.item]))},{default:r(()=>[p(u(t.$t("add_library")),1)]),_:1})):m("",!0),!t.$vuetify.display.mobile&&e.item.in_library?(a(),s(B,{key:1,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart",onClick:o[3]||(o[3]=i=>g(R).removeItemsFromLibrary([e.item]))},{default:r(()=>[p(u(t.$t("remove_library")),1)]),_:1})):m("",!0)]),g(M)?(a(),s(b,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:o[4]||(o[4]=i=>f.value=!f.value)},{default:r(()=>[y("div",{innerHTML:g(M)},null,8,ge)]),_:1})):m("",!0),e.item&&e.item.metadata.genres?(a(),d("div",fe,[(a(!0),d(L,null,I(e.item.metadata.genres,i=>(a(),s(ne,{key:i,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:r(()=>[p(u(i),1)]),_:2},1024))),128))])):m("",!0)])]),_:1})):m("",!0),e.item?(a(),s(N,{key:2,style:{"z-index":"800",height:"100%","padding-left":"15px"}},{default:r(()=>[y("div",pe,[n(H,{"provider-mappings":e.item.provider_mappings,height:25,"enable-details":!0,"enable-preview":e.item.media_type==g(K).TRACK},null,8,["provider-mappings","enable-preview"])])]),_:1})):m("",!0)]),_:1},8,["img"])]))}});export{Be as _};
