
#trojan://1@{{fake_ip_for_sub_link}}#{{user.current_usage_GB|round(3)}}/{{user.usage_limit_GB}}GB_Remain:{{expire_days}}days 

%for d in domains
%for t in (['http','tls'] if hconfigs[ConfigEnum.http_proxy_enable] else ['tls'])
%for port in hconfigs[ConfigEnum.http_ports if t=='http' else ConfigEnum.tls_ports].split(',')
%set phttp=port if t=='http' else None
%set ptls=port if t=='tls' else None
####################################
## {{d.mode}}  {{d.domain}}  {{t}}:{{port}}
####################################
% for type in link_maker.all_proxies()
% set pinfo=link_maker.make_proxy(type,d,phttp=phttp,ptls=ptls)
% if pinfo!=None
% set link=link_maker.to_link(pinfo)
% if link!=None
{{''}}
# {{pinfo["name"]}} {{domain}}
{{link}}
%endif
%endif
% endfor
% endfor
% endfor
{{''}}



% endfor


