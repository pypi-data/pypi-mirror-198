"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_pageLayout_tsx"],{"./app/components/createAlertButton.tsx":(e,t,r)=>{r.d(t,{K:()=>g,Z:()=>y});var n=r("./app/actionCreators/indicator.tsx"),s=r("./app/actionCreators/navigation.tsx"),a=r("./app/components/acl/access.tsx"),o=r("./app/components/assistant/guideAnchor.tsx"),i=r("./app/components/button.tsx"),c=r("./app/components/links/link.tsx"),l=r("./app/icons/index.tsx"),u=r("./app/locale.tsx"),p=r("./app/utils/useApi.tsx"),d=r("./app/utils/useRouter.tsx"),m=r("./app/views/alerts/wizard/options.tsx"),h=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){let{projects:t,eventView:r,organization:n,referrer:s,onClick:a,alertType:o,disableMetricDataset:i,...c}=e;const l=t.find((e=>e.id===`${r.project[0]}`)),p=r.generateQueryStringObject();p.query?.includes(`project:${l?.slug}`)&&(p.query=p.query.replace(`project:${l?.slug}`,""));const d=o?m.FZ[o]:m.F4,g={pathname:`/organizations/${n.slug}/alerts/new/metric/`,query:{...p,createFromDiscover:!0,disableMetricDataset:i,referrer:s,...d,project:l?.slug,aggregate:p.yAxis??d.aggregate}};return(0,h.tZ)(S,{organization:n,onClick:()=>{a?.()},to:g,"aria-label":(0,u.t)("Create Alert"),...c})}g.displayName="CreateAlertFromViewButton";const S=e=>{let{organization:t,projectSlug:r,iconProps:m,referrer:g,hideIcon:S,showPermissionGuide:y,alertOption:T,onEnter:f,...E}=e;const _=(0,d.Z)(),R=(0,p.Z)(),A=e=>{const r=new URLSearchParams;return g&&r.append("referrer",g),":projectId"!==e&&r.append("project",e),T&&r.append("alert_option",T),`/organizations/${t.slug}/alerts/wizard/?${r.toString()}`};function v(e){e.preventDefault(),f?.(),(0,s.T)(A(":projectId"),_)}async function N(){const e=`/organizations/${t.slug}/`;(0,n.E3)();try{await R.requestPromise(e,{method:"PUT",data:{alertsMemberWrite:!0}}),(0,n.S9)((0,u.t)("Successfully updated organization settings"))}catch(e){(0,n.Iw)((0,u.t)("Unable to update organization settings"))}}const x=(0,u._N)("Ask your organization owner or manager to [settingsLink:enable alerts access] for you.",{settingsLink:(0,h.tZ)(c.Z,{to:`/settings/${t.slug}`})}),C=e=>(0,h.tZ)(i.zx,{disabled:!e,title:e?void 0:x,icon:!S&&(0,h.tZ)(l.vr,{...m}),to:r?A(r):void 0,tooltipProps:{isHoverable:!0,position:"top",overlayStyle:{maxWidth:"270px"}},onClick:r?f:v,...E,children:E.children??(0,u.t)("Create Alert")}),Z=!t.alertsMemberWrite&&!!y;return(0,h.tZ)(a.Z,{organization:t,access:["alerts:write"],children:e=>{let{hasAccess:r}=e;return Z?(0,h.tZ)(a.Z,{organization:t,access:["org:write"],children:e=>{let{hasAccess:t}=e;return(0,h.tZ)(o.Z,{target:t?"alerts_write_owner":"alerts_write_member",onFinish:t?N:void 0,children:C(r)})}}):C(r)}})};S.displayName="CreateAlertButton";const y=S},"./app/components/replays/replayCountBadge.tsx":(e,t,r)=>{r.d(t,{Z:()=>o});var n=r("./app/components/badge.tsx"),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{count:t}=e;const r=t&&t>50?"50+":t??null;return(0,s.tZ)(n.Z,{text:r})}a.displayName="ReplayCountBadge";const o=a},"./app/components/replays/replaysFeatureBadge.tsx":(e,t,r)=>{r.d(t,{Z:()=>o});var n=r("./app/components/featureBadge.tsx"),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){return(0,s.tZ)(n.Z,{...e,type:"new"})}a.displayName="ReplaysFeatureBadge";const o=a},"./app/utils/performance/contexts/metricsCardinality.tsx":(e,t,r)=>{r.d(t,{BT:()=>E,e0:()=>R}),r("../node_modules/core-js/modules/es.array.includes.js");var n=r("../node_modules/react/index.js"),s=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),a=r("./app/utils/dates.tsx"),o=r("./app/utils/discover/eventView.tsx"),i=r("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),c=r("../node_modules/lodash/omit.js"),l=r.n(c),u=r("./app/utils/discover/genericDiscoverQuery.tsx"),p=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{eventView:t,location:r}=e;return l()(t.getEventsAPIPayload(r),["field","sort","per_page","query"])}function m(e){let{children:t,...r}=e;return(0,p.tZ)(u.ZP,{route:"metrics-compatibility-sums",getRequestPayload:d,...r,children:e=>{let{tableData:r,...n}=e;return t({tableData:r,...n})}})}function h(e){let{eventView:t,location:r}=e;return l()(t.getEventsAPIPayload(r),["field","sort","per_page","query"])}function g(e){let{children:t,...r}=e;return(0,p.tZ)(u.ZP,{route:"metrics-compatibility",getRequestPayload:h,...r,children:e=>{let{tableData:r,...n}=e;return t({tableData:r,...n})}})}m.displayName="MetricsCompatibilityQuery",g.displayName="MetricsCompatibilitySumsQuery";var S=r("./app/utils/performance/contexts/utils.tsx");const[y,T,f]=(0,S.n)({name:"MetricsCardinalityContext",strict:!1}),E=e=>{if(!(0,i.gp)(e.organization))return(0,p.tZ)(y,{value:{isLoading:!1,outcome:{forceTransactionsOnly:!0}},children:e.children});const t={location:e.location,orgSlug:e.organization.slug,cursor:"0:0:0"},r=o.ZP.fromLocation(e.location);r.fields=[{field:"tpm()"}];const s=function(e){const t=e.clone();return t.start||t.end||(t.statsPeriod?(0,a.YJ)(t.statsPeriod)>1&&(t.statsPeriod="1h",t.start=void 0,t.end=void 0):(t.statsPeriod="1h",t.start=void 0,t.end=void 0)),t}(r);return(0,p.tZ)(n.Fragment,{children:(0,p.tZ)(m,{eventView:s,...t,children:r=>(0,p.tZ)(g,{eventView:s,...t,children:t=>{const n=r.isLoading||t.isLoading,s=r.isLoading||t.isLoading?void 0:function(e,t,r){const n={forceTransactionsOnly:!0},s=r.features.includes("performance-mep-bannerless-ui");if(!e)return n;const a=e.compatible_projects;return t?n:e?function(e){return!A(e).metricsCount}(e)?n:function(e,t){const r=A(e);return t?r.nullCount/r.metricsCount>.01:r.nullCount>0}(e,s)?{shouldWarnIncompatibleSDK:!0,forceTransactionsOnly:!0,compatibleProjects:a}:function(e){const t=A(e);return t.unparamCount>=t.metricsCount}(e)?{shouldNotifyUnnamedTransactions:!0,forceTransactionsOnly:!0,compatibleProjects:a}:function(e,t){const r=A(e);return t?r.unparamCount/r.metricsCount>.01:r.unparamCount>0}(e,s)?{shouldNotifyUnnamedTransactions:!0,compatibleProjects:a,forceTransactionsOnly:!1}:{forceTransactionsOnly:!1}:n}(r.tableData&&t.tableData?{...r.tableData,...t.tableData}:null,!!r.error&&!!t.error,e.organization);return(0,p.tZ)(_,{sendOutcomeAnalytics:e.sendOutcomeAnalytics,organization:e.organization,value:{isLoading:n,outcome:s},children:e.children})}})})})};E.displayName="MetricsCardinalityProvider";const _=e=>{const t=e.value.outcome?.shouldWarnIncompatibleSDK??!1,r=e.value.outcome?.shouldNotifyUnnamedTransactions??!1,a=!e.value.outcome?.forceTransactionsOnly;return(0,n.useEffect)((()=>{!e.value.isLoading&&e.sendOutcomeAnalytics&&(0,s.Z)("performance_views.mep.metrics_outcome",{organization:e.organization,is_on_metrics:a,fallback_from_null:t,fallback_from_unparam:r})}),[e.organization,e.value.isLoading,a,r,t,e.sendOutcomeAnalytics]),(0,p.tZ)(y,{...e,children:e.children})};_.displayName="Provider",f.Consumer;const R=T;function A(e){let{sum:t}=e;try{const e=Number(t.metrics);return{metricsCount:e,unparamCount:Number(t.metrics_unparam),nullCount:Number(t.metrics_null)}}catch(e){return{metricsCount:0,unparamCount:0,nullCount:0}}}},"./app/utils/performance/contexts/metricsEnhancedSetting.tsx":(e,t,r)=>{r.d(t,{Eg:()=>T,gp:()=>S,kP:()=>y,nP:()=>d,nl:()=>m,oR:()=>h,tm:()=>g}),r("../node_modules/core-js/modules/es.array.includes.js");var n=r("../node_modules/react/index.js"),s=r("../node_modules/react-router/es/index.js"),a=(r("./app/utils/localStorage.tsx"),r("./app/utils/queryString.tsx")),o=r("./app/utils/useOrganization.tsx"),i=r("./app/utils/performance/contexts/utils.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[l,u,p]=(0,i.n)({name:"MetricsEnhancedSettingContext"}),d=p.Consumer;let m,h;!function(e){e.unset="unset",e.metrics="metrics",e.transactions="transactions"}(m||(m={})),function(e){e.auto="auto",e.metricsOnly="metricsOnly",e.transactionsOnly="transactionsOnly"}(h||(h={}));const g="metricSearchSetting";function S(e){const t=function(e){return e.features.includes("performance-use-metrics")}(e),r=e.features.includes("performance-transaction-name-only-search"),n=e.features.includes("dynamic-sampling")&&e.features.includes("mep-rollout-flag");return t||r||n}const y=e=>{let{children:t,location:r,_hasMEPState:i,forceTransactions:u}=e;const p=S((0,o.Z)()),d=[h.metricsOnly,h.transactionsOnly],g=r?(0,a.ro)(r.query.metricSetting):h.metricsOnly;let y=h.metricsOnly;u&&(y=h.transactionsOnly);const T=d.find((e=>e===g))??y,f=void 0!==i,[E,_]=(0,n.useReducer)(((e,t)=>t),T),R=(0,n.useCallback)((e=>{r&&(s.browserHistory.replace({...r,query:{...r.query,metricSetting:e}}),_(e))}),[r,_]),[A,v]=(0,n.useReducer)(((e,t)=>t),m.unset),N=f?i:E,x=p&&N===h.auto,C=p&&N===h.metricsOnly,Z=p&&N===h.transactionsOnly,O=`${N}`;return(0,c.tZ)(l,{value:{autoSampleState:A,metricSettingState:N,shouldQueryProvideMEPAutoParams:x,shouldQueryProvideMEPMetricParams:C,shouldQueryProvideMEPTransactionParams:Z,memoizationKey:O,setMetricSettingState:R,setAutoSampleState:v},children:t})};y.displayName="MEPSettingProvider";const T=u},"./app/views/alerts/rules/metric/types.tsx":(e,t,r)=>{r.d(t,{F4:()=>a,GM:()=>c,LO:()=>h,Lm:()=>g,Tb:()=>d,Us:()=>m,XH:()=>p,Yh:()=>l,hd:()=>S,lK:()=>u,lT:()=>s,qz:()=>i,t6:()=>o});var n=r("./app/locale.tsx");let s,a,o,i,c,l,u,p,d,m;!function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"}(s||(s={})),function(e){e.CRITICAL="critical",e.WARNING="warning",e.RESOLVE="resolve"}(a||(a={})),function(e){e.COUNT="count",e.CHANGE="change",e.PERCENT="percent"}(o||(o={})),function(e){e.ERRORS="events",e.TRANSACTIONS="transactions",e.GENERIC_METRICS="generic_metrics",e.SESSIONS="sessions",e.METRICS="metrics"}(i||(i={})),function(e){e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction",e.USER="user",e.SESSION="session"}(c||(c={})),function(e){e.ERROR_DEFAULT="error_default",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(l||(l={})),function(e){e.CRASH_FREE_SESSIONS="percentage(sessions_crashed, sessions) AS _crash_rate_alert_aggregate",e.CRASH_FREE_USERS="percentage(users_crashed, users) AS _crash_rate_alert_aggregate"}(u||(u={})),function(e){e.SIX_HOURS="6h",e.ONE_DAY="1d",e.THREE_DAYS="3d",e.SEVEN_DAYS="10000m",e.FOURTEEN_DAYS="14d",e.THIRTY_DAYS="30d"}(p||(p={})),function(e){e[e.ONE_MINUTE=1]="ONE_MINUTE",e[e.FIVE_MINUTES=5]="FIVE_MINUTES",e[e.TEN_MINUTES=10]="TEN_MINUTES",e[e.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",e[e.THIRTY_MINUTES=30]="THIRTY_MINUTES",e[e.ONE_HOUR=60]="ONE_HOUR",e[e.TWO_HOURS=120]="TWO_HOURS",e[e.FOUR_HOURS=240]="FOUR_HOURS",e[e.ONE_DAY=1440]="ONE_DAY"}(d||(d={})),function(e){e.EMAIL="email",e.SLACK="slack",e.PAGERDUTY="pagerduty",e.MSTEAMS="msteams",e.SENTRY_APP="sentry_app"}(m||(m={}));const h={[m.EMAIL]:(0,n.t)("Emaiâ€‹l"),[m.SLACK]:(0,n.t)("Slack"),[m.PAGERDUTY]:(0,n.t)("Pagerduty"),[m.MSTEAMS]:(0,n.t)("MS Teams"),[m.SENTRY_APP]:(0,n.t)("Notification")};let g;!function(e){e.SPECIFIC="specific",e.USER="user",e.TEAM="team",e.SENTRY_APP="sentry_app"}(g||(g={}));const S={[g.USER]:(0,n.t)("Member"),[g.TEAM]:(0,n.t)("Team")}},"./app/views/alerts/wizard/options.tsx":(e,t,r)=>{r.d(t,{A_:()=>d,F4:()=>h,F7:()=>g,FZ:()=>m,LH:()=>S,S:()=>_,Sz:()=>E,VS:()=>u,Y4:()=>f,gb:()=>p}),r("../node_modules/core-js/modules/es.array.includes.js");var n=r("../node_modules/lodash/mapValues.js"),s=r.n(n),a=r("./app/locale.tsx"),o=r("./app/utils/fields/index.ts"),i=r("./app/views/alerts/rules/metric/types.tsx");let c,l;!function(e){e[e.ERROR=0]="ERROR",e[e.PERFORMANCE=1]="PERFORMANCE",e[e.CRASH_RATE=2]="CRASH_RATE"}(c||(c={})),function(e){e.DISCOVER="discover",e.METRICS="metrics",e.METRICS_ENHANCED="metricsEnhanced"}(l||(l={}));const u={[i.qz.ERRORS]:c.ERROR,[i.qz.TRANSACTIONS]:c.PERFORMANCE,[i.qz.GENERIC_METRICS]:c.PERFORMANCE,[i.qz.METRICS]:c.CRASH_RATE,[i.qz.SESSIONS]:c.CRASH_RATE},p={issues:(0,a.t)("Issues"),num_errors:(0,a.t)("Number of Errors"),users_experiencing_errors:(0,a.t)("Users Experiencing Errors"),throughput:(0,a.t)("Throughput"),trans_duration:(0,a.t)("Transaction Duration"),apdex:(0,a.t)("Apdex"),failure_rate:(0,a.t)("Failure Rate"),lcp:(0,a.t)("Largest Contentful Paint"),fid:(0,a.t)("First Input Delay"),cls:(0,a.t)("Cumulative Layout Shift"),custom:(0,a.t)("Custom Metric"),crash_free_sessions:(0,a.t)("Crash Free Session Rate"),crash_free_users:(0,a.t)("Crash Free User Rate")},d=e=>[{categoryHeading:(0,a.t)("Errors"),options:["issues","num_errors","users_experiencing_errors"]},...e.features.includes("crash-rate-alerts")?[{categoryHeading:(0,a.t)("Sessions"),options:["crash_free_sessions","crash_free_users"]}]:[],{categoryHeading:(0,a.t)("Performance"),options:["throughput","trans_duration","apdex","failure_rate","lcp","fid","cls"]},{categoryHeading:(0,a.t)("Other"),options:["custom"]}],m={num_errors:{aggregate:"count()",dataset:i.qz.ERRORS,eventTypes:i.GM.ERROR},users_experiencing_errors:{aggregate:"count_unique(user)",dataset:i.qz.ERRORS,eventTypes:i.GM.ERROR},throughput:{aggregate:"count()",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},trans_duration:{aggregate:"p95(transaction.duration)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},apdex:{aggregate:"apdex(300)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},failure_rate:{aggregate:"failure_rate()",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},lcp:{aggregate:"p95(measurements.lcp)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},fid:{aggregate:"p95(measurements.fid)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},cls:{aggregate:"p95(measurements.cls)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},custom:{aggregate:"p95(measurements.fp)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},crash_free_sessions:{aggregate:i.lK.CRASH_FREE_SESSIONS,dataset:i.qz.SESSIONS,eventTypes:i.GM.SESSION},crash_free_users:{aggregate:i.lK.CRASH_FREE_USERS,dataset:i.qz.SESSIONS,eventTypes:i.GM.USER}},h=m.num_errors,g=new Set(["num_errors","users_experiencing_errors","throughput","apdex","failure_rate","crash_free_sessions","crash_free_users"]),S=new Set(["trans_duration","lcp","fid","cls"]),y=[o.Sh.RELEASE,o.Sh.TRANSACTION,o.Sh.TRANSACTION_OP,o.Sh.TRANSACTION_STATUS,o.Sh.HTTP_METHOD],T=[o.Sh.RELEASE],f=s()({[i.qz.ERRORS]:void 0,[i.qz.TRANSACTIONS]:y,[i.qz.METRICS]:T,[i.qz.GENERIC_METRICS]:y,[i.qz.SESSIONS]:T},(e=>e?(0,o.yE)(e):void 0)),E={[i.qz.ERRORS]:[o.Sh.EVENT_TYPE,o.Sh.RELEASE_VERSION,o.Sh.RELEASE_STAGE,o.Sh.RELEASE_BUILD,o.Sh.PROJECT,...Object.values(o.Zl),...Object.values(o.$n),...Object.values(o.l1),o.Sh.TRANSACTION,o.Sh.TRANSACTION_DURATION,o.Sh.TRANSACTION_OP,o.Sh.TRANSACTION_STATUS],[i.qz.TRANSACTIONS]:void 0,[i.qz.METRICS]:void 0,[i.qz.GENERIC_METRICS]:void 0,[i.qz.SESSIONS]:void 0};function _(e,t){return e===i.qz.ERRORS?l.DISCOVER:t?l.METRICS_ENHANCED:e===i.qz.GENERIC_METRICS?l.METRICS:l.DISCOVER}},"./app/views/performance/transactionSummary/pageLayout.tsx":(e,t,r)=>{r.d(t,{Ox:()=>ye,ZP:()=>Ee,C1:()=>fe});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/react/index.js")),a=r("../node_modules/react-router/es/index.js"),o=r("./app/components/acl/feature.tsx"),i=r("./app/components/alert.tsx"),c=r("./app/components/layouts/thirds.tsx"),l=r("./app/components/organizations/pageFilters/container.tsx"),u=r("./app/components/sentryDocumentTitle.tsx"),p=r("./app/components/tabs/index.tsx"),d=r("./app/locale.tsx"),m=r("./app/utils.tsx"),h=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),g=r("./app/utils/performance/contexts/metricsCardinality.tsx"),S=r("./app/utils/performance/contexts/performanceEventViewContext.tsx"),y=r("./app/utils/queryString.tsx"),T=r("./app/utils/withDomainRequired.tsx"),f=r("./app/views/performance/utils.tsx"),E=r("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx"),_=r("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),R=r("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),A=r("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),v=r("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),N=(r("../node_modules/core-js/modules/es.array.includes.js"),r("./app/components/assistant/guideAnchor.tsx")),x=r("./app/components/buttonBar.tsx"),C=r("./app/components/createAlertButton.tsx"),Z=r("./app/components/featureBadge.tsx"),O=r("./app/components/idBadge/index.tsx"),j=r("./app/components/replays/replayCountBadge.tsx"),b=r("./app/components/replays/replaysFeatureBadge.tsx"),I=r("./app/components/replays/useReplaysCount.tsx"),w=r("../node_modules/lodash/omit.js"),P=r.n(w),z=r("../node_modules/lodash/pick.js"),M=r.n(z),q=r("./app/utils/discover/genericDiscoverQuery.tsx"),D=r("./app/utils/tokenizeSearch.tsx"),F=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function V(e){const{eventView:t,location:r,transaction:n,type:s}=e,a={transaction:`"${(0,m.d9)((0,D.Bn)(n))}"`,type:s},o=M()(t.getEventsAPIPayload(r),["project","environment"]);return Object.assign(a,o)}function U(e){return(0,F.tZ)(q.ZP,{route:"events-has-measurements",getRequestPayload:V,...P()(e,"children"),children:t=>{let{tableData:r,...n}=t;return e.children({hasMeasurements:r?.measurements??null,...n})}})}U.displayName="HasMeasurementsQuery";const k=U;var L=r("./app/utils/profiling/platforms.tsx"),B=r("./app/utils/replays/projectSupportsReplay.tsx"),H=r("./app/views/performance/breadcrumb.tsx"),G=r("./app/views/performance/landing/utils.tsx"),Y=r("./app/views/performance/transactionSummary/tabs.tsx"),$=r("./app/components/button.tsx"),W=r("./app/components/performance/teamKeyTransaction.tsx"),K=r("./app/components/performance/teamKeyTransactionsManager.tsx"),X=r("./app/components/tooltip.tsx"),Q=r("./app/icons/index.tsx"),J=r("./app/utils/useTeams.tsx"),ee=r("./app/utils/withProjects.tsx");class te extends s.Component{render(){const{isOpen:e,keyedTeams:t,...r}=this.props,n=t?.length??0,s=(0,F.tZ)($.zx,{...r,size:"sm",icon:n?(0,F.tZ)(Q.GK,{color:"yellow400",isSolid:!0}):(0,F.tZ)(Q.GK,{}),children:n?(0,d.tn)("Starred for Team","Starred for Teams",n):(0,d.t)("Star for Team")});if(!e&&t?.length){const e=t.map((e=>{let{slug:t}=e;return t})).join(", ");return(0,F.tZ)(X.u,{title:e,children:s})}return s}}function re(e){let{counts:t,getKeyedTeams:r,project:n,transactionName:s,...a}=e;const o=r(n.id,s);return(0,F.tZ)(W.Z,{counts:t,keyedTeams:o,title:te,project:n,transactionName:s,...a})}function ne(e){let{eventView:t,organization:r,projects:n,...s}=e;const{teams:a,initiallyLoaded:o}=(0,J.Z)({provideUserTeams:!0});if(1!==t.project.length)return(0,F.tZ)(te,{isOpen:!1,disabled:!0,keyedTeams:null});const i=String(t.project[0]),c=n.find((e=>e.id===i));return(0,m.ri)(c)?(0,F.tZ)(K.z,{organization:r,teams:a,selectedTeams:["myteams"],selectedProjects:[String(i)],children:(0,F.tZ)(K.$,{children:e=>{let{isLoading:t,...n}=e;return(0,F.tZ)(re,{organization:r,project:c,isLoading:t||!o,...s,...n})}})}):(0,F.tZ)(te,{isOpen:!1,disabled:!0,keyedTeams:null})}te.displayName="TitleButton",re.displayName="TeamKeyTransactionButton",ne.displayName="TeamKeyTransactionButtonWrapper";const se=(0,ee.Z)(ne);var ae=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),oe=r("./app/actionCreators/indicator.tsx"),ie=r("./app/actionCreators/modal.tsx"),ce=r("./app/utils/withApi.tsx"),le=r("./app/views/performance/transactionSummary/transactionThresholdModal.tsx");class ue extends s.Component{constructor(){super(...arguments),(0,ae.Z)(this,"state",{transactionThreshold:void 0,transactionThresholdMetric:void 0,loadingThreshold:!1}),(0,ae.Z)(this,"fetchTransactionThreshold",(()=>{const{api:e,organization:t,transactionName:r}=this.props,n=this.getProject();if(!(0,m.ri)(n))return;const s=`/organizations/${t.slug}/project-transaction-threshold-override/`;this.setState({loadingThreshold:!0}),e.requestPromise(s,{method:"GET",includeAllArgs:!0,query:{project:n.id,transaction:r}}).then((e=>{let[t]=e;this.setState({loadingThreshold:!1,transactionThreshold:t.threshold,transactionThresholdMetric:t.metric})})).catch((()=>{const e=`/projects/${t.slug}/${n.slug}/transaction-threshold/configure/`;this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:n.id}}).then((e=>{let[t]=e;this.setState({loadingThreshold:!1,transactionThreshold:t.threshold,transactionThresholdMetric:t.metric})})).catch((e=>{this.setState({loadingThreshold:!1});const t=e.responseJSON?.threshold??null;(0,oe.Iw)(t)}))}))}))}componentDidMount(){this.fetchTransactionThreshold()}getProject(){const{projects:e,eventView:t}=this.props;if(!(0,m.ri)(t))return;const r=String(t.project[0]);return e.find((e=>e.id===r))}onChangeThreshold(e,t){const{onChangeThreshold:r}=this.props;this.setState({transactionThreshold:e,transactionThresholdMetric:t}),(0,m.ri)(r)&&r(e,t)}openModal(){const{organization:e,transactionName:t,eventView:r}=this.props,{transactionThreshold:n,transactionThresholdMetric:s}=this.state;(0,ie.openModal)((a=>(0,F.tZ)(le.ZP,{...a,organization:e,transactionName:t,eventView:r,transactionThreshold:n,transactionThresholdMetric:s,onApply:(e,t)=>this.onChangeThreshold(e,t)})),{modalCss:le.fY,closeEvents:"escape-key"})}render(){const{loadingThreshold:e}=this.state;return(0,F.tZ)($.zx,{size:"sm",onClick:()=>this.openModal(),icon:(0,F.tZ)(Q.iC,{}),disabled:e,"aria-label":(0,d.t)("Settings"),"data-test-id":"set-transaction-threshold"})}}ue.displayName="TransactionThresholdButton";const pe=(0,ce.Z)((0,ee.Z)(ue));function de(e){let{eventView:t,organization:r,projects:n,projectId:a,metricsCardinality:i,location:l,transactionName:u,onChangeThreshold:m,currentTab:g,hasWebVitals:S}=e;function y(){(0,h.Z)("performance_views.summary.create_alert_clicked",{organization:r})}const T=n.find((e=>e.id===a)),f=r.features?.includes("performance-anomaly-detection-ui"),E=r.features.includes("session-replay")&&T&&(0,B.Z)(T),_=T&&r.features.includes("profiling")&&(0,L.kI)(T),R=(0,s.useCallback)((e=>{switch(S){case"maybe":return(0,G.Q_)(l,n,t).field===G.BY.FRONTEND_PAGELOAD||e;case"yes":return!0;default:return!1}}),[S,l,n,t]),A=(0,s.useMemo)((()=>T?.id?[Number(T.id)]:[]),[T?.id]),v=(0,I.Z)({transactionNames:u,organization:r,projectIds:A})[u];return(0,F.BX)(c.h4,{children:[(0,F.BX)(c.oB,{children:[(0,F.tZ)(H.Z,{organization:r,location:l,transaction:{project:a,name:u},tab:g}),(0,F.BX)(c.Dx,{children:[T&&(0,F.tZ)(O.Z,{project:T,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:T.slug}}),u]})]}),(0,F.tZ)(c.kP,{children:(0,F.BX)(x.ZP,{gap:1,children:[(0,F.tZ)(o.Z,{organization:r,features:["incidents"],children:e=>{let{hasFeature:s}=e;return s&&!i?.isLoading?(0,F.tZ)(C.K,{size:"sm",eventView:t,organization:r,projects:n,onClick:y,referrer:"performance",alertType:"trans_duration","aria-label":(0,d.t)("Create Alert"),disableMetricDataset:i?.outcome?.forceTransactionsOnly}):null}}),(0,F.tZ)(se,{transactionName:u,eventView:t,organization:r}),(0,F.tZ)(N.Z,{target:"project_transaction_threshold_override",position:"bottom",children:(0,F.tZ)(pe,{organization:r,transactionName:u,eventView:t,onChangeThreshold:m})})]})}),(0,F.tZ)(k,{location:l,orgSlug:r.slug,eventView:t,transaction:u,type:"web",children:e=>{let{hasMeasurements:t}=e;const r=R(!!t);return(0,F.BX)(p.td,{hideBorder:!0,outerWrapStyles:{gridColumn:"1 / -1"},children:[(0,F.tZ)(p.td.Item,{children:(0,d.t)("Overview")},Y.Z.TransactionSummary),(0,F.tZ)(p.td.Item,{children:(0,d.t)("All Events")},Y.Z.Events),(0,F.tZ)(p.td.Item,{children:(0,d.t)("Tags")},Y.Z.Tags),(0,F.tZ)(p.td.Item,{children:(0,d.t)("Spans")},Y.Z.Spans),(0,F.BX)(p.td.Item,{textValue:(0,d.t)("Anomalies"),hidden:!f,children:[(0,d.t)("Anomalies"),(0,F.tZ)(Z.Z,{type:"alpha",noTooltip:!0})]},Y.Z.Anomalies),(0,F.tZ)(p.td.Item,{textValue:(0,d.t)("Web Vitals"),hidden:!r,children:(0,d.t)("Web Vitals")},Y.Z.WebVitals),(0,F.BX)(p.td.Item,{textValue:(0,d.t)("Replays"),hidden:!E,children:[(0,d.t)("Replays"),(0,F.tZ)(j.Z,{count:v}),(0,F.tZ)(b.Z,{noTooltip:!0})]},Y.Z.Replays),(0,F.BX)(p.td.Item,{textValue:(0,d.t)("Profiling"),hidden:!_,children:[(0,d.t)("Profiling"),(0,F.tZ)(Z.Z,{type:"beta",noTooltip:!0})]},Y.Z.Profiling)]})}})]})}de.displayName="TransactionHeader";const me=de;var he=r("./app/views/performance/transactionSummary/utils.tsx");const ge={[Y.Z.WebVitals]:"performance_views.vitals.vitals_tab_clicked",[Y.Z.Tags]:"performance_views.tags.tags_tab_clicked",[Y.Z.Events]:"performance_views.events.events_tab_clicked",[Y.Z.Spans]:"performance_views.spans.spans_tab_clicked",[Y.Z.Anomalies]:"performance_views.anomalies.anomalies_tab_clicked"};function Se(e){const{location:t,organization:r,projects:n,tab:i,getDocumentTitle:d,generateEventView:N,childComponent:x,features:C=[]}=e,Z=(0,y.ro)(t.query.project),O=(0,f.JY)(t),[j,b]=(0,s.useState)(),I=(0,g.e0)(),[w,P]=(0,s.useState)(),[z,M]=(0,s.useState)(),q=(0,s.useCallback)((e=>{if(!O)return{};const n={orgSlug:r.slug,transaction:O,projectID:Z,query:t.query};switch(e){case Y.Z.Tags:return(0,A.vG)(n);case Y.Z.Events:return(0,_.xr)(n);case Y.Z.Spans:return(0,R.hN)(n);case Y.Z.Anomalies:return(0,E.az)(n);case Y.Z.Replays:return function(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/replays/`,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}(n);case Y.Z.Profiling:return function(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/profiles/`,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}(n);case Y.Z.WebVitals:return(0,v.Pl)({orgSlug:r.slug,transaction:O,projectID:(0,y.ro)(t.query.project),query:t.query});case Y.Z.TransactionSummary:default:return(0,he.e1)(n)}}),[t.query,r.slug,Z,O]),D=(0,s.useCallback)((e=>{if(e===i)return;const s=ge[e];s&&(0,h.Z)(s,{organization:r,project_platforms:(0,f.p9)(t,n)}),a.browserHistory.push((0,T.D)(q(e)))}),[q,i,r,t,n]);if(!(0,m.ri)(Z)||!(0,m.ri)(O))return fe(r,t),null;const V=n.find((e=>e.id===Z)),U=N({location:t,transactionName:O,organization:r});return(0,F.tZ)(u.Z,{title:d(O),orgSlug:r.slug,projectSlug:V?.slug,children:(0,F.tZ)(o.Z,{features:["performance-view",...C],organization:r,renderDisabled:ye,children:(0,F.tZ)(S.bq,{value:{eventView:U},children:(0,F.tZ)(l.Z,{shouldForceProject:(0,m.ri)(V),forceProject:V,specificProjectSlugs:(0,m.ri)(V)?[V.slug]:[],children:(0,F.tZ)(p.mQ,{value:i,onChange:D,children:(0,F.BX)(c.T3,{children:[(0,F.tZ)(me,{eventView:U,location:t,organization:r,projects:n,projectId:Z,transactionName:O,currentTab:i,hasWebVitals:i===Y.Z.WebVitals?"yes":"maybe",onChangeThreshold:(e,t)=>{P(e),M(t)},metricsCardinality:I}),(0,F.BX)(c.uT,{children:[(0,m.ri)(j)&&(0,F.tZ)(Te,{type:"error",showIcon:!0,children:j}),(0,F.tZ)(x,{location:t,organization:r,projects:n,eventView:U,projectId:Z,transactionName:O,setError:b,transactionThreshold:w,transactionThresholdMetric:z})]})]})})})})})})}function ye(){return(0,F.tZ)(i.bZ,{type:"warning",children:(0,d.t)("You don't have access to this feature")})}Se.displayName="PageLayout",ye.displayName="NoAccess";const Te=(0,n.Z)(i.bZ,{target:"e2hnjro0"})({name:"3hfw1i",styles:"grid-column:1/3;margin:0"});function fe(e,t){a.browserHistory.replace((0,T.D)({pathname:`/organizations/${e.slug}/performance/`,query:{...t.query}}))}const Ee=Se},"./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx":(e,t,r)=>{r.d(t,{ES:()=>c,az:()=>i,h2:()=>l,uT:()=>o});var n=r("./app/utils/discover/eventView.tsx"),s=r("./app/utils/queryString.tsx"),a=r("./app/utils/tokenizeSearch.tsx");const o="performance-anomaly-detection-ui";function i(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/anomalies/`}({orgSlug:t});return{pathname:a,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function c(e,t){return{high:t.red300,low:t.yellow300}[e]}function l(e){let{location:t,transactionName:r}=e;const o=(0,s.ro)(t.query.query,""),i=new a.MY(o);return i.setFilterValues("transaction",[r]),n.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:r,fields:["tpm()"],query:i.formatString(),projects:[]},t)}},"./app/views/performance/transactionSummary/transactionThresholdModal.tsx":(e,t,r)=>{r.d(t,{ZP:()=>O,fY:()=>Z});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=r("../node_modules/react/index.js"),o=r("../node_modules/lodash/cloneDeep.js"),i=r.n(o),c=r("../node_modules/lodash/set.js"),l=r.n(c),u=r("./app/actionCreators/indicator.tsx"),p=r("./app/components/button.tsx"),d=r("./app/components/buttonBar.tsx"),m=r("./app/components/forms/controls/selectControl.tsx"),h=r("./app/components/forms/fieldGroup/index.tsx"),g=r("./app/components/input.tsx"),S=r("./app/components/links/link.tsx"),y=r("./app/locale.tsx"),T=r("./app/styles/space.tsx"),f=r("./app/utils.tsx"),E=r("./app/utils/withApi.tsx"),_=r("./app/utils/withProjects.tsx"),R=r("./app/views/performance/transactionSummary/utils.tsx"),A=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let v;!function(e){e.TRANSACTION_DURATION="duration",e.LARGEST_CONTENTFUL_PAINT="lcp"}(v||(v={}));const N=[{label:(0,y.t)("Transaction Duration"),value:"duration"},{label:(0,y.t)("Largest Contentful Paint"),value:"lcp"}];class x extends a.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{threshold:this.props.transactionThreshold,metric:this.props.transactionThresholdMetric,error:null}),(0,n.Z)(this,"handleApply",(e=>{e.preventDefault();const{api:t,closeModal:r,organization:n,transactionName:s,onApply:a}=this.props,o=this.getProject();if(!(0,f.ri)(o))return;const i=`/organizations/${n.slug}/project-transaction-threshold-override/`;t.requestPromise(i,{method:"POST",includeAllArgs:!0,query:{project:o.id},data:{transaction:s,threshold:this.state.threshold,metric:this.state.metric}}).then((()=>{r(),a&&a(this.state.threshold,this.state.metric)})).catch((e=>{this.setState({error:e});const t=e.responseJSON?.threshold??e.responseJSON?.non_field_errors??null;(0,u.Iw)(t)}))})),(0,n.Z)(this,"handleFieldChange",(e=>t=>{this.setState((r=>{const n=i()(r);return l()(n,e,t),{...n,errors:void 0}}))})),(0,n.Z)(this,"handleReset",(e=>{e.preventDefault();const{api:t,closeModal:r,organization:n,transactionName:s,onApply:a}=this.props,o=this.getProject();if(!(0,f.ri)(o))return;const i=`/organizations/${n.slug}/project-transaction-threshold-override/`;t.requestPromise(i,{method:"DELETE",includeAllArgs:!0,query:{project:o.id},data:{transaction:s}}).then((()=>{const e=`/projects/${n.slug}/${o.slug}/transaction-threshold/configure/`;this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:o.id}}).then((e=>{let[t]=e;this.setState({threshold:t.threshold,metric:t.metric}),r(),a&&a(this.state.threshold,this.state.metric)})).catch((e=>{const t=e.responseJSON?.threshold??null;(0,u.Iw)(t)}))})).catch((e=>{this.setState({error:e})}))}))}getProject(){const{projects:e,eventView:t,project:r}=this.props;if((0,f.ri)(r))return e.find((e=>e.id===r));const n=String(t.project[0]);return e.find((e=>e.id===n))}renderModalFields(){return(0,A.BX)(a.Fragment,{children:[(0,A.tZ)(h.Z,{"data-test-id":"response-metric",label:(0,y.t)("Calculation Method"),inline:!1,help:(0,y.t)("This determines which duration metric is used for the Response Time Threshold."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,A.tZ)(m.Z,{required:!0,options:N.slice(),name:"responseMetric",label:(0,y.t)("Calculation Method"),value:this.state.metric,onChange:e=>{this.handleFieldChange("metric")(e.value)}})}),(0,A.tZ)(h.Z,{"data-test-id":"response-time-threshold",label:(0,y.t)("Response Time Threshold (ms)"),inline:!1,help:(0,y.t)("The satisfactory response time for the calculation method defined above. This is used to calculate Apdex and User Misery scores."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,A.tZ)(g.Z,{type:"number",name:"threshold",required:!0,pattern:"[0-9]*(\\.[0-9]*)?",onChange:e=>{this.handleFieldChange("threshold")(e.target.value)},value:this.state.threshold,step:100,min:100})})]})}render(){const{Header:e,Body:t,Footer:r,organization:n,transactionName:s,eventView:o}=this.props,i=this.getProject(),c=o.clone();c.query=c.getQueryWithAdditionalConditions();const l=(0,R.e1)({orgSlug:n.slug,transaction:s,query:c.generateQueryStringObject(),projectID:i?.id});return(0,A.BX)(a.Fragment,{children:[(0,A.tZ)(e,{closeButton:!0,children:(0,A.tZ)("h4",{children:(0,y.t)("Transaction Settings")})}),(0,A.BX)(t,{children:[(0,A.tZ)(C,{children:(0,y._N)("The changes below will only be applied to [transaction]. To set it at a more global level, go to [projectSettings: Project Settings].",{transaction:(0,A.tZ)(S.Z,{to:l,children:s}),projectSettings:(0,A.tZ)(S.Z,{to:`/settings/${n.slug}/projects/${i?.slug}/performance/`})})}),this.renderModalFields()]}),(0,A.tZ)(r,{children:(0,A.BX)(d.ZP,{gap:1,children:[(0,A.tZ)(p.zx,{priority:"default",onClick:this.handleReset,"data-test-id":"reset-all",children:(0,y.t)("Reset All")}),(0,A.tZ)(p.zx,{"aria-label":(0,y.t)("Apply"),priority:"primary",onClick:this.handleApply,"data-test-id":"apply-threshold",children:(0,y.t)("Apply")})]})})]})}}x.displayName="TransactionThresholdModal";const C=(0,s.Z)("div",{target:"e16m24dg0"})("margin-bottom:",(0,T.D)(4),";"),Z={name:"1yumxzh",styles:"width:100%;max-width:650px"},O=(0,E.Z)((0,_.Z)(x))}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_pageLayout_tsx.bc8dfc18d84c3aa2ca7bf7a653c1bb1c.js.map