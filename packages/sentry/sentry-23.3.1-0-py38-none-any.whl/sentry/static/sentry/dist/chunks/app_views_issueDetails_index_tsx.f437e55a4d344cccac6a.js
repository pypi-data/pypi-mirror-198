"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_issueDetails_index_tsx"],{"./app/components/events/errorLevel.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const o="13px",i=(0,r.Z)("span",{target:"efr73n80"})("padding:0;position:relative;width:",(e=>e.size||o),";height:",(e=>e.size||o),";text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;background-color:",(e=>e.level?e.theme.level[e.level]:e.theme.level.error),";")},"./app/components/events/eventMessage.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/components/events/errorLevel.tsx"),i=s("./app/styles/space.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,r.Z)((e=>{let{className:t,level:s,levelIndicatorSize:r,message:i,annotations:a}=e;return(0,n.BX)("div",{className:t,children:[s&&(0,n.tZ)(o.Z,{size:r,level:s,children:s}),i&&(0,n.tZ)(l,{children:i}),a]})}),{target:"e1ms02k71"})("display:flex;gap:",(0,i.D)(1),";align-items:center;position:relative;line-height:1.2;overflow:hidden;"),l=(0,r.Z)("span",{target:"e1ms02k70"})((e=>e.theme.overflowEllipsis)," width:auto;max-height:38px;"),p=a},"./app/components/events/interfaces/crashContent/exception/setupSourceMapsAlert.tsx":(e,t,s)=>{s.d(t,{I:()=>f,m:()=>b}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("./app/components/alert.tsx"),o=s("./app/components/events/interfaces/spans/utils.tsx"),i=s("./app/components/links/externalLink.tsx"),n=s("./app/data/platformCategories.tsx"),a=s("./app/locale.tsx"),l=s("./app/types/index.tsx"),p=s("./app/utils.tsx"),d=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=s("./app/utils/events.tsx"),u=s("./app/utils/useOrganization.tsx"),h=s("./app/utils/useRouter.tsx"),g=s("./app/components/events/interfaces/crashContent/exception/utils.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v={react:"https://docs.sentry.io/platforms/javascript/guides/react/sourcemaps/",electron:"https://docs.sentry.io/platforms/javascript/guides/electron/sourcemaps/",cordova:"https://docs.sentry.io/platforms/javascript/guides/cordova/sourcemaps/","javascript-angularjs":"https://docs.sentry.io/platforms/javascript/guides/angular/sourcemaps/","javascript-angular":"https://docs.sentry.io/platforms/javascript/guides/angular/sourcemaps/","javascript-ember":"https://docs.sentry.io/platforms/javascript/guides/ember/sourcemaps/","javascript-gatsby":"https://docs.sentry.io/platforms/javascript/guides/gatsby/sourcemaps/","javascript-vue":"https://docs.sentry.io/platforms/javascript/guides/vue/sourcemaps/","javascript-nextjs":"https://docs.sentry.io/platforms/javascript/guides/nextjs/sourcemaps/","javascript-remix":"https://docs.sentry.io/platforms/javascript/guides/remix/sourcemaps/","javascript-svelte":"https://docs.sentry.io/platforms/javascript/guides/svelte/sourcemaps/"};function y(e){return!!e&&(e.includes("localhost")||e.includes("127.0.0.1"))}function f(e,t,s){if(!(0,p.ri)(t)||!(0,p.ri)(s))return!1;if(!e.features?.includes("source-maps-cta"))return!1;const r=s?.platform??"other",i=(0,o.PC)(s),a=s?.entries.find((e=>e.type===l.UZ.EXCEPTION)),d=a?.data.values;return!(!i&&!n.H.includes(r)||(0,c.OL)(s)||!a||0===d?.length||d?.every((e=>!e.stacktrace&&!e.rawStacktrace))||d?.every((e=>e.stacktrace?.frames?.every((e=>!e.inApp))))||d?.every((e=>e.stacktrace?.frames?.every((e=>(0,g.U)(e))))))}function b(e){let{event:t}=e;const s=(0,u.Z)(),n=(0,h.Z)().location.query.project,p=t.platform??"other",c=(0,o.PC)(t);if(!f(s,n,t))return null;const g=t.entries?.find((e=>e.type===l.UZ.REQUEST))?.data?.url??t.tags.find((e=>"url"===e.key))?.value,b=c?t.sdk?.name?.substring("sentry.javascript.".length)??"other":p,Z=v[b]??v[p]??"https://docs.sentry.io/platforms/javascript/sourcemaps/";return(0,m.tZ)(r.bZ,{type:"info",showIcon:!0,trailingItems:(0,m.tZ)(i.Z,{href:Z,onClick:()=>{(0,d.Z)("issue_group_details.stack_traces.setup_source_maps_alert.clicked",{organization:s,project_id:n,platform:b})},children:(0,a.t)("Upload Source Maps")}),children:y(g)?(0,a.t)("In production, you might have minified JS code that makes stack traces hard to read. Sentry can un-minify it for you"):(0,a.t)("Sentry can un-minify your code to show you more readable stack traces")})}b.displayName="SetupSourceMapsAlert"},"./app/components/pageAlertBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e4nzktk0"})("display:flex;align-items:center;justify-content:center;color:",(e=>e.theme.headerBackground),";background-color:",(e=>e.theme.bannerBackground),";padding:6px 30px;font-size:14px;")},"./app/components/replays/replayCountBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./app/components/badge.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{count:t}=e;const s=t&&t>50?"50+":t??null;return(0,o.tZ)(r.Z,{text:s})}i.displayName="ReplayCountBadge";const n=i},"./app/components/replays/replaysFeatureBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./app/components/featureBadge.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){return(0,o.tZ)(r.Z,{...e,type:"new"})}i.displayName="ReplaysFeatureBadge";const n=i},"./app/stores/organizationEnvironmentsStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/reflux/src/index.js"),o=s("./app/utils/environment.tsx");const i={state:{environments:null,error:null},init(){this.state={environments:null,error:null}},makeEnvironment:e=>({id:e.id,name:e.name,get displayName(){return(0,o.G)(e)},get urlRoutingName(){return(0,o.z)(e)}}),onFetchEnvironments(){this.state={environments:null,error:null},this.trigger(this.state)},onFetchEnvironmentsSuccess(e){this.state={error:null,environments:e.map(this.makeEnvironment)},this.trigger(this.state)},onFetchEnvironmentsError(e){this.state={error:e,environments:null},this.trigger(this.state)},getState(){return this.state}},n=(0,r.createStore)(i)},"./app/utils/displayReprocessEventAction.tsx":(e,t,s)=>{s.d(t,{B:()=>n}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("./app/types/index.tsx");const o=["cocoa","native"];function i(e){const t=e?.frames??[],s=e?.stacktrace?.frames??[];return t.length||s.length?[...t,...s].map((e=>e.platform)).filter((e=>!!e)):[]}function n(e,t){if(!t||!e.includes("reprocessing-v2"))return!1;const{entries:s}=t,n=s.find((e=>e.type===r.UZ.EXCEPTION));return!!n&&!!(function(e){const{data:t}=e;return(t.values??[]).some((e=>"minidump"===e.mechanism?.type))}(n)||function(e){const{data:t}=e;return(t.values??[]).some((e=>"applecrashreport"===e.mechanism?.type))}(n)||function(e,t){const{platform:s}=e;if(s&&o.includes(s))return!0;const n=function(e,t){const s=(t.data.values??[]).flatMap(i),o=e.entries.find((e=>e.type===r.UZ.STACKTRACE))?.data??{},n=Object.keys(o).flatMap((e=>i(o[e]))),a=(e.entries.find((e=>e.type===r.UZ.THREADS))?.data.values??[]).flatMap((e=>{let{stacktrace:t}=e;return i(t)}));return new Set([...s,...n,...a])}(e,t);return o.some((e=>n.has(e)))}(t,n))}},"./app/utils/environment.tsx":(e,t,s)=>{function r(e){return e.name?encodeURIComponent(e.name):e.displayName?encodeURIComponent(e.displayName):"none"}function o(e){return e.name||e.displayName||"(No Environment)"}s.d(t,{G:()=>o,z:()=>r})},"./app/views/issueDetails/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>bt});var r=s("../node_modules/react/index.js"),o=s("./app/actionCreators/indicator.tsx"),i=s("./app/locale.tsx"),n=s("./app/stores/projectsStore.tsx"),a=s("./app/utils/handleXhrErrorResponse.tsx"),l=s("./app/utils/analytics.tsx"),p=s("./app/utils/useApi.tsx"),d=s("./app/utils/useOrganization.tsx"),c=s("./app/utils/useProjects.tsx"),u=s("./app/utils/withPageFilters.tsx"),h=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),m=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react-router/es/index.js")),v=s("../node_modules/@sentry/core/esm/exports.js"),y=s("../node_modules/@sentry/react/esm/profiler.js"),f=s("../node_modules/prop-types/index.js"),b=s("./app/stores/organizationEnvironmentsStore.tsx"),Z=s("./app/components/events/interfaces/crashContent/exception/setupSourceMapsAlert.tsx"),x=s("./app/components/loadingError.tsx"),E=s("./app/components/loadingIndicator.tsx"),S=s("./app/components/organizations/pageFilters/container.tsx"),I=s("./app/components/projects/missingProjectMembership.tsx"),j=s("./app/components/sentryDocumentTitle.tsx"),w=s("./app/components/tabs/index.tsx"),_=s("./app/sentryTypes.tsx"),k=s("./app/stores/groupStore.tsx"),R=s("./app/styles/space.tsx"),D=s("./app/types/index.tsx"),T=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),C=s("./app/utils/dates.tsx"),A=s("./app/utils/events.tsx"),z=s("./app/utils/projects.tsx"),N=s("./app/utils/recreateRoute.tsx"),O=s("./app/utils/routeAnalytics/withRouteAnalytics.tsx"),B=s("./app/utils/withApi.tsx"),U=s("./app/utils/withDomainRequired.tsx");const P="GROUP_NOT_FOUND",$="MISSING_MEMBERSHIP";var M=s("../node_modules/lodash/omit.js"),G=s.n(M),F=s("./app/components/assistant/guideAnchor.tsx"),q=s("./app/components/badge.tsx"),L=s("./app/components/breadcrumbs.tsx"),V=s("./app/components/count.tsx"),X=s("./app/components/environmentPageFilter.tsx"),H=s("./app/components/eventOrGroupTitle.tsx"),Y=s("./app/components/events/errorLevel.tsx"),Q=s("./app/components/events/eventMessage.tsx"),K=s("./app/components/featureBadge.tsx"),J=s("./app/components/group/inboxBadges/inboxReason.tsx"),W=s("./app/components/group/inboxBadges/unhandledTag.tsx"),ee=s("./app/components/idBadge/projectBadge.tsx"),te=s("./app/components/layouts/thirds.tsx"),se=s("./app/components/links/link.tsx"),re=s("./app/components/replays/replayCountBadge.tsx"),oe=s("./app/components/replays/replaysFeatureBadge.tsx"),ie=s("./app/components/replays/useReplaysCount.tsx"),ne=s("./app/components/shortId.tsx"),ae=s("./app/components/tooltip.tsx"),le=s("./app/icons/index.tsx"),pe=s("./app/utils/issueTypeConfig/index.tsx"),de=s("./app/utils/replays/projectSupportsReplay.tsx"),ce=s("./app/utils/useLocation.tsx"),ue=s("./app/actionCreators/group.tsx"),he=s("./app/actionCreators/modal.tsx"),ge=s("./app/components/acl/feature.tsx"),me=s("./app/components/acl/featureDisabled.tsx"),ve=s("./app/components/actions/button.tsx"),ye=s("./app/components/actions/ignore.tsx"),fe=s("./app/components/actions/resolve.tsx"),be=s("./app/components/button.tsx"),Ze=s("./app/components/dropdownMenu/index.tsx"),xe=s("./app/utils/discover/eventView.tsx"),Ee=s("./app/utils/discover/types.tsx"),Se=s("./app/utils/displayReprocessEventAction.tsx"),Ie=s("./app/utils/guid.tsx"),je=s("./app/utils/withOrganization.tsx"),we=s("./app/components/autoSelectText.tsx"),_e=s("./app/components/switchButton.tsx"),ke=s("./app/stores/useLegacyStore.tsx"),Re=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function De(e){let{Header:t,Body:s,Footer:n,organization:a,projectSlug:l,groupId:d,onToggle:c,closeModal:u}=e;const h=(0,p.Z)({persistInFlight:!0}),[g,m]=(0,r.useState)(!1),v=(0,r.useRef)(null),y=(0,ke.X)(k.Z).find((e=>e.id===d)),f=y?.isPublic,b=(0,r.useCallback)(((e,t)=>{e?.preventDefault(),m(!0),c(),(0,ue.Gv)(h,{orgId:a.slug,projectId:l,itemIds:[d],data:{isPublic:t??!f}},{error:()=>{(0,o.Iw)((0,i.t)("Error sharing"))},complete:()=>{m(!1)}})}),[h,m,c,f,a.slug,l,d]);(0,r.useEffect)((()=>{f||b(null,!0)}),[]);const Z=y?.shareId?function(){const e=`/share/issue/${y.shareId}/`,{host:t,protocol:s}=window.location;return`${s}//${t}${e}`}():null,x=()=>{navigator.clipboard.writeText(Z).then((()=>{(0,o.S9)((0,i.t)("Copied to clipboard"))})).catch((()=>{(0,o.Iw)((0,i.t)("Error copying to clipboard"))}))};return(0,Re.BX)(r.Fragment,{children:[(0,Re.tZ)(t,{closeButton:!0,children:(0,Re.tZ)("h4",{children:(0,i.t)("Share Issue")})}),(0,Re.tZ)(s,{children:(0,Re.BX)(Ce,{children:[(0,Re.BX)(Ae,{children:[(0,Re.BX)("div",{children:[(0,Re.tZ)(ze,{children:(0,i.t)("Create a public link")}),(0,Re.tZ)(Ne,{children:(0,i.t)("Share a link with anyone outside your organization")})]}),(0,Re.tZ)(_e.Z,{"aria-label":f?(0,i.t)("Unshare"):(0,i.t)("Share"),isActive:f,size:"lg",toggle:b})]}),(!y||g)&&(0,Re.tZ)(Oe,{children:(0,Re.tZ)(E.Z,{mini:!0})}),y&&!g&&f&&Z&&(0,Re.BX)(Be,{children:[(0,Re.tZ)(Pe,{children:(0,Re.tZ)(Ue,{ref:v,children:Z})}),(0,Re.tZ)($e,{title:(0,i.t)("Copy to clipboard"),borderless:!0,size:"sm",onClick:()=>{v.current?.selectText(),x()},icon:(0,Re.tZ)(le.vU,{}),"aria-label":(0,i.t)("Copy to clipboard")}),(0,Re.tZ)(Me,{title:(0,i.t)("Generate new URL. Invalidates previous URL"),"aria-label":(0,i.t)("Generate new URL"),borderless:!0,size:"sm",icon:(0,Re.tZ)(le.tr,{}),onClick:()=>b(null,!0)})]})]})}),(0,Re.tZ)(n,{children:!g&&f&&Z?(0,Re.tZ)(be.zx,{priority:"primary",onClick:()=>{x(),u()},children:(0,i.t)("Copy Link")}):(0,Re.tZ)(be.zx,{priority:"primary",onClick:()=>{u()},children:(0,i.t)("Close")})})]})}De.displayName="ShareIssueModal";const Te=De,Ce=(0,g.Z)("div",{target:"e1w9vv749"})("display:flex;gap:",(0,R.D)(2),";flex-direction:column;min-height:100px;"),Ae=(0,g.Z)("div",{target:"e1w9vv748"})("display:flex;justify-content:space-between;align-items:center;gap:",(0,R.D)(2),";"),ze=(0,g.Z)("div",{target:"e1w9vv747"})("padding-right:",(0,R.D)(4),";white-space:nowrap;"),Ne=(0,g.Z)("p",{target:"e1w9vv746"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeSmall),";"),Oe=(0,g.Z)("div",{target:"e1w9vv745"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),Be=(0,g.Z)("div",{target:"e1w9vv744"})("display:flex;align-items:stretch;border:1px solid ",(e=>e.theme.border),";border-radius:",(0,R.D)(.5),";"),Ue=(0,g.Z)(we.Z,{target:"e1w9vv743"})("padding:",(0,R.D)(1)," ",(0,R.D)(1),";",(e=>e.theme.overflowEllipsis),";"),Pe=(0,g.Z)("div",{target:"e1w9vv742"})("position:relative;display:flex;flex-grow:1;background-color:transparent;border-right:1px solid ",(e=>e.theme.border),";min-width:0;"),$e=(0,g.Z)(be.zx,{target:"e1w9vv741"})("border-radius:0;border-right:1px solid ",(e=>e.theme.border),";height:100%;flex-shrink:0;&:hover{border-right:1px solid ",(e=>e.theme.border),";}"),Me=(0,g.Z)(be.zx,{target:"e1w9vv740"})({name:"vdwx3d",styles:"height:100%;flex-shrink:0"});var Ge=s("./app/views/issueDetails/utils.tsx");function Fe(e){let{className:t,disabled:s,group:r,icon:o,onClick:n,disablePriority:a,size:l="xs"}=e;const p=r.subscriptionDetails?.disabled??!1;return(0,Re.tZ)(ve.Z,{className:t,disabled:s||p,title:(0,Ge.sC)(r),tooltipProps:{delay:300},priority:!a&&r.isSubscribed?"primary":"default",size:l,"aria-label":(0,i.t)("Subscribe"),onClick:n,icon:o??(0,Re.tZ)(le.lJ,{size:l})})}Fe.displayName="SubscribeAction";const qe=Fe;class Le extends r.Component{constructor(){super(...arguments),(0,h.Z)(this,"onDelete",(()=>{const{group:e,project:t,organization:s,api:r}=this.props;(0,o.E3)((0,i.t)("Delete event…")),(0,ue.MU)(r,{orgId:s.slug,projectId:t.slug,itemIds:[e.id]},{complete:()=>{(0,o.B8)(),m.browserHistory.push((0,U.D)({pathname:`/organizations/${s.slug}/issues/`,query:{project:t.id}}))}}),this.trackIssueAction("deleted")})),(0,h.Z)(this,"onUpdate",(e=>{const{group:t,project:s,organization:r,api:n}=this.props;(0,o.E3)((0,i.t)("Saving changes…")),(0,ue.Gv)(n,{orgId:r.slug,projectId:s.slug,itemIds:[t.id],data:e},{complete:o.B8}),e.status&&this.trackIssueAction(e.status),void 0!==e.inbox&&this.trackIssueAction("mark_reviewed")})),(0,h.Z)(this,"onReprocessEvent",(()=>{const{group:e,organization:t}=this.props;(0,he.openReprocessEventModal)({organization:t,groupId:e.id})})),(0,h.Z)(this,"onToggleShare",(()=>{!this.props.group.isPublic&&(0,T.Z)("issue.shared_publicly",{organization:this.props.organization}),this.trackIssueAction("shared")})),(0,h.Z)(this,"onToggleBookmark",(()=>{this.onUpdate({isBookmarked:!this.props.group.isBookmarked}),this.trackIssueAction("bookmarked")})),(0,h.Z)(this,"onToggleSubscribe",(()=>{this.onUpdate({isSubscribed:!this.props.group.isSubscribed}),this.trackIssueAction("subscribed")})),(0,h.Z)(this,"onDiscard",(()=>{const{group:e,project:t,organization:s,api:r}=this.props,n=(0,Ie.E)();(0,o.E3)((0,i.t)("Discarding event…")),k.Z.onDiscard(n,e.id),r.request(`/issues/${e.id}/`,{method:"PUT",data:{discard:!0},success:r=>{k.Z.onDiscardSuccess(n,e.id,r),m.browserHistory.push((0,U.D)({pathname:`/organizations/${s.slug}/issues/`,query:{project:t.id}}))},error:t=>{k.Z.onDiscardError(n,e.id,t)},complete:o.B8}),this.trackIssueAction("discarded")})),(0,h.Z)(this,"renderDiscardModal",(e=>{let{Body:t,Footer:s,closeModal:o}=e;const{organization:n,project:a}=this.props;return(0,Re.tZ)(ge.Z,{features:["projects:discard-groups"],hookName:"feature-disabled:discard-groups",organization:n,project:a,renderDisabled:function(e){let{children:t,...s}=e;return t({...s,renderDisabled:e=>{let{features:t}=e;return(0,Re.tZ)(me.Z,{alert:!0,featureName:(0,i.t)("Discard and Delete"),features:t})}})},children:e=>{let{hasFeature:n,renderDisabled:a,...l}=e;return(0,Re.BX)(r.Fragment,{children:[(0,Re.BX)(t,{children:[!n&&"function"==typeof a&&a({...l,hasFeature:n,children:null}),(0,i.t)("Discarding this event will result in the deletion of most data associated with this issue and future events being discarded before reaching your stream. Are you sure you wish to continue?")]}),(0,Re.BX)(s,{children:[(0,Re.tZ)(be.zx,{onClick:o,children:(0,i.t)("Cancel")}),(0,Re.tZ)(be.zx,{style:{marginLeft:(0,R.D)(1)},priority:"primary",onClick:this.onDiscard,disabled:!n,children:(0,i.t)("Discard Future Events")})]})]})}})})),(0,h.Z)(this,"openDeleteModal",(()=>(0,he.openModal)((e=>{let{Body:t,Footer:s,closeModal:o}=e;return(0,Re.BX)(r.Fragment,{children:[(0,Re.tZ)(t,{children:(0,i.t)("Deleting this issue is permanent. Are you sure you wish to continue?")}),(0,Re.BX)(s,{children:[(0,Re.tZ)(be.zx,{onClick:o,children:(0,i.t)("Cancel")}),(0,Re.tZ)(be.zx,{style:{marginLeft:(0,R.D)(1)},priority:"primary",onClick:this.onDelete,children:(0,i.t)("Delete")})]})]})})))),(0,h.Z)(this,"openDiscardModal",(()=>{const{organization:e}=this.props;(0,he.openModal)(this.renderDiscardModal),(0,l.co)("feature.discard_group.modal_opened",{org_id:parseInt(e.id,10)})})),(0,h.Z)(this,"openShareModal",(()=>{const{group:e,organization:t}=this.props;(0,he.openModal)((s=>(0,Re.tZ)(Te,{...s,organization:t,projectSlug:e.project.slug,groupId:e.id,onToggle:this.onToggleShare})))}))}getShareUrl(e){if(!e)return"";const t=`/share/issue/${e}/`,{host:s,protocol:r}=window.location;return`${r}//${s}${t}`}getDiscoverUrl(){const{group:e,project:t,organization:s}=this.props,{title:r,type:o,shortId:i}=e,n=(0,pe.Y)(e),a={id:void 0,name:r||o,fields:["title","release","environment","user.display","timestamp"],orderby:"-timestamp",query:`issue:${i}`,projects:[Number(t.id)],version:2,range:"90d",dataset:n.usesIssuePlatform?Ee.as.ISSUE_PLATFORM:void 0};return xe.ZP.fromSavedQuery(a).getResultsViewUrlTarget(s.slug)}trackIssueAction(e){const{group:t,project:s,organization:r,query:o={}}=this.props,{alert_date:i,alert_rule_id:n,alert_type:a}=o;(0,T.Z)("issue_details.action_clicked",{organization:r,project_id:parseInt(s.id,10),action_type:e,alert_date:"string"==typeof i?(0,C.v5)(Number(i)):void 0,alert_rule_id:"string"==typeof n?n:void 0,alert_type:"string"==typeof a?a:void 0,...(0,A.Sq)(t)})}handleClick(e,t){return function(s){if(e)return s.preventDefault(),void s.stopPropagation();t(s)}}render(){const{group:e,project:t,organization:s,disabled:o,event:n}=this.props,{status:a,isBookmarked:l}=e,p=new Set(s.features),d=l?"unbookmark":"bookmark",c=l?(0,i.t)("Remove bookmark"):(0,i.t)("Bookmark"),u=!!t.features?.includes("releases"),h="resolved"===a,g="resolved"===e.status?e.statusDetails.autoResolved:void 0,m="ignored"===a,{delete:v,deleteAndDiscard:y,share:f}=(0,pe.Y)(e).actions,b=s.access.includes("event:admin"),{dropdownItems:Z,onIgnore:x}=(0,ye.c)({onUpdate:this.onUpdate});return(0,Re.BX)(Ve,{children:[(0,Re.tZ)(Ze.h,{triggerProps:{"aria-label":(0,i.t)("More Actions"),icon:(0,Re.tZ)(le.YR,{size:"xs"}),showChevron:!1,size:"sm"},items:[...m?[]:[{key:"ignore",className:"hidden-sm hidden-md hidden-lg",label:(0,i.t)("Ignore"),isSubmenu:!0,disabled:o,children:[{key:"ignore-now",label:(0,i.t)("Ignore Issue"),onAction:()=>x()},...Z]}],{key:"open-in-discover",className:"hidden-sm hidden-md hidden-lg",label:(0,i.t)("Open in Discover"),to:o?"":this.getDiscoverUrl(),onAction:()=>this.trackIssueAction("open_in_discover")},{key:e.isSubscribed?"unsubscribe":"subscribe",className:"hidden-sm hidden-md hidden-lg",label:e.isSubscribed?(0,i.t)("Unsubscribe"):(0,i.t)("Subscribe"),disabled:o||e.subscriptionDetails?.disabled,onAction:this.onToggleSubscribe},{key:"mark-review",label:(0,i.t)("Mark reviewed"),disabled:!e.inbox||o,details:!e.inbox||o?(0,i.t)("Issue has been reviewed"):void 0,onAction:()=>this.onUpdate({inbox:!1})},{key:"share",label:(0,i.t)("Share"),disabled:o||!f.enabled,hidden:!p.has("shared-issues"),onAction:this.openShareModal},{key:d,label:c,onAction:this.onToggleBookmark},{key:"reprocess",label:(0,i.t)("Reprocess events"),hidden:!(0,Se.B)(s.features,n),onAction:this.onReprocessEvent},{key:"delete-issue",priority:"danger",label:(0,i.t)("Delete"),hidden:!b,disabled:!v.enabled,details:v.disabledReason,onAction:this.openDeleteModal},{key:"delete-and-discard",priority:"danger",label:(0,i.t)("Delete and discard future events"),hidden:!b,disabled:!y.enabled,details:y.disabledReason,onAction:this.openDiscardModal}]}),(0,Re.tZ)(qe,{className:"hidden-xs",disabled:o,disablePriority:!0,group:e,onClick:this.handleClick(o,this.onToggleSubscribe),icon:e.isSubscribed?(0,Re.tZ)(le.lJ,{}):(0,Re.tZ)(le.mA,{}),size:"sm"}),(0,Re.tZ)("div",{className:"hidden-xs",children:(0,Re.tZ)(X.Z,{alignDropdown:"right",size:"sm"})}),(0,Re.tZ)(ge.Z,{hookName:"feature-disabled:open-in-discover",features:["discover-basic"],organization:s,children:(0,Re.tZ)(ve.Z,{className:"hidden-xs",disabled:o,to:o?"":this.getDiscoverUrl(),onClick:()=>this.trackIssueAction("open_in_discover"),size:"sm",children:(0,Re.tZ)(F.Z,{target:"open_in_discover",children:(0,i.t)("Open in Discover")})})}),h||m?(0,Re.tZ)(ve.Z,{priority:"primary",title:g?(0,i.t)("This event is resolved due to the Auto Resolve configuration for this project"):(0,i.t)("Change status to unresolved"),size:"sm",icon:h?(0,Re.tZ)(le.DL,{}):(0,Re.tZ)(le.i1,{}),disabled:o||g,onClick:()=>this.onUpdate({status:D.d7.UNRESOLVED,statusDetails:{}}),children:m?(0,i.t)("Ignored"):(0,i.t)("Resolved")}):(0,Re.BX)(r.Fragment,{children:[(0,Re.tZ)(F.Z,{target:"ignore_delete_discard",position:"bottom",offset:20,children:(0,Re.tZ)(ye.Z,{className:"hidden-xs",isIgnored:m,onUpdate:this.onUpdate,disabled:o,size:"sm",hideIcon:!0,disableTooltip:!0})}),(0,Re.tZ)(F.Z,{target:"resolve",position:"bottom",offset:20,children:(0,Re.tZ)(fe.Z,{disableTooltip:!0,disabled:o,disableDropdown:o,hasRelease:u,latestRelease:t.latestRelease,onUpdate:this.onUpdate,orgSlug:s.slug,projectSlug:t.slug,isResolved:h,isAutoResolved:g,size:"sm",hideIcon:!0,priority:"primary"})})]})]})}}Le.displayName="Actions";const Ve=(0,g.Z)("div",{target:"e1muhq5a0"})("display:flex;align-items:center;gap:",(0,R.D)(.5),";"),Xe=(0,B.Z)((0,je.Z)(Le));var He=s("./app/views/issueDetails/types.tsx"),Ye=s("./app/views/issueDetails/unhandledTag.tsx");function Qe(e){let{baseUrl:t,disabledTabs:s,eventRoute:o,group:n,project:a}=e;const l=(0,d.Z)(),p=(0,r.useMemo)((()=>a.id?[Number(a.id)]:[]),[a.id]),c=(0,ie.Z)({groupIds:n.id,organization:l,projectIds:p})[n.id],u=new Set(a?a.features:[]),h=new Set(l?l.features:[]),g=h.has("grouping-tree-ui"),m=u.has("similarity-view"),v=h.has("event-attachments"),y=h.has("session-replay")&&(0,de.Z)(a),f=(0,pe.Y)(n);return(0,Re.BX)(pt,{hideBorder:!0,children:[(0,Re.tZ)(w.td.Item,{disabled:s.includes(He.O.DETAILS),to:`${t}${location.search}`,children:(0,i.t)("Details")},He.O.DETAILS),(0,Re.BX)(w.td.Item,{textValue:(0,i.t)("Activity"),disabled:s.includes(He.O.ACTIVITY),to:`${t}activity/${location.search}`,children:[(0,i.t)("Activity"),(0,Re.BX)(lt,{children:[n.numComments,(0,Re.tZ)(le.f7,{size:"xs"})]})]},He.O.ACTIVITY),(0,Re.BX)(w.td.Item,{textValue:(0,i.t)("User Feedback"),hidden:!f.userFeedback.enabled,disabled:s.includes(He.O.USER_FEEDBACK),to:`${t}feedback/${location.search}`,children:[(0,i.t)("User Feedback")," ",(0,Re.tZ)(q.Z,{text:n.userReportCount})]},He.O.USER_FEEDBACK),(0,Re.tZ)(w.td.Item,{hidden:!v||!f.attachments.enabled,disabled:s.includes(He.O.ATTACHMENTS),to:`${t}attachments/${location.search}`,children:(0,i.t)("Attachments")},He.O.ATTACHMENTS),(0,Re.tZ)(w.td.Item,{disabled:s.includes(He.O.TAGS),to:`${t}tags/${location.search}`,children:(0,i.t)("Tags")},He.O.TAGS),(0,Re.tZ)(w.td.Item,{disabled:s.includes(He.O.EVENTS),to:o,children:(0,i.t)("All Events")},He.O.EVENTS),(0,Re.tZ)(w.td.Item,{hidden:!f.mergedIssues.enabled,disabled:s.includes(He.O.MERGED),to:`${t}merged/${location.search}`,children:(0,i.t)("Merged Issues")},He.O.MERGED),(0,Re.tZ)(w.td.Item,{hidden:!g||!f.grouping.enabled,disabled:s.includes(He.O.GROUPING),to:`${t}grouping/${location.search}`,children:(0,i.t)("Grouping")},He.O.GROUPING),(0,Re.tZ)(w.td.Item,{hidden:!m||!f.similarIssues.enabled,disabled:s.includes(He.O.SIMILAR_ISSUES),to:`${t}similar/${location.search}`,children:(0,i.t)("Similar Issues")},He.O.SIMILAR_ISSUES),(0,Re.BX)(w.td.Item,{textValue:(0,i.t)("Replays"),hidden:!y||!f.replays.enabled,to:`${t}replays/${location.search}`,children:[(0,i.t)("Replays"),(0,Re.tZ)(re.Z,{count:c}),(0,Re.tZ)(oe.Z,{noTooltip:!0})]},He.O.REPLAYS)]})}function Ke(e){let{baseUrl:t,group:s,groupReprocessingStatus:o,organization:n,event:a,project:l}=e;const p=(0,ce.T)(),d=(0,r.useMemo)((()=>n.features.includes("reprocessing-v2")?o===Ge.m7.REPROCESSING?[He.O.ACTIVITY,He.O.USER_FEEDBACK,He.O.ATTACHMENTS,He.O.EVENTS,He.O.MERGED,He.O.GROUPING,He.O.SIMILAR_ISSUES,He.O.TAGS]:o===Ge.m7.REPROCESSED_AND_HASNT_EVENT?[He.O.DETAILS,He.O.ATTACHMENTS,He.O.EVENTS,He.O.MERGED,He.O.GROUPING,He.O.SIMILAR_ISSUES,He.O.TAGS,He.O.USER_FEEDBACK]:[]:[]),[n,o]),c=(0,r.useMemo)((()=>{const e=G()(p.query,"query");return{pathname:`${t}events/`,query:e}}),[p,t]),{userCount:u}=s;let h="group-detail";s.hasSeen&&(h+=" hasSeen"),"resolved"===s.status&&(h+=" isResolved");const g=(0,A.FC)(s),m=!!d.length,v=s.shortId&&(0,Re.tZ)(F.Z,{target:"issue_number",position:"bottom",children:(0,Re.BX)(et,{children:[(0,Re.tZ)(ee.Z,{project:l,avatarSize:16,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:l.slug}}),(0,Re.tZ)(ae.u,{className:"help-link",title:(0,i.t)("This identifier is unique across your organization, and can be used to reference an issue in various places, like commit messages."),position:"bottom",children:(0,Re.tZ)(tt,{shortId:s.shortId})}),s.issueType===D.EM.PERFORMANCE_CONSECUTIVE_DB_QUERIES&&(0,Re.tZ)(K.Z,{type:"alpha",title:(0,i.t)("Consecutive HTTP Performance Issues are in active development and may change")}),s.issueType===D.EM.PERFORMANCE_SLOW_DB_QUERY&&(0,Re.tZ)(K.Z,{type:"alpha",title:(0,i.t)("Slow DB Query Performance Issues are in active development and may change")}),s.issueType===D.EM.PERFORMANCE_CONSECUTIVE_DB_QUERIES&&(0,Re.tZ)(K.Z,{type:"beta",title:(0,i.t)("Consecutive DB Query Performance Issues are in active development and may change")}),s.issueType===D.EM.PERFORMANCE_RENDER_BLOCKING_ASSET&&(0,Re.tZ)(K.Z,{type:"alpha",title:(0,i.t)("Large Render Blocking Asset Performance Issues are in active development and may change")})]})});return(0,Re.tZ)(te.h4,{children:(0,Re.BX)("div",{className:h,children:[(0,Re.BX)(We,{children:[(0,Re.tZ)(L.Z,{crumbs:[{label:"Issues",to:`/organizations/${n.slug}/issues/${p.search}`},{label:v}]}),(0,Re.tZ)(Xe,{group:s,project:l,disabled:m,event:a,query:p.query})]}),(0,Re.BX)(st,{children:[(0,Re.BX)(rt,{children:[(0,Re.BX)(ot,{children:[(0,Re.tZ)("h3",{children:(0,Re.tZ)(it,{hasGuideAnchor:!0,data:s})}),s.inbox&&(0,Re.tZ)(J.Z,{inbox:s.inbox,fontSize:"md"})]}),(0,Re.BX)(at,{children:[s.level&&(0,Re.tZ)(Y.Z,{level:s.level,size:"11px"}),s.isUnhandled&&(0,Re.tZ)(W.Z,{}),(0,Re.tZ)(Q.Z,{message:g})]})]}),(0,Re.BX)(nt,{children:[(0,Re.BX)("div",{className:"count",children:[(0,Re.tZ)("h6",{className:"nav-header",children:(0,i.t)("Events")}),(0,Re.tZ)(se.Z,{disabled:m,to:c,children:(0,Re.tZ)(V.Z,{className:"count",value:s.count})})]}),(0,Re.BX)("div",{className:"count",children:[(0,Re.tZ)("h6",{className:"nav-header",children:(0,i.t)("Users")}),0!==u?(0,Re.tZ)(se.Z,{disabled:m,to:`${t}tags/user/${p.search}`,children:(0,Re.tZ)(V.Z,{className:"count",value:u})}):(0,Re.tZ)("span",{children:"0"})]})]})]}),(0,Re.tZ)(st,{className:"hidden-sm hidden-md hidden-lg",children:(0,Re.tZ)(X.Z,{alignDropdown:"right"})}),(0,Re.tZ)(Qe,{baseUrl:t,disabledTabs:d,eventRoute:c,group:s,project:l})]})})}Qe.displayName="GroupHeaderTabs",Ke.displayName="GroupHeader";const Je=Ke,We=(0,g.Z)("div",{target:"ez9r7o610"})("display:flex;flex-direction:row;justify-content:space-between;gap:",(0,R.D)(1),";align-items:center;"),et=(0,g.Z)("div",{target:"ez9r7o69"})("display:flex;gap:",(0,R.D)(1),";align-items:center;"),tt=(0,g.Z)(ne.Z,{target:"ez9r7o68"})("font-family:",(e=>e.theme.text.family),";font-size:",(e=>e.theme.fontSizeMedium),";line-height:1;"),st=(0,g.Z)("div",{target:"ez9r7o67"})("display:flex;gap:",(0,R.D)(2),";justify-content:space-between;margin-top:",(0,R.D)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){flex-direction:column;}"),rt=(0,g.Z)("div",{target:"ez9r7o66"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){max-width:65%;}"),ot=(0,g.Z)("div",{target:"ez9r7o65"})("display:flex;line-height:2;gap:",(0,R.D)(1),";"),it=(0,g.Z)(H.Z,{target:"ez9r7o64"})({name:"870gjp",styles:"font-size:inherit"}),nt=(0,g.Z)("div",{target:"ez9r7o63"})("display:grid;grid-template-columns:repeat(2, min-content);gap:calc(",(0,R.D)(3)," + ",(0,R.D)(3),");@media (min-width: ",(e=>e.theme.breakpoints.small),"){justify-content:flex-end;}"),at=(0,g.Z)(Ye.S,{target:"ez9r7o62"})("display:flex;gap:",(0,R.D)(1),";justify-content:flex-start;line-height:1.2;"),lt=(0,g.Z)(q.Z,{target:"ez9r7o61"})("display:flex;align-items:center;gap:",(0,R.D)(.5),";"),pt=(0,g.Z)(w.td,{target:"ez9r7o60"})("margin-top:",(0,R.D)(2),";");var dt=s("./app/components/pageAlertBar.tsx");function ct(e){let{organization:t,project:s}=e;return(0,Re.BX)(dt.Z,{children:[(0,Re.tZ)(le.Db,{}),(0,Re.tZ)(ht,{children:(0,i.t)("You are viewing a sample error. Configure Sentry to start viewing real errors.")}),(0,Re.tZ)(be.zx,{size:"xs",priority:"primary",to:`/${t.slug}/${s.slug}/getting-started/${s.platform||""}`,onClick:()=>(0,T.Z)("growth.sample_error_onboarding_link_clicked",{project_id:s.id?.toString(),organization:t,platform:s.platform}),children:(0,i.t)("Get Started")})]})}ct.displayName="SampleEventAlert";const ut=ct,ht=(0,g.Z)("span",{target:"egvxlkr0"})("margin:0 ",(0,R.D)(1),";");class gt extends r.Component{constructor(){super(...arguments),(0,h.Z)(this,"state",this.initialState),(0,h.Z)(this,"refetchInterval",null),(0,h.Z)(this,"remountComponent",(()=>{this.setState(this.initialState),this.fetchData()})),(0,h.Z)(this,"refetchGroup",(async()=>{const{loadingGroup:e,loading:t,loadingEvent:s,group:r}=this.state;if(r?.status!==Ge.m7.REPROCESSING||e||t||s)return;const{api:o}=this.props;this.setState({loadingGroup:!0});try{const e=await o.requestPromise(this.groupDetailsEndpoint,{query:this.getGroupQuery()}),t=this.getReprocessingNewRoute(e);if(t)return void m.browserHistory.push(t);this.setState({group:e,loadingGroup:!1})}catch(e){this.handleRequestError(e)}})),(0,h.Z)(this,"listener",k.Z.listen((e=>this.onGroupChange(e)),void 0))}getChildContext(){return{group:this.state.group,location:this.props.location}}componentDidMount(){this.fetchData(this.canLoadEventEarly(this.props)),this.updateReprocessingProgress(),async function(e,t){b.Z.onFetchEnvironments();try{const s=await e.requestPromise(`/organizations/${t}/environments/`);if(!s)return void b.Z.onFetchEnvironmentsError(new Error("retrieved environments is falsey"));b.Z.onFetchEnvironmentsSuccess(s)}catch(e){b.Z.onFetchEnvironmentsError(e)}}(this.props.api,this.props.organization.slug)}componentDidUpdate(e,t){const s=e.isGlobalSelectionReady!==this.props.isGlobalSelectionReady;(s||e.location.pathname!==this.props.location.pathname)&&this.fetchData(s&&this.canLoadEventEarly(this.props)),(!this.canLoadEventEarly(e)&&!t?.group&&this.state.group||e.params?.eventId!==this.props.params?.eventId&&this.state.group)&&this.getEvent(this.state.group).then((()=>{if(!this.state.group?.project)return;const e=this.props.projects.find((e=>e.id===this.state.group?.project.id));e&&this.trackView(e)}))}componentWillUnmount(){k.Z.reset(),this.listener?.(),this.refetchInterval&&window.clearInterval(this.refetchInterval)}get initialState(){return{group:null,loading:!0,loadingEvent:!0,loadingGroup:!0,error:!1,eventError:!1,errorType:null,project:null}}trackView(e){const{group:t,event:s}=this.state,{location:r,organization:o,router:i}=this.props,{alert_date:n,alert_rule_id:a,alert_type:l,ref_fallback:p}=r.query;this.props.setEventNames("issue_details.viewed","Issue Details: Viewed"),this.props.setRouteAnalyticsParams({...(0,A.Sq)(t),...(0,A.T7)(s),...(0,z.p)(e),alert_date:"string"==typeof n?(0,C.v5)(Number(n)):void 0,alert_rule_id:"string"==typeof a?a:void 0,alert_type:"string"==typeof l?l:void 0,has_setup_source_maps_alert:(0,Z.I)(o,i.location.query.project,s),ref_fallback:p,stacktrace_link_viewed:!1})}canLoadEventEarly(e){return!e.params.eventId||["oldest","latest"].includes(e.params.eventId)}get groupDetailsEndpoint(){return`/issues/${this.props.params.groupId}/`}get groupReleaseEndpoint(){return`/issues/${this.props.params.groupId}/first-last-release/`}async getEvent(e){e&&this.setState({loadingEvent:!0,eventError:!1});const{params:t,environments:s,api:r,organization:o}=this.props,i=o.slug,n=t.groupId,a=t.eventId??"latest",l=e?.project?.slug;try{const e=await(0,Ge.MN)(r,i,n,a,s,l);this.setState({event:e,loading:!1,eventError:!1,loadingEvent:!1})}catch(e){v.Tb(e),this.setState({eventError:!0,loading:!1,loadingEvent:!1})}}getCurrentTab(){const{router:e,routes:t}=this.props,s=t[t.length-1];return e.params.tagKey?He.O.TAGS:Object.values(He.O).find((e=>s.path===He.h[e]))??He.O.DETAILS}getCurrentRouteInfo(e){const{organization:t,params:s}=this.props,{event:r}=this.state,o=this.getCurrentTab();return{baseUrl:(0,U.D)(`/organizations/${t.slug}/issues/${e.id}/${s.eventId&&r?`events/${r.id}/`:""}`),currentTab:o}}updateReprocessingProgress(){this.hasReprocessingV2Feature()&&(this.refetchInterval&&window.clearInterval(this.refetchInterval),this.refetchInterval=window.setInterval(this.refetchGroup,3e4))}hasReprocessingV2Feature(){const{organization:e}=this.props;return e.features?.includes("reprocessing-v2")}getReprocessingNewRoute(e){const{routes:t,location:s,params:r}=this.props,{groupId:o}=r,{id:i}=e,n=this.hasReprocessingV2Feature(),a=(0,Ge.M3)(e),{currentTab:l,baseUrl:p}=this.getCurrentRouteInfo(e);if(o!==i)return n&&a===Ge.m7.REPROCESSED_AND_HASNT_EVENT&&l!==He.O.ACTIVITY?{pathname:`${p}${He.O.ACTIVITY}/`,query:{...r,groupId:i}}:(0,N.Z)("",{routes:t,location:s,params:{...r,groupId:i}});if(n){if(a===Ge.m7.REPROCESSING&&l!==He.O.DETAILS)return{pathname:p,query:r};if(a===Ge.m7.REPROCESSED_AND_HASNT_EVENT&&l!==He.O.ACTIVITY&&l!==He.O.USER_FEEDBACK)return{pathname:`${p}${He.O.ACTIVITY}/`,query:r}}}getGroupQuery(){const{environments:e}=this.props;return{...e?{environment:e}:{},expand:["inbox","owners"],collapse:"release"}}getFetchDataRequestErrorType(e){return e?404===e?P:403===e?$:null:null}handleRequestError(e){v.Tb(e);const t=this.getFetchDataRequestErrorType(e?.status);this.setState({loadingGroup:!1,loading:!1,error:!0,errorType:t})}async fetchGroupReleases(){const{api:e}=this.props,t=await e.requestPromise(this.groupReleaseEndpoint);k.Z.onPopulateReleases(this.props.params.groupId,t)}async fetchData(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{api:t,isGlobalSelectionReady:s,organization:r,params:o}=this.props;if(s)try{const s=this.canLoadEventEarly(this.props)?this.getEvent():void 0,i=await t.requestPromise(this.groupDetailsEndpoint,{query:this.getGroupQuery()}),[n]=await Promise.all([i,s]),a=this.fetchGroupReleases(),l=this.getReprocessingNewRoute(n);if(l)return void m.browserHistory.push(l);const p=this.props.projects.find((e=>e.id===n.project.id));if(p){(0,Ge.V7)(t,r.slug,p.slug,o.groupId);const e={...this.props.location};void 0===e.query.project&&void 0===e.query._allp&&(e.query={...e.query,project:p.id}),delete e.query._allp,m.browserHistory.replace(e)}else v.$e((e=>{const t=this.props.projects.map((e=>e.id));e.setContext("missingProject",{projectId:n.project.id,availableProjects:t}),v.Tb(new Error("Project not found"))}));this.setState({project:p||n.project,loadingGroup:!1}),k.Z.loadInitialData([n]),e&&a.then((()=>p&&this.trackView(p)))}catch(e){this.handleRequestError(e)}}onGroupChange(e){const t=this.props.params.groupId;if(e.has(t)){const e=k.Z.get(t);if(e){if(e.stale)return void this.fetchData();this.setState({group:e})}}}getTitle(){const{organization:e}=this.props,{group:t}=this.state,s="Sentry";if(!t)return s;const{title:r}=(0,A.YQ)(t,e?.features),o=(0,A.FC)(t),{project:i}=t,n=`${e.slug} - ${i.slug}`;return r&&o?`${r}: ${o} - ${n}`:`${r||o||s} - ${n}`}tabClickAnalyticsEvent(e){const{organization:t}=this.props,{project:s,group:r,event:o}=this.state;if(!s||!r)return;if((0,T.Z)("issue_details.tab_changed",{organization:t,project_id:parseInt(s.id,10),tab:e,...(0,A.Sq)(r)}),r.issueCategory!==D.qE.ERROR)return;const i=o?o.tags.filter((e=>{let{key:t}=e;return["device","os","browser"].includes(t)})).reduce(((e,t)=>{let{key:s,value:r}=t;return e[s]=r,e}),{}):{};(0,T.Z)("issue_group_details.tab.clicked",{organization:t,tab:e,platform:s.platform,...i})}renderError(){const{projects:e,location:t}=this.props,s=t.query.project,r=e.find((e=>e.id===s));switch(this.state.errorType){case P:return(0,Re.tZ)(vt,{message:(0,i.t)("The issue you were looking for was not found.")});case $:return(0,Re.tZ)(I.Z,{organization:this.props.organization,project:r});default:return(0,Re.tZ)(vt,{onRetry:this.remountComponent})}}renderContent(e,t){const{children:s,environments:o,organization:i,router:n}=this.props,{loadingEvent:a,eventError:l,event:p}=this.state,{currentTab:d,baseUrl:c}=this.getCurrentRouteInfo(t),u=(0,Ge.M3)(t);let h={environments:o,group:t,project:e};if(d===He.O.DETAILS)if(t.id===p?.groupID||l)h={...h,event:p,loadingEvent:a,eventError:l,groupReprocessingStatus:u,onRetry:()=>this.remountComponent()};else{const e=`/organizations/${i.slug}/issues/${p?.groupID}/events/${p?.id}/`;n.push((0,U.D)(e))}return d===He.O.TAGS&&(h={...h,event:p,baseUrl:c}),(0,Re.BX)(w.mQ,{value:d,onChange:e=>this.tabClickAnalyticsEvent(e),children:[(0,Re.tZ)(Je,{organization:i,groupReprocessingStatus:u,event:p,group:t,baseUrl:c,project:e}),(0,Re.tZ)(yt,{children:(0,Re.tZ)(w.nP.Item,{children:(0,r.isValidElement)(s)?(0,r.cloneElement)(s,h):s},d)})]})}renderPageContent(){const{error:e,group:t,project:s,loading:r}=this.state;if(r||!t&&!e)return(0,Re.tZ)(E.Z,{});if(e)return this.renderError();const{organization:o}=this.props;return(0,Re.tZ)(z.Z,{orgId:o.slug,slugs:[s?.slug??""],"data-test-id":"group-projects-container",children:e=>{let{projects:r,initiallyLoaded:o,fetchError:n}=e;return o?n?(0,Re.tZ)(vt,{message:(0,i.t)("Error loading the specified project")}):this.renderContent((s?.slug?r.find((e=>{let{slug:t}=e;return t===s?.slug})):void 0)??r[0],t):(0,Re.tZ)(E.Z,{})}})}render(){const{project:e,group:t}=this.state,{organization:s}=this.props,o=t?.tags?.some((e=>"sample_event"===e.key));return(0,Re.BX)(r.Fragment,{children:[o&&e&&(0,Re.tZ)(ut,{project:e,organization:s}),(0,Re.tZ)(j.Z,{noSuffix:!0,title:this.getTitle(),children:(0,Re.tZ)(S.Z,{skipLoadLastUsed:!0,forceProject:e,shouldForceProject:!0,children:this.renderPageContent()})})]})}}gt.displayName="GroupDetails",(0,h.Z)(gt,"childContextTypes",{group:_.Z.Group,location:f.object});const mt=(0,O.Z)((0,B.Z)(y.zH(gt))),vt=(0,g.Z)(x.Z,{target:"e218s1f1"})("margin:",(0,R.D)(2),";"),yt=(0,g.Z)(w.nP,{target:"e218s1f0"})({name:"1xwzzid",styles:"flex-grow:1;display:flex;flex-direction:column;justify-content:stretch"});function ft(e){let{selection:t,...s}=e;const u=(0,d.Z)(),{projects:h}=(0,c.Z)(),g=(0,p.Z)(),{params:m,location:v}=s,y=v.query.project,f=h.find((e=>e.id===y));return(0,r.useEffect)((()=>{f?.slug&&function(e){let{api:t,orgSlug:s,projSlug:r}=e;t.requestPromise(`/projects/${s}/${r}/`).then(n.Z.onUpdateSuccess).catch((e=>{const t=(0,i.t)("Unable to fetch project details");(0,a.Z)(t)(e),(0,o.Iw)(t)}))}({api:g,orgSlug:u.slug,projSlug:f.slug})}),[g,u.slug,f?.slug]),(0,r.useEffect)((()=>{(0,l.co)("issue_page.viewed",{group_id:parseInt(m.groupId,10),org_id:parseInt(u.id,10)})}),[u,m.groupId]),(0,Re.tZ)(mt,{environments:t.environments,organization:u,projects:h,...s},`${m.groupId}-envs:${t.environments.join(",")}`)}ft.displayName="IssueDetailsContainer";const bt=(0,u.Z)(ft)},"./app/views/issueDetails/utils.tsx":(e,t,s)=>{s.d(t,{Ad:()=>g,M3:()=>v,MN:()=>l,V7:()=>p,dG:()=>c,g5:()=>d,m7:()=>m,sC:()=>h});var r=s("../node_modules/lodash/orderBy.js"),o=s.n(r),i=s("./app/actionCreators/group.tsx"),n=s("./app/api.tsx"),a=s("./app/locale.tsx");async function l(e,t,s,r,o,i){const n="latest"===r||"oldest"===r?`/issues/${s}/events/${r}/`:`/projects/${t}/${i}/events/${r}/?group_id=${s}`,a={};return 0!==o.length&&(a.environment=o),await e.requestPromise(n,{query:a})}function p(e,t,s,r){(0,i.Gv)(e,{orgId:t,projectId:s,itemIds:[r],failSilently:!0,data:{hasSeen:!0}},{})}function d(e,t){return(new n.KU).requestPromise(`/issues/${e}/user-reports/`,{includeAllArgs:!0,query:t})}function c(e){const t=e.tags.find((e=>{let{key:t}=e;return"environment"===t}));return t?t.value:null}const u={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function h(e){if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a.t)("You have disabled workflow notifications for this project.");if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&u.hasOwnProperty(t))return u[t]}return(0,a.t)("You're receiving updates because you are subscribed to workflow notifications for this project.")}function g(e){return o()([...e],(e=>{let{dateCreated:t}=e;return new Date(t)}),["desc"])[0]}let m;function v(e,t){const{status:s,count:r,activity:o}=e,i=Number(r);switch(s){case"reprocessing":return m.REPROCESSING;case"unresolved":return"reprocess"===(t??g(o))?.type?0===i?m.REPROCESSED_AND_HASNT_EVENT:m.REPROCESSED_AND_HAS_EVENT:m.NO_STATUS;default:return m.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(m||(m={}))}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueDetails_index_tsx.228194ee02011c28ed05fcb2e8cf86e7.js.map