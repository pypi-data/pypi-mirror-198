"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_issueDetails_groupReplays_index_tsx"],{"./app/utils/useCleanQueryParamsOnRouteLeave.tsx":(e,s,t)=>{t.d(s,{Z:()=>n,j:()=>i});var o=t("../node_modules/react/index.js"),a=t("../node_modules/react-router/es/index.js"),r=t("./app/utils/useLocation.tsx");function i(e){let{fieldsToClean:s,newLocation:t,oldPathname:o}=e;const r=s.some((e=>void 0!==t.query[e]));if(t.pathname===o||!r)return;const i=s.reduce(((e,s)=>(e[s]=void 0,e)),{...t.query});a.browserHistory.replace({pathname:t.pathname,query:i})}const n=function(e){let{fieldsToClean:s}=e;const t=(0,r.T)(),n=(0,o.useCallback)((e=>{i({fieldsToClean:s,newLocation:e,oldPathname:t.pathname})}),[t.pathname,s]);(0,o.useEffect)((()=>a.browserHistory.listen(n)),[n])}},"./app/views/issueDetails/groupReplays/index.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var o=t("./app/components/acl/feature.tsx"),a=t("./app/components/alert.tsx"),r=t("./app/components/layouts/thirds.tsx"),i=t("./app/locale.tsx"),n=t("./app/utils/useOrganization.tsx"),l=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=t("../node_modules/react/index.js"),u=t("./app/utils/replays/hooks/useReplayList.tsx"),c=t("./app/utils/useLocation.tsx"),d=t("../node_modules/@sentry/core/esm/exports.js"),y=t("./app/utils/discover/eventView.tsx"),m=t("./app/utils/queryString.tsx"),h=t("./app/utils/replays/fetchReplayList.tsx"),g=t("./app/utils/useApi.tsx"),x=t("./app/utils/useCleanQueryParamsOnRouteLeave.tsx"),v=t("./app/views/replays/types.tsx");var b=t("./app/views/replays/replayTable/index.tsx"),f=t("./app/views/replays/replayTable/types.tsx"),w=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=[f.M.replay,f.M.os,f.M.browser,f.M.duration,f.M.countErrors,f.M.activity];function j(e){let{group:s}=e;const t=(0,n.Z)(),o=(0,c.T)(),{eventView:a,fetchError:r,pageLinks:i}=function(e){let{group:s,location:t,organization:o}=e;const a=(0,g.Z)(),[r,i]=(0,p.useState)(),[n,l]=(0,p.useState)(),u=(0,p.useCallback)((async()=>{try{const e=await a.requestPromise(`/organizations/${o.slug}/replay-count/`,{query:{returnIds:!0,query:`issue.id:[${s.id}]`,statsPeriod:"14d",project:s.project.id}});i(e[s.id]||[])}catch(e){d.Tb(e),l(e)}}),[a,o.slug,s.id,s.project.id]),c=(0,p.useMemo)((()=>r?y.ZP.fromSavedQuery({id:"",name:"",version:2,fields:v.p,projects:[Number(s.project.id)],query:`id:[${String(r)}]`,range:"14d",orderby:(0,m.ro)(t.query.sort,h.y)}):null),[t.query.sort,s.project.id,r]);return(0,x.Z)({fieldsToClean:["cursor"]}),(0,p.useEffect)((()=>{u()}),[u]),{eventView:c,fetchError:n,pageLinks:null}}({group:s,location:o,organization:t});return a?(0,w.tZ)(C,{eventView:a,organization:t,pageLinks:i,visibleColumns:Z}):(0,w.tZ)(T,{withPadding:!0,children:(0,w.tZ)(b.Z,{fetchError:r,isFetching:!0,replays:[],sort:void 0,visibleColumns:Z})})}j.displayName="GroupReplays";const C=e=>{let{eventView:s,organization:t,visibleColumns:o}=e;const a=(0,p.useMemo)((()=>({query:{}})),[]),{replays:r,isFetching:i,fetchError:n}=(0,u.Z)({eventView:s,location:a,organization:t});return(0,w.tZ)(T,{withPadding:!0,children:(0,w.tZ)(b.Z,{fetchError:n,isFetching:i,replays:r,sort:void 0,visibleColumns:o})})};C.displayName="GroupReplaysTable";const T=(0,l.Z)(r.T3,{target:"e1ekyz00"})("box-shadow:0px 0px 1px ",(e=>e.theme.gray200),";background-color:",(e=>e.theme.background),";"),k=j;function q(){return(0,w.tZ)(r.T3,{withPadding:!0,children:(0,w.tZ)(a.bZ,{type:"warning",children:(0,i.t)("You don't have access to this feature")})})}q.displayName="renderNoAccess";const L=e=>{const s=(0,n.Z)();return(0,w.tZ)(o.Z,{features:["session-replay"],organization:s,renderDisabled:q,children:(0,w.tZ)(k,{...e})})};L.displayName="GroupReplaysContainer";const _=L}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueDetails_groupReplays_index_tsx.99437fc57aec0a82c674cc85eb88bcba.js.map