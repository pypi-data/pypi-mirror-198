"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_dynamicSampling_dynamicSampling_tsx"],{"./app/views/settings/organization/permissionAlert.tsx":(e,t,i)=>{i.d(t,{Z:()=>c});var n=i("./app/components/acl/access.tsx"),a=i("./app/components/alert.tsx"),o=i("./app/locale.tsx"),s=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{access:t=["org:write"],message:i=(0,o.t)("These settings can only be edited by users with the organization owner or manager role."),organization:r,...c}=e;return(0,s.tZ)(n.Z,{access:t,organization:r,children:e=>{let{hasAccess:t}=e;return!t&&(0,s.tZ)(a.bZ,{"data-test-id":"org-permission-alert",type:"warning",showIcon:!0,...c,children:i})}})}r.displayName="PermissionAlert";const c=r},"./app/views/settings/project/dynamicSampling/dynamicSampling.tsx":(e,t,i)=>{i.d(t,{f:()=>L,m:()=>I});var n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(i("../node_modules/core-js/modules/es.array.includes.js"),i("../node_modules/react/index.js")),o=i("./app/actionCreators/indicator.tsx"),s=i("./app/components/button.tsx"),r=i("./app/components/featureBadge.tsx"),c=i("./app/components/forms/fields/booleanField.tsx"),l=i("./app/components/panels/index.tsx"),p=i("./app/components/sentryDocumentTitle.tsx"),d=i("./app/locale.tsx"),m=i("./app/stores/projectsStore.tsx"),u=i("./app/styles/space.tsx");let g;var h,y;!function(e){e.BOOST_ENVIRONMENTS="boostEnvironments",e.BOOST_LATEST_RELEASES="boostLatestRelease",e.BOOST_KEY_TRANSACTIONS="boostKeyTransactions",e.BOOST_LOW_VOLUME_TRANSACTIONS="boostLowVolumeTransactions",e.IGNORE_HEALTH_CHECKS="ignoreHealthChecks"}(g||(g={})),function(e){e.AND="and",e.OR="or"}(h||(h={})),function(e){e.TRACE="trace",e.TRANSACTION="transaction"}(y||(y={}));var b,S=i("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),x=i("./app/utils/handleXhrErrorResponse.tsx"),_=i("./app/utils/useApi.tsx"),v=i("./app/utils/useOrganization.tsx"),C=i("./app/views/settings/components/settingsPageHeader.tsx"),O=i("./app/views/settings/components/text/textBlock.tsx"),T=i("./app/views/settings/organization/permissionAlert.tsx"),Z=i("./app/components/checkbox.tsx"),f=i("./app/components/featureFeedback/index.tsx"),k=i("./app/components/forms/index.tsx"),A=i("./app/components/forms/controls/textarea.tsx"),w=i("./app/components/forms/fieldGroup/index.tsx"),E=i("./app/stores/configStore.tsx"),N=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");!function(e){e.TRANSACTION_NAME="transaction_name",e.CUSTOM_TAG="custom_tag",e.OTHER="other"}(b||(b={}));const P={opinionAboutFeature:"",tracingCapturingPriorities:[{title:(0,d.t)("By transaction name"),value:b.TRANSACTION_NAME,checked:!1},{title:(0,d.t)("By custom tag"),value:b.CUSTOM_TAG,checked:!1},{title:(0,d.t)("Other"),value:b.OTHER,checked:!1}],tracingCapturingOtherPriority:""};function j(e){let{options:t,onChange:i,otherTextField:n}=e;const o=(0,a.useCallback)(((e,n)=>{const a=t.map((t=>t.value===e.value?{...t,checked:n}:t));i(a)}),[i,t]);return(0,N.tZ)(a.Fragment,{children:t.map((e=>"other"===e.value?(0,N.BX)(F,{children:[(0,N.tZ)(Z.Z,{onChange:t=>o(e,t.target.checked)}),e.title,n]},e.value):(0,N.BX)(B,{children:[(0,N.tZ)(Z.Z,{checked:e.checked,onChange:t=>o(e,t.target.checked)}),e.title]},e.value)))})}function z(){const e=`Dynamic Sampling feedback by ${E.Z.get("user").email}`;return(0,N.tZ)(f.z,{featureName:"dynamic-sampling",initialData:P,buttonProps:{priority:"primary",size:"sm"},children:t=>{let{Header:i,Body:n,Footer:o,state:s,onFieldChange:r}=t;return(0,N.BX)(a.Fragment,{children:[(0,N.tZ)(i,{children:(0,d.t)("Submit Feedback")}),(0,N.BX)(n,{showSelfHostedMessage:!1,children:[(0,N.tZ)(w.Z,{label:(0,N.tZ)(R,{children:(0,d.t)("What do you think about this feature?")}),stacked:!0,inline:!1,flexibleControlStateSize:!0,children:(0,N.tZ)(A.Z,{name:"opinion-about-feedback",value:s.opinionAboutFeature,rows:5,autosize:!0,onChange:e=>r("opinionAboutFeature",e.target.value)})}),(0,N.tZ)(w.Z,{label:(0,N.tZ)(R,{children:(0,d.t)("What other priorities would you like Sentry to apply for trace capturing?")}),stacked:!0,inline:!1,flexibleControlStateSize:!0,children:(0,N.tZ)(j,{options:s.tracingCapturingPriorities,onChange:e=>{e.some((e=>e.value===b.OTHER&&!1===e.checked))&&r("tracingCapturingOtherPriority",""),r("tracingCapturingPriorities",e)},otherTextField:(0,N.tZ)(D,{inline:!1,name:"tracingCapturingOtherPriority",flexibleControlStateSize:!0,stacked:!0,disabled:s.tracingCapturingPriorities.some((e=>e.value===b.OTHER&&!1===e.checked)),onClick:e=>e.stopPropagation(),value:s.tracingCapturingOtherPriority,onChange:e=>r("tracingCapturingOtherPriority",e),placeholder:(0,d.t)("Please let us know which other priority")})})})]}),(0,N.tZ)(o,{primaryDisabledReason:!s.opinionAboutFeature.trim()&&s.tracingCapturingPriorities.every((e=>!1===e.checked))?(0,d.t)("Please answer at least one question"):void 0,submitEventData:{contexts:{feedback:{opinionAboutFeature:s.opinionAboutFeature||null,tracingCapturingPriorities:s.tracingCapturingPriorities.filter((e=>e.checked)).map((e=>e.title)).join(", ")||null,tracingCapturingOtherPriority:s.tracingCapturingOtherPriority||null}},message:s.opinionAboutFeature.trim()?`${e} - ${s.opinionAboutFeature}`:e}})]})}})}j.displayName="MultipleCheckboxField",z.displayName="SamplingFeedback";const R=(0,n.Z)("strong",{target:"eltv75u3"})("margin-bottom:",(0,u.D)(1),";display:inline-block;"),B=(0,n.Z)("label",{target:"eltv75u2"})("cursor:pointer;display:grid;grid-template-columns:max-content 1fr;gap:",(0,u.D)(1),";align-items:center;:not(:last-child){margin-bottom:",(0,u.D)(1),";}"),F=(0,n.Z)(B,{target:"eltv75u1"})("grid-template-columns:max-content max-content 1fr;@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:max-content 1fr;}"),D=(0,n.Z)(k.nv,{target:"eltv75u0"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-column:1/-1;}&&{input{",(e=>e.disabled&&"cursor: pointer;"),";}}");var H=i("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");const I={[g.BOOST_LATEST_RELEASES]:{label:(0,d.t)("Prioritize new releases"),help:(0,d.t)("Captures more transactions for your new releases as they are being adopted")},[g.BOOST_ENVIRONMENTS]:{label:(0,d.t)("Prioritize dev environments"),help:(0,d.t)('Captures more traces from environments that contain "dev", "test", "qa", and "local"')},[g.BOOST_KEY_TRANSACTIONS]:{label:(0,d.t)("Prioritize key transactions"),help:(0,d.t)("Captures more of your most important (starred) transactions")},[g.BOOST_LOW_VOLUME_TRANSACTIONS]:{label:(0,d.t)("Prioritize low-volume transactions"),help:(0,d.t)("Balance high-volume endpoints so they don't drown out low-volume ones")},[g.IGNORE_HEALTH_CHECKS]:{label:(0,d.t)("Deprioritize health checks"),help:(0,d.t)("Captures fewer of your health checks transactions")}};function L(e){let{project:t}=e;const i=(0,v.Z)(),n=(0,_.Z)(),u=i.features.includes("dynamic-sampling-transaction-name-priority"),h=i.access.includes("project:write"),y=t.dynamicSamplingBiases??[];(0,a.useEffect)((()=>{(0,S.Z)("dynamic_sampling_settings.viewed",{organization:i,project_id:t.id})}),[t.id,i]);const b=(0,a.useCallback)((()=>{(0,S.Z)("dynamic_sampling_settings.read_docs_clicked",{organization:i,project_id:t.id})}),[i,t.id]);return(0,N.tZ)(p.Z,{title:(0,d.t)("Dynamic Sampling"),children:(0,N.BX)(a.Fragment,{children:[(0,N.tZ)(C.Z,{title:(0,N.BX)(a.Fragment,{children:[(0,d.t)("Dynamic Sampling")," ",(0,N.tZ)(r.Z,{type:"new"})]}),action:(0,N.tZ)(z,{})}),(0,N.tZ)(O.Z,{children:(0,d.t)("Sentry aims to capture the most valuable transactions in full detail, so you have the necessary data to resolve any performance issues.")}),(0,N.tZ)(T.Z,{organization:i,access:["project:write"],message:(0,d.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")}),(0,N.BX)(l.s_,{children:[(0,N.tZ)(l.V9,{children:(0,d.t)("Sampling Priorities")}),(0,N.tZ)(l.N,{children:Object.entries(I).map((e=>{let[a,s]=e;const r=y.find((e=>e.id===a));return r&&(u||a!==g.BOOST_LOW_VOLUME_TRANSACTIONS)?(0,H.az)(c.Z,{...s,key:a,name:a,value:r.active,onChange:()=>async function(e){(0,o.E3)();const a=y.map((t=>t.id===e.id?{...t,active:!t.active}:t));try{const s=await n.requestPromise(`/projects/${i.slug}/${t.slug}/`,{method:"PUT",data:{dynamicSamplingBiases:a}});(0,S.Z)(e.active?"dynamic_sampling_settings.priority_disabled":"dynamic_sampling_settings.priority_enabled",{organization:i,project_id:t.id,id:e.id}),m.Z.onUpdateSuccess(s),(0,o.S9)((0,d.t)("Successfully updated dynamic sampling configuration"))}catch(e){const t=(0,d.t)("Unable to update dynamic sampling configuration");(0,x.Z)(t)(e),(0,o.Iw)(t)}}(r),disabled:!h,disabledReason:h?void 0:(0,d.t)("You do not have permission to edit this setting")}):null}))}),(0,N.tZ)(M,{children:(0,N.tZ)(s.zx,{href:"https://docs.sentry.io/product/data-management-settings/dynamic-sampling/",onClick:b,external:!0,children:(0,d.t)("Read Docs")})})]})]})})}L.displayName="DynamicSampling";const M=(0,n.Z)(l.jH,{target:"e1tzcbwq0"})("padding:",(0,u.D)(1.5)," ",(0,u.D)(2),";display:flex;align-items:center;justify-content:flex-end;")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_dynamicSampling_dynamicSampling_tsx.732a48bc89ae9a8acdcbd8b8e0964647.js.map