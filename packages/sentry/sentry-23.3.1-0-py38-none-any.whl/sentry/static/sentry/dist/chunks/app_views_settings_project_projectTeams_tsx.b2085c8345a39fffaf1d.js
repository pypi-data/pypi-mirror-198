"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectTeams_tsx"],{"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const o=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0;const a=`${e} - ${t}`,r=o?`${a} - ${o}`:a;return s?`${r} - Sentry`:r}},"./app/views/settings/project/projectTeams.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>Z});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js")),i=s("./app/actionCreators/indicator.tsx"),n=s("./app/actionCreators/modal.tsx"),p=s("./app/actionCreators/projects.tsx"),c=s("./app/components/links/link.tsx"),l=s("./app/components/tooltip.tsx"),m=s("./app/locale.tsx"),d=s("./app/stores/teamStore.tsx"),h=s("./app/styles/space.tsx"),u=s("./app/utils/routeTitle.tsx"),g=s("./app/views/asyncView.tsx"),j=s("./app/views/settings/components/settingsPageHeader.tsx"),T=s("./app/views/settings/components/teamSelect.tsx"),w=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class v extends g.Z{constructor(){super(...arguments),(0,o.Z)(this,"canCreateTeam",(()=>{const{organization:e}=this.props,t=new Set(e.access);return t.has("org:write")&&t.has("team:write")&&t.has("project:write")})),(0,o.Z)(this,"handleRemove",(e=>{if(this.state.loading)return;const{organization:t,project:s}=this.props;(0,p.M9)(this.api,t.slug,s.slug,e).then((()=>this.handleRemovedTeam(e))).catch((()=>{(0,i.Iw)((0,m.t)("Could not remove the %s team",e)),this.setState({loading:!1})}))})),(0,o.Z)(this,"handleRemovedTeam",(e=>{this.setState((t=>({projectTeams:[...(t.projectTeams||[]).filter((t=>t.slug!==e))]})))})),(0,o.Z)(this,"handleAddedTeam",(e=>{this.setState((t=>({projectTeams:[...t.projectTeams||[],e]})))})),(0,o.Z)(this,"handleAdd",(e=>{if(this.state.loading)return;const t=d.Z.getBySlug(e);if(!t)return(0,i.Iw)((0,m._N)('Unable to find "[teamSlug]"',{teamSlug:e})),void this.setState({error:!0});const{organization:s,project:o}=this.props;(0,p.Oe)(this.api,s.slug,o.slug,t).then((()=>{this.handleAddedTeam(t)}),(()=>{this.setState({error:!0,loading:!1})}))})),(0,o.Z)(this,"handleCreateTeam",(e=>{e.stopPropagation(),e.preventDefault();const{project:t,organization:s}=this.props;this.canCreateTeam()&&(0,n.openCreateTeamModal)({project:t,organization:s,onClose:e=>{(0,p.Oe)(this.api,s.slug,t.slug,e).then(this.remountComponent,this.remountComponent)}})}))}getEndpoints(){const{organization:e,project:t}=this.props;return[["projectTeams",`/projects/${e.slug}/${t.slug}/teams/`]]}getTitle(){const{projectId:e}=this.props.params;return(0,u.Z)((0,m.t)("Project Teams"),e,!1)}renderBody(){const{project:e,organization:t}=this.props,s=this.canCreateTeam(),o=t.access.includes("project:write"),a=(0,m.t)("This is the last team with access to this project. Removing it will mean only organization owners and managers will be able to access the project pages. Are you sure you want to remove this team from the project %s?",e.slug),{projectTeams:r}=this.state,i=(0,w.BX)(x,{children:[(0,m.t)("Teams"),(0,w.tZ)(l.u,{disabled:s,title:(0,m.t)("You must be a project admin to create teams"),position:"top",children:(0,w.tZ)(b,{to:"#create-team",disabled:!s,onClick:this.handleCreateTeam,children:(0,m.t)("Create Team")})})]});return(0,w.BX)("div",{children:[(0,w.tZ)(j.Z,{title:(0,m.t)("Project Teams for %s",e.slug)}),(0,w.tZ)(T.Z,{disabled:!o,enforceIdpProvisioned:!1,organization:t,menuHeader:i,selectedTeams:r??[],onAddTeam:this.handleAdd,onRemoveTeam:this.handleRemove,confirmLastTeamRemoveMessage:a})]})}}const x=(0,a.Z)("div",{target:"e1hwzmzh1"})("font-size:0.875em;padding:",(0,h.D)(.5)," 0px;text-transform:uppercase;"),b=(0,a.Z)(c.Z,{target:"e1hwzmzh0"})("float:right;text-transform:none;",(e=>e.disabled&&(0,r.iv)("cursor:not-allowed;color:",e.theme.gray300,";opacity:0.6;","")),";"),Z=v}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectTeams_tsx.b8fa97c619275a30a552c7a26785a400.js.map