"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_profiling_hooks_useVirtualizedTree_useVirtualizedTree_tsx-app_utils_useResizableDra-4c1167"],{"./app/components/profiling/profilingBreadcrumbs.tsx":(e,t,r)=>{r.d(t,{u:()=>a}),r("../node_modules/core-js/modules/es.error.cause.js");var o=r("../node_modules/react/index.js"),n=r("../node_modules/lodash/omit.js"),l=r.n(n),s=r("./app/components/breadcrumbs.tsx"),i=r("./app/locale.tsx"),c=r("./app/utils/profiling/routes.tsx"),d=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{organization:t,trails:r}=e;const n=(0,o.useMemo)((()=>r.map((e=>function(e,t){let{organization:r}=t;switch(e.type){case"landing":return{to:(0,c.XR)({query:l()(e.payload.query,["cursor","query"]),orgSlug:r.slug}),label:(0,i.t)("Profiling"),preservePageFilters:!0};case"profile summary":return{to:(0,c.R0)({query:l()(e.payload.query,["cursor","query"]),orgSlug:r.slug,projectSlug:e.payload.projectSlug,transaction:e.payload.transaction}),label:(0,i.t)("Profile Summary"),preservePageFilters:!0};case"flamechart":return{to:(0,c.TH)({query:e.payload.query,orgSlug:r.slug,projectSlug:e.payload.projectSlug,profileId:e.payload.profileId}),label:e.payload.transaction,preservePageFilters:!0};default:throw new Error(`Unknown breadcrumb type: ${JSON.stringify(e)}`)}}(e,{organization:t})))),[t,r]);return(0,d.tZ)(s.Z,{crumbs:n})}a.displayName="ProfilingBreadcrumbs"},"./app/utils/profiling/hooks/useVirtualizedTree/useVirtualizedTree.tsx":(e,t,r)=>{r.d(t,{w:()=>f}),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/core-js/modules/es.array.push.js");var o=r("../node_modules/react/index.js"),n=r("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),l=r("./app/utils/useEffectAfterFirstRender.ts");function s(e,t){switch(t.type){case"scroll to index":return{...e,...t.payload};case"set selected node index":return{...e,selectedNodeIndex:t.payload};case"set scroll top":return{...e,scrollTop:t.payload};case"set scroll height":return{...e,scrollHeight:t.payload};default:return e}}var i=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js");class c{constructor(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,i.Z)(this,"node",void 0),(0,i.Z)(this,"parent",void 0),(0,i.Z)(this,"children",void 0),(0,i.Z)(this,"expanded",void 0),(0,i.Z)(this,"depth",void 0),this.node=e,this.parent=t,this.expanded=o??!1,this.children=[],this.depth=r}getVisibleChildrenCount(){if(!this.expanded||!this.children.length)return 0;let e=0;const t=[...this.children];for(;t.length>0;){const r=t.pop();if(void 0===r)throw new Error("Undefined queue node, this should never happen");if(r.expanded)for(let e=0;e<r.children.length;e++)t.push(r.children[e]);e++}return e}setExpanded(e,t){if(e===this.expanded)return[];if(!e){const t=this.getVisibleChildrenCount();return this.expanded=e,new Array(t)}this.expanded=e;const r=[];function o(e){if(t?.expandChildren&&(e.expanded=!0),r.push(e),e.expanded)for(let t=0;t<e.children.length;t++)o(e.children[t])}for(let e=0;e<this.children.length;e++)o(this.children[e]);return r}}class d{constructor(e,t){(0,i.Z)(this,"roots",[]),(0,i.Z)(this,"flattened",[]),this.roots=e,this.flattened=t||d.toExpandedList(this.roots)}static fromRoots(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!1,o=arguments.length>3?arguments[3]:void 0;const n=[];function l(e,n,s,i){const d=o&&o.size>0,a=new c(e,n,i,d?o.has(e):t);if(n&&r(a)&&e.children)for(let t=0;t<e.children.length;t++)l(e.children[t],a,n.children,i);else if(s&&s.push(a),e.children)for(let t=0;t<e.children.length;t++)l(e.children[t],a,a.children,i+1)}for(let t=0;t<e.length;t++)l(e[t],null,n,0);return new d(n,void 0)}static toExpandedList(e){const t=[];function r(e){if(t.push(e),e.expanded)for(let t=0;t<e.children.length;t++)r(e.children[t])}for(let t=0;t<e.length;t++)r(e[t]);return t}findNode(e){const t=[...this.roots];for(;t.length;){const r=t.pop();if(r&&e(r.node))return r;for(let e=0;e<r.children.length;e++)t.push(r.children[e])}return null}expandToNode(e){const t=this.findNode(e);if(!t)return;let r=t.parent;for(;r&&!r.expanded;)this.expandNode(r,!0),r=r.parent}expandNode(e,t,r){const o=e.setExpanded(t,r);return o.length?(e.expanded?this.flattened.splice(this.flattened.indexOf(e)+1,0,...o):this.flattened.splice(this.flattened.indexOf(e)+1,o.length),o):o}sort(e){if(!this.roots.length)return;function t(r){const o=r.children.sort(e);for(let e=0;e<o.length;e++)t(o[e])}const r=this.roots.sort(e);for(let e=0;e<r.length;e++)t(r[e]);this.flattened=d.toExpandedList(this.roots)}getAllExpandedNodes(e){const t=new Set([...e]);function r(e){e.expanded&&t.add(e.node);for(let t=0;t<e.children.length;t++)r(e.children[t])}for(let e=0;e<this.roots.length;e++)r(this.roots[e]);return t}}function a(e){let{element:t,selectedNodeIndex:r,rowHeight:o,scrollTop:n,interaction:l,theme:s}=e;t&&(t.style.left="0",t.style.right="0",t.style.height=`${o}px`,t.style.position="absolute",t.style.backgroundColor="clicked"===l?s.blue300:s.surface200,t.style.pointerEvents="none",t.style.willChange="transform, opacity",t.style.transform=`translateY(${o*r-n}px)`,t.style.opacity="1")}function u(e,t,r){let{rowHeight:o,scrollTop:n,theme:l,ghostRowRef:s}=r;for(const e of t)e.ref&&"true"===e.ref.dataset.hovered&&delete e.ref.dataset.hovered;if(null===e&&s)return void(s.style.opacity="0");const i=t.find((t=>t.key===e));i?.ref&&(i.ref.dataset.hovered="true",a({element:s,interaction:"hover",rowHeight:o,scrollTop:n,selectedNodeIndex:i.key,theme:l}))}function h(e,t,r){let{rowHeight:o,scrollTop:n,theme:l,ghostRowRef:s}=r;if(null===e&&s)s.style.opacity="0";else if(null!==e){const r=t.find((t=>t.key===e));r&&a({element:s,interaction:"clicked",rowHeight:o,scrollTop:n,selectedNodeIndex:r.key,theme:l})}}function p(e,t){if(!t.flattened.length||!e)return null;const r=t.flattened.findIndex((t=>t.node===e.node));return-1===r?null:r}function f(e){const{onScrollToNode:t}=e,r=(0,n.u)(),i=(0,o.useRef)(null),c=(0,o.useRef)(null),[a,f]=(0,o.useReducer)(s,{roots:e.tree,selectedNodeIndex:e.initialSelectedNodeIndex??null,scrollTop:0,overscroll:e.overscroll??5,scrollHeight:e.scrollContainer?.getBoundingClientRect()?.height??0}),[g,m]=(0,o.useState)((()=>{const t=d.fromRoots(e.tree,e.expanded,e.skipFunction);return e.sortFunction&&t.sort(e.sortFunction),t})),w=(0,o.useMemo)((()=>function(e){let{items:t,overscroll:r,rowHeight:o,scrollHeight:n,scrollTop:l}=e;const s=r*o,i=[],c={top:Math.max(l-s,0),bottom:Math.min(l+n+s,t.length*o)};let d=0,a=function(e){let{items:t,overscroll:r,rowHeight:o,scrollTop:n,viewport:l}=e;return t.length&&0!==l.top?Math.max(Math.floor(n/o)-r,0):0}({items:t,viewport:c,scrollTop:l,rowHeight:o,overscroll:r});const u=Math.ceil((n+2*s)/o),h=t.length;for(;d<u&&a<h;){const e=a*o,r=e+o;e>=c.top&&r<=c.bottom&&(i[d]={key:a,ref:null,styles:{position:"absolute",top:e},item:t[a]},d++),a++}return i}({items:g.flattened,scrollHeight:a.scrollHeight,scrollTop:a.scrollTop,overscroll:a.overscroll,rowHeight:e.rowHeight})),[a.scrollHeight,a.scrollTop,a.overscroll,g,e.rowHeight]),y=(0,o.useRef)(g.flattened),x=(0,o.useRef)(new Set),v=(0,o.useRef)(a);v.current=a;const R=(0,o.useRef)(g);R.current=g;const H=(0,o.useRef)(w);H.current=w;const T=(0,o.useRef)(void 0);(0,l.K)((()=>{const t=d.fromRoots(e.tree,e.expanded,e.skipFunction,x.current);e.sortFunction&&t.sort(e.sortFunction);const o=p("number"==typeof v.current.selectedNodeIndex?y.current[v.current.selectedNodeIndex]:null,t),n=e.scrollContainer?.scrollTop??0;e.scrollContainer&&e.scrollContainer.scrollTo({top:n}),f({type:"set selected node index",payload:o}),m(t),h(o,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:n,theme:r}),u(null,H.current,{ghostRowRef:c.current,rowHeight:e.rowHeight,scrollTop:n,theme:r}),x.current=t.getAllExpandedNodes(x.current),y.current=t.flattened}),[e.tree,e.expanded,e.skipFunction,e.sortFunction,e.rowHeight,e.scrollContainer,r]),(0,o.useEffect)((()=>{const t=e.scrollContainer;if(!t)return;function o(t){const o=Math.max(0,t.target.scrollTop);var n;f({type:"set scroll top",payload:o}),void 0!==T.current&&(n=T.current,window.cancelAnimationFrame(n.id)),t.target.firstChild.style.pointerEvents="none",T.current=function(e,r){let o;Promise.resolve().then((()=>{o=Date.now()}));const n=()=>{void 0!==o&&Date.now()-o>=150?t.target.firstChild.style.pointerEvents="auto":l.id=window.requestAnimationFrame(n)},l={id:window.requestAnimationFrame(n)};return l}(),null!==v.current.selectedNodeIndex&&h(v.current.selectedNodeIndex,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r}),u(null,H.current,{ghostRowRef:c.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r})}const n={passive:!0};return t.addEventListener("scroll",o,n),()=>{t.removeEventListener("scroll",o,n)}}),[e.scrollContainer,e.rowHeight,r]),(0,o.useEffect)((()=>{const t=e.scrollContainer;if(!t)return;const o=o=>{if(o.target!==t)return;const n=o.target.getBoundingClientRect(),l=Math.floor((v.current.scrollTop+o.clientY-n.top)/e.rowHeight);R.current.flattened[l]&&(f({type:"set selected node index",payload:l}),h(l,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r}))},n=o=>{if(o.target!==t)return;const n=o.target.getBoundingClientRect(),l=Math.floor((v.current.scrollTop+o.clientY-n.top)/e.rowHeight),s=H.current.find((e=>e.key===l));s?.ref&&(s.ref.dataset.hovered="true",u(l,H.current,{ghostRowRef:c.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r}))};return t.addEventListener("click",o),t.addEventListener("mousemove",n),()=>{t.removeEventListener("click",o),t.removeEventListener("mousemove",n)}}),[e.rowHeight,e.scrollContainer,r]),(0,o.useEffect)((()=>{const t=e.scrollContainer;if(t)return t.addEventListener("mouseleave",o,{passive:!0}),()=>{t.removeEventListener("mouseleave",o)};function o(){u(null,H.current,{ghostRowRef:c.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r})}}),[e.scrollContainer,r,e.rowHeight]);const C=(0,o.useCallback)((t=>o=>{u(t,H.current,{ghostRowRef:c.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r})}),[r,e.rowHeight]),b=(0,o.useCallback)((t=>o=>{f({type:"set selected node index",payload:t}),h(t,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r})}),[e.rowHeight,r]),E=(0,o.useCallback)(((t,o)=>{const n=v.current.selectedNodeIndex?R.current.flattened[v.current.selectedNodeIndex]??null:null;R.current.expandNode(t,!t.expanded,o);const l=new d(R.current.roots,R.current.flattened);x.current=l.getAllExpandedNodes(new Set);const s=p(n,l);f({type:"set selected node index",payload:s}),m(l),h(s,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r})}),[e.rowHeight,r]),k=(0,o.useCallback)((e=>{const t=v.current.selectedNodeIndex?R.current.flattened[v.current.selectedNodeIndex]??null:null;R.current.sort(e);const r=new d(R.current.roots,R.current.flattened),o=p(t,r);f({type:"set selected node index",payload:o}),m(r)}),[]),N=(0,o.useCallback)((o=>{if(null!==v.current.selectedNodeIndex&&R.current.flattened.length){if("Enter"===o.key&&E(R.current.flattened[v.current.selectedNodeIndex],{expandChildren:!0}),"ArrowDown"===o.key){if(o.preventDefault(),o.metaKey||o.ctrlKey){const t=R.current.flattened.length-1;return f({type:"set selected node index",payload:t}),void h(t,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r})}const n=H.current.findIndex((e=>e.key===v.current.selectedNodeIndex));if(-1!==n){const o=n+1;if(v.current.selectedNodeIndex===R.current.flattened.length-1)return;f({type:"set selected node index",payload:H.current[o].key});const l=H.current[o];if(!l)throw new RangeError("Tree nextIndex is out of range of rendered items");l.ref?.focus({preventScroll:!0}),t?t(l,e.scrollContainer):l.ref?.scrollIntoView({block:"nearest"}),h(H.current[o].key,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r})}}if("ArrowUp"===o.key){if(o.preventDefault(),o.metaKey||o.ctrlKey)return f({type:"set selected node index",payload:0}),void h(0,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r});const n=H.current.findIndex((e=>e.key===v.current.selectedNodeIndex));if(-1!==n){const o=n-1;if(o<0)return;f({type:"set selected node index",payload:H.current[o].key}),h(H.current[o].key,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r});const l=H.current[o];if(!l)throw new RangeError("Tree nextIndex is out of range of rendered items");l.ref?.focus({preventScroll:!0}),t?t(l,e.scrollContainer):l.ref?.scrollIntoView({block:"nearest"})}}}}),[E,e.rowHeight,e.scrollContainer,t,r]),I=(0,o.useCallback)((o=>{const n=R.current.findNode(o);if(!n)return;const l=[];let s=n.parent;for(;s&&!s.expanded;)l.push(s),s=s.parent;for(;l.length;){const e=l.pop();e&&R.current.expandNode(e,!0)}const c=new d(R.current.roots,R.current.flattened);x.current=c.getAllExpandedNodes(x.current);const a=c.flattened.findIndex((e=>o(e.node)));if(-1===a)return;const u=function(e){let{index:t,rowHeight:r,scrollHeight:o,currentScrollTop:n,maxScrollableHeight:l}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest";const i=t*r;if("start"===s)return i;if("center"===s)return Math.max(Math.min(i-o/2+r,l-o),0);if("end"===s)return i-o+r;const c=i,d=i+o;return Math.min(c-n,d-n)}({index:a,rowHeight:e.rowHeight,scrollHeight:v.current.scrollHeight,currentScrollTop:v.current.scrollTop,maxScrollableHeight:c.flattened.length*e.rowHeight},"center");m(c),f({type:"scroll to index",payload:{selectedNodeIndex:a,scrollTop:u}}),h(a,H.current,{ghostRowRef:i.current,rowHeight:e.rowHeight,scrollTop:v.current.scrollTop,theme:r});const p=c.flattened.length*e.rowHeight;if(e.scrollContainer?.childNodes[0]){const t=e.scrollContainer?.childNodes?.[0];if(!t)return;t.style.height=`${p}px`,t.style.maxHeight=`${p}px`}e.scrollContainer&&(e.scrollContainer.scrollTo({top:u}),t&&t(H.current[a],e.scrollContainer,{top:u,depth:n.depth}))}),[e.rowHeight,t,e.scrollContainer,r]),S=(0,o.useMemo)((()=>({height:"100%",overflow:"auto",position:"relative",willChange:"transform"})),[]),j=(0,o.useMemo)((()=>{const t=g.flattened.length*e.rowHeight;return{height:t,maxHeight:t}}),[g.flattened.length,e.rowHeight]),P=e.renderRow,z=(0,o.useMemo)((()=>{const e=[];for(let t=0;t<H.current.length;t++)e.push(P(H.current[t],{handleRowClick:b(H.current[t].key),handleExpandTreeNode:E,handleRowKeyDown:N,handleRowMouseEnter:C(H.current[t].key),selectedNodeIndex:a.selectedNodeIndex}));return e}),[b,N,a.selectedNodeIndex,C,E,P]);return(0,o.useEffect)((()=>{if(!e.scrollContainer)return;let t;const r=new window.ResizeObserver((e=>{t=window.requestAnimationFrame((()=>{e[0]?.contentRect?.height!==v.current.scrollHeight&&f({type:"set scroll height",payload:e[0]?.contentRect?.height??0})}))}));return r.observe(e.scrollContainer),()=>{"number"==typeof t&&window.cancelAnimationFrame(t),r.disconnect()}}),[e.scrollContainer,e.rowHeight]),{tree:g,items:w,renderedItems:z,selectedNodeIndex:a.selectedNodeIndex,dispatch:f,handleScrollTo:I,handleRowClick:b,handleRowKeyDown:N,handleRowMouseEnter:C,handleExpandTreeNode:E,handleSortingChange:k,scrollContainerStyles:S,containerStyles:j,clickedGhostRowRef:i,hoveredGhostRowRef:c}}},"./app/utils/useEffectAfterFirstRender.ts":(e,t,r)=>{r.d(t,{K:()=>n});var o=r("../node_modules/react/index.js");const n=(e,t)=>{const r=(0,o.useRef)(!0);(0,o.useEffect)((()=>{r.current?r.current=!1:e()}),t)}},"./app/utils/useResizableDrawer.tsx":(e,t,r)=>{r.d(t,{v:()=>n});var o=r("../node_modules/react/index.js");function n(e){const t=(0,o.useRef)(null),r=(0,o.useRef)(null),[n,l]=(0,o.useState)(e.initialSize??0),[s,i]=(0,o.useState)(!1);(0,o.useLayoutEffect)((()=>{e.onResize(e.initialSize??0,n)}),[e.direction]);const c=(0,o.useRef)(n);c.current=n;const d=(0,o.useCallback)((o=>{const n="left"===e.direction||"right"===e.direction,s="down"===e.direction||"left"===e.direction;document.body.style.pointerEvents="none",document.body.style.userSelect="none",document.documentElement.style.cursor=n?"ew-resize":"ns-resize",null!==t.current&&window.cancelAnimationFrame(t.current),t.current=window.requestAnimationFrame((()=>{if(!r.current)return;const t=[o.clientX,o.clientY],i=n?t[0]:t[1],d=(n?r.current[0]:r.current[1])-i;r.current=t;const a=Math.round(Math.max(e.min,c.current+d*(s?-1:1)));e.onResize(a),l(a)}))}),[e]),a=(0,o.useCallback)((()=>{document.body.style.pointerEvents="",document.body.style.userSelect="",document.documentElement.style.cursor="",document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",a),i(!1)}),[d]),u=(0,o.useCallback)((e=>{i(!0),r.current=[e.clientX,e.clientY],document.addEventListener("mousemove",d,{passive:!0}),document.addEventListener("mouseup",a)}),[d,a]),h=(0,o.useCallback)((()=>{l(e.initialSize),e.onResize(e.initialSize)}),[e]);return(0,o.useLayoutEffect)((()=>()=>{null!==t.current&&window.cancelAnimationFrame(t.current)})),{size:n,isHeld:s,onMouseDown:u,onDoubleClick:h}}},"./app/views/profiling/profilesProvider.tsx":(e,t,r)=>{r.r(t),r.d(t,{ProfileContext:()=>T,ProfileTransactionContext:()=>k,ProfilesProvider:()=>S,default:()=>j,useProfileTransaction:()=>N,useProfiles:()=>b,useSetProfiles:()=>E}),r("../node_modules/core-js/modules/es.error.cause.js");var o=r("../node_modules/react/index.js"),n=r("../node_modules/@sentry/core/esm/exports.js"),l=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("./app/components/button.tsx"),i=r("./app/components/layouts/thirds.tsx"),c=r("./app/components/profiling/profilingBreadcrumbs.tsx"),d=r("./app/locale.tsx"),a=r("./app/styles/space.tsx"),u=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=r("./app/utils/performance/urls.ts"),p=r("./app/utils/profiling/guards/profile.tsx"),f=r("./app/utils/useLocation.tsx"),g=r("./app/utils/useOrganization.tsx"),m=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function w(e){let{transaction:t,projectId:r,eventId:n}=e;const l=(0,f.T)(),a=(0,g.Z)(),w=b(),R="resolved"===w.type?(H=w.data,(0,p.nN)(H)?H.metadata.transactionName:(0,p.AN)(H)&&H.transaction.name||(0,d.t)("Unknown Transaction")):"";var H;const T=n??"",C=r??"",E=t?.id?(0,h.D)(a.slug,`${C}:${t.id}`):null,k=(0,o.useCallback)((()=>{(0,u.Z)("profiling_views.go_to_transaction",{organization:a,source:"transaction_details"})}),[a]),N=(0,o.useMemo)((()=>[{type:"landing",payload:{query:l.query}},{type:"profile summary",payload:{projectSlug:C,transaction:R,query:l.query}},{type:"flamechart",payload:{transaction:R,profileId:T,projectSlug:C,query:l.query}}]),[l,C,R,T]);return(0,m.BX)(v,{children:[(0,m.tZ)(y,{children:(0,m.tZ)(x,{children:(0,m.tZ)(c.u,{organization:a,trails:N})})}),(0,m.tZ)(i.kP,{children:E&&(0,m.tZ)(s.zx,{size:"sm",onClick:k,to:E,children:(0,d.t)("Go to Transaction")})})]})}w.displayName="ProfileHeader";const y=(0,l.Z)(i.oB,{target:"e1eqzoq72"})("margin-bottom:",(0,a.D)(1.5),";"),x=(0,l.Z)("div",{target:"e1eqzoq71"})("nav{padding-bottom:",(0,a.D)(1),";}"),v=(0,l.Z)(i.h4,{target:"e1eqzoq70"})("padding:",(0,a.D)(1)," ",(0,a.D)(2)," ",(0,a.D)(0)," ",(0,a.D)(2),"!important;");var R=r("./app/utils/useApi.tsx"),H=r("./app/utils/useParams.tsx");const T=(0,o.createContext)(null),C=(0,o.createContext)(null);function b(){const e=(0,o.useContext)(T);if(!e)throw new Error("useProfiles was called outside of ProfileProvider");return e}function E(){const e=(0,o.useContext)(C);if(!e)throw new Error("useSetProfiles was called outside of SetProfileProvider");return e}const k=(0,o.createContext)(null);function N(){const e=(0,o.useContext)(k);if(!e)throw new Error("useProfileTransaction was called outside of ProfileTransactionContext");return e}function I(e){const t=(0,g.Z)(),r=(0,H.U)(),[n,l]=(0,o.useState)({type:"initial"}),s=function(e,t,r){const n=(0,R.Z)(),[l,s]=(0,o.useState)({type:"initial"});return(0,o.useEffect)((()=>{if(null!==r)return s({type:"loading"}),function(e,t,r,o){return e.requestPromise(`/projects/${t}/${r}/events/${o}/`)}(n,e,t,r).then((e=>{s({type:"resolved",data:e})})).catch((e=>{s({type:"errored",error:e})})),()=>{n.clear()}}),[n,e,t,r]),l}(t.slug,r.projectId,"resolved"===n.type?(i=n.data,(0,p.nN)(i)?i.metadata.transactionID:(0,p.AN)(i)?i.transaction.id:null):null);var i;return(0,m.tZ)(S,{onUpdateProfiles:l,orgSlug:t.slug,profileId:r.eventId,projectSlug:r.projectId,children:(0,m.tZ)(C.Provider,{value:l,children:(0,m.BX)(k.Provider,{value:s,children:[(0,m.tZ)(w,{eventId:r.eventId,projectId:r.projectId,transaction:"resolved"===s.type?s.data:null}),e.children]})})})}function S(e){let{children:t,onUpdateProfiles:r,orgSlug:l,projectSlug:s,profileId:i}=e;const c=(0,R.Z)(),[a,u]=(0,o.useState)({type:"initial"});return(0,o.useEffect)((()=>{if(i&&s&&l)return u({type:"loading"}),function(e,t,r,o){return e.requestPromise(`/projects/${o}/${r}/profiling/profiles/${t}/`,{method:"GET",includeAllArgs:!0}).then((e=>{let[t]=e;return t}))}(c,i,s,l).then((e=>{u({type:"resolved",data:e}),r?.({type:"resolved",data:e})})).catch((e=>{const t="[object Object]"===e.toString()?(0,d.t)("Error: Unable to load profiles"):e.toString();u({type:"errored",error:t}),r?.({type:"errored",error:t}),n.Tb(e)})),()=>{c.clear()}}),[c,r,l,s,i]),(0,m.tZ)(T.Provider,{value:a,children:t})}I.displayName="ProfilesAndTransactionProvider",S.displayName="ProfilesProvider";const j=I}}]);
//# sourceMappingURL=../sourcemaps/app_utils_profiling_hooks_useVirtualizedTree_useVirtualizedTree_tsx-app_utils_useResizableDra-4c1167.5edb03a493618dd038823b1776eb272e.js.map