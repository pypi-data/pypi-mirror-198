"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx--9ea265"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{Cm:()=>d,PX:()=>a,s:()=>u,tT:()=>m,um:()=>c,z_:()=>l});var o=s("./app/actionCreators/indicator.tsx"),r=s("./app/locale.tsx"),n=s("./app/stores/teamStore.tsx");const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var s=arguments.length,o=new Array(s>2?s-2:0),r=2;r<s;r++)o[r-2]=arguments[r];return e[t]?.(...o)};async function a(e,t){const s=await e.requestPromise(`/organizations/${t.orgId}/user-teams/`);n.Z.loadUserTeams(s)}function l(e,t){n.Z.onUpdateSuccess(e,t)}function c(e,t,s){const o=`/organizations/${t.orgId}/members/${t.memberId??"me"}/teams/${t.teamId}/`;return e.request(o,{method:"POST",success:e=>{n.Z.onUpdateSuccess(t.teamId,e),i(s,"success",e)},error:e=>{i(s,"error",e)}})}function u(e,t,s){const o=`/organizations/${t.orgId}/members/${t.memberId||"me"}/teams/${t.teamId}/`;return e.request(o,{method:"DELETE",success:e=>{n.Z.onUpdateSuccess(t.teamId,e),i(s,"success",e)},error:e=>{i(s,"error",e)}})}function d(e,t,s){return e.requestPromise(`/organizations/${s.orgId}/teams/`,{method:"POST",data:t}).then((e=>(n.Z.onCreateSuccess(e),(0,o.S9)((0,r._N)("[team] has been added to the [organization] organization",{team:`#${e.slug}`,organization:s.orgId})),e)),(e=>{throw(0,o.Iw)((0,r._N)("Unable to create [team] in the [organization] organization",{team:`#${t.slug}`,organization:s.orgId})),e}))}function m(e,t){return e.requestPromise(`/teams/${t.orgId}/${t.teamId}/`,{method:"DELETE"}).then((e=>(n.Z.onRemoveSuccess(t.teamId),(0,o.S9)((0,r._N)("[team] has been removed from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e)),(e=>{throw(0,o.Iw)((0,r._N)("Unable to remove [team] from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e}))}},"./app/components/avatar/actorAvatar.tsx":(e,t,s)=>{s.d(t,{Z:()=>u}),s("../node_modules/core-js/modules/es.error.cause.js");var o=s("../node_modules/@sentry/core/esm/exports.js"),r=s("./app/components/avatar/teamAvatar.tsx"),n=s("./app/components/avatar/userAvatar.tsx"),i=s("./app/components/loadingIndicator.tsx"),a=s("./app/stores/memberListStore.tsx"),l=s("./app/utils/teams.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=function(e){let{size:t=24,hasTooltip:s=!0,actor:u,...d}=e;const m={size:t,hasTooltip:s,...d};if("user"===u.type){const e=u.id?a.Z.getById(u.id)??u:u;return(0,c.tZ)(n.Z,{user:e,...m})}return"team"===u.type?(0,c.tZ)(l.Z,{ids:[u.id],children:e=>{let{initiallyLoaded:t,teams:s}=e;return t?(0,c.tZ)(r.Z,{team:s[0],...m}):(0,c.tZ)(i.Z,{mini:!0})}}):(o.$e((e=>{e.setExtra("actor",u),o.Tb(new Error("Unknown avatar type"))})),null)}},"./app/components/tag.tsx":(e,t,s)=>{s.d(t,{A:()=>Z,Z:()=>S});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),n=s("./app/components/button.tsx"),i=s("./app/components/links/externalLink.tsx"),a=s("./app/components/links/link.tsx"),l=s("./app/components/tooltip.tsx"),c=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),m=s("./app/utils.tsx"),p=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=s("./app/utils/theme.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const f="20px";function x(e){let{type:t="default",icon:s,tooltipText:o,to:n,onClick:d,href:f,onDismiss:x,children:S,textMaxWidth:b=150,..._}=e;const z={size:"xs",color:h.ZP.tag[t].iconColor},C=(0,g.tZ)(l.u,{title:o,containerDisplayMode:"inline-flex",children:(0,g.BX)(Z,{type:t,children:[(0,r.isValidElement)(s)?(0,g.tZ)(v,{children:(0,r.cloneElement)(s,{...z})}):((0,m.ri)(f)||(0,m.ri)(n))&&void 0===s?(0,g.tZ)(v,{children:(0,g.tZ)(c.V$,{...z})}):null,(0,g.tZ)(j,{type:t,maxWidth:b,children:S}),(0,m.ri)(x)&&(0,g.tZ)(w,{onClick:function(e){e.preventDefault(),x?.()},size:"zero",priority:"link","aria-label":(0,u.t)("Dismiss"),children:(0,g.tZ)(c.bM,{isCircled:!0,...z})})]})});return(0,g.tZ)(y,{..._,onClick:()=>{(0,p.Z)("tag.clicked",{is_clickable:(0,m.ri)(d)||(0,m.ri)(n)||(0,m.ri)(f),organization:null})},children:(0,m.ri)(f)?(0,g.tZ)(i.Z,{href:f,children:C}):(0,m.ri)(n)&&(0,m.ri)(d)?(0,g.tZ)(a.Z,{to:n,onClick:d,children:C}):(0,m.ri)(n)?(0,g.tZ)(a.Z,{to:n,children:C}):C})}x.displayName="Tag";const y=(0,o.Z)("span",{target:"ecaysl4"})("font-size:",(e=>e.theme.fontSizeSmall),";"),Z=(0,o.Z)("div",{target:"ecaysl3"})("display:inline-flex;align-items:center;height:",f,";border-radius:",f,";background-color:",(e=>e.theme.tag[e.type].background),";border:solid 1px ",(e=>e.theme.tag[e.type].border),";padding:0 ",(0,d.D)(1),";"),v=(0,o.Z)("span",{target:"ecaysl2"})("margin-right:",(0,d.D)(.5),";display:inline-flex;"),j=(0,o.Z)("span",{target:"ecaysl1"})("color:",(e=>["black","white"].includes(e.type)?e.theme.tag[e.type].iconColor:e.theme.textColor),";max-width:",(e=>e.maxWidth),"px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:",f,";"),w=(0,o.Z)(n.zx,{target:"ecaysl0"})("margin-left:",(0,d.D)(.5),";border:none;"),S=x},"./app/components/textOverflow.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,o.Z)((e=>{let{children:t,className:s,ellipsisDirection:o,isParagraph:n,"data-test-id":i}=e;const a=n?"p":"div";return"left"===o?(0,r.tZ)(a,{className:s,"data-test-id":i,children:(0,r.tZ)("bdi",{children:t})}):(0,r.tZ)(a,{className:s,"data-test-id":i,children:t})}),{target:"e1lyrgnz0"})((e=>e.theme.overflowEllipsis)," ",(e=>"left"===e.ellipsisDirection&&"\n      direction: rtl;\n      text-align: left;\n    "),";width:auto;line-height:1.2;");n.defaultProps={ellipsisDirection:"right",isParagraph:!1};const i=n},"./app/components/timeSince.tsx":(e,t,s)=>{s.d(t,{Z:()=>y});var o=s("../node_modules/react/index.js"),r=s("../node_modules/lodash/isNumber.js"),n=s.n(r),i=s("../node_modules/lodash/isString.js"),a=s.n(i),l=s("../node_modules/moment-timezone/index.js"),c=s.n(l),u=s("./app/components/tooltip.tsx"),d=s("./app/locale.tsx"),m=s("./app/stores/configStore.tsx"),p=s("./app/utils/formatters.tsx"),h=s("./app/utils/getDynamicText.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f(e){return a()(e)||n()(e)?new Date(e):e}function x(e){let{date:t,disabledAbsoluteTooltip:s,tooltipShowSeconds:r,tooltipPrefix:n,tooltipBody:i,tooltipSuffix:a,tooltipUnderlineColor:l,unitStyle:x,prefix:y=(0,d.t)("in"),suffix:Z=(0,d.t)("ago"),liveUpdateInterval:v="minute",...j}=e;const w=(0,o.useRef)(),S=(0,o.useCallback)((()=>function(e,t,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"human";const r=c()(f(e)),n=r.isAfter(c()());let i="";return i="human"===o?r.fromNow(!0):(0,p.g9)(c()().diff(r,"seconds"),0,"short"===o,"extraShort"===o,n),t||s?n?`${s} ${i}`:`${i} ${t}`:i}(t,Z,y,x)),[t,Z,y,x]),[b,_]=(0,o.useState)(S());(0,o.useEffect)((()=>{_(S());const e="minute"===v?6e4:"second"===v?1e3:v;return w.current=window.setInterval((()=>_(S())),e),()=>window.clearInterval(w.current)}),[v,S]);const z=f(t),C=m.Z.get("user"),M=C?C.options:null,I=r?"MMM D, YYYY h:mm:ss A z":"MMMM D, YYYY h:mm A z",k=M?.clock24Hours?"MMMM D, YYYY HH:mm z":I,$=(0,h.Z)({fixed:M?.clock24Hours?"November 3, 2020 08:57 UTC":"November 3, 2020 8:58 AM UTC",value:c().tz(z,M?.timezone??"").format(k)});return(0,g.tZ)(u.u,{disabled:s,underlineColor:l,showUnderline:!0,title:(0,g.BX)(o.Fragment,{children:[n&&(0,g.tZ)("div",{children:n}),i??$,a&&(0,g.tZ)("div",{children:a})]}),children:(0,g.tZ)("time",{dateTime:z?.toISOString(),...j,children:b})})}x.displayName="TimeSince";const y=x},"./app/stores/memberListStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const o={loaded:!1,state:[],init(){this.state=[],this.loaded=!1},loadInitialData(e){this.state=e,this.loaded=!0,this.trigger(this.state,"initial")},isLoaded(){return this.loaded},getById(e){if(this.state){e=""+e;for(let t=0;t<this.state.length;t++)if(this.state[t].id===e)return this.state[t]}},getAll(){return this.state},getState(){return this.state}},r=(0,s("../node_modules/reflux/src/index.js").createStore)(o)},"./app/utils/isActiveSuperuser.tsx":(e,t,s)=>{s.d(t,{M:()=>a});var o=s("../node_modules/js-cookie/dist/js.cookie.mjs"),r=s("./app/stores/configStore.tsx");const n=window.superUserCookieName??"su",i=window.superUserCookieDomain;function a(){const{isSuperuser:e}=r.Z.get("user")||{};if(e){const e=r.Z.get("superUserCookieName")||n,t=r.Z.get("superUserCookieDomain")||i;if(o.Z.set(e,"set-in-isActiveSuperuser",{domain:t}),void 0===o.Z.get(e))return!0}return!1}},"./app/utils/teams.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var o=s("../node_modules/react/index.js"),r=s("./app/utils/useTeams.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{children:t,...s}=e;const i=(0,r.Z)(s);return(0,n.tZ)(o.Fragment,{children:t(i)})}i.displayName="Teams";const a=i},"./app/utils/useApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var o=s("../node_modules/react/index.js"),r=s("./app/api.tsx");const n=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(0,o.useRef)();void 0===s.current&&void 0===t&&(s.current=new r.KU);const n=t??s.current,i=(0,o.useCallback)((()=>{e||n.clear()}),[n,e]);return(0,o.useEffect)((()=>i),[i]),n}},"./app/utils/useProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>m}),s("../node_modules/core-js/modules/es.array.includes.js");var o=s("../node_modules/react/index.js"),r=s("../node_modules/lodash/uniqBy.js"),n=s.n(r),i=s("./app/stores/organizationStore.tsx"),a=s("./app/stores/projectsStore.tsx"),l=s("./app/stores/useLegacyStore.tsx"),c=s("./app/utils/parseLinkHeader.tsx"),u=s("./app/utils/useApi.tsx");async function d(e,t){let{slugs:s,search:o,limit:r,lastSearch:n,cursor:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={collapse:["latestDeploys"]};void 0!==s&&s.length>0&&(a.query=s.map((e=>`slug:${e}`)).join(" ")),o&&(a.query=`${a.query??""}${o}`.trim());const l=!n&&!o||n===o;l&&i&&(a.cursor=i),void 0!==r&&(a.per_page=r);let u=!1,d=null;const[m,,p]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:a}),h=p?.getResponseHeader("Link");if(h){const e=(0,c.Z)(h);u=e?.next?.results||e?.previous?.results,d=e?.next?.cursor}return{results:m,hasMore:u,nextCursor:d}}const m=function(){let{limit:e,slugs:t,orgId:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=(0,u.Z)(),{organization:c}=(0,l.X)(i.Z),m=(0,l.X)(a.Z),p=s??c?.slug,h=new Set(m.projects.map((e=>e.slug))),g=t?.filter((e=>!h.has(e)))??[],f=g.length>0,[x,y]=(0,o.useState)({initiallyLoaded:!m.loading&&!f,fetching:f,hasMore:null,lastSearch:null,nextCursor:null,fetchError:null}),Z=(0,o.useRef)(null);async function v(){if(void 0!==p){y({...x,fetching:!0});try{const{results:t,hasMore:s,nextCursor:o}=await d(r,p,{slugs:g,limit:e}),i=n()([...m.projects,...t],(e=>{let{slug:t}=e;return t}));a.Z.loadInitialData(i),y({...x,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:o})}catch(e){console.error(e),y({...x,fetching:!1,initiallyLoaded:!m.loading,fetchError:e})}}else console.error("Cannot use useProjects({slugs}) without an organization in context")}async function j(t){const{lastSearch:s}=x,o=x.nextCursor;if(""!==t)if(void 0!==p){y({...x,fetching:!0});try{r.clear();const{results:i,hasMore:l,nextCursor:c}=await d(r,p,{search:t,limit:e,lastSearch:s,cursor:o}),u=n()([...m.projects,...i],(e=>{let{slug:t}=e;return t}));u.length>m.projects.length&&a.Z.loadInitialData(u),y({...x,hasMore:l,fetching:!1,lastSearch:t,nextCursor:c})}catch(e){console.error(e),y({...x,fetching:!1,fetchError:e})}}else console.error("Cannot use useProjects.onSearch without an organization in context")}void 0!==t&&(null===Z.current&&(Z.current=new Set(t)),(t.length!==Z.current.size||t.some((e=>!Z.current?.has(e))))&&(Z.current=new Set(t))),(0,o.useEffect)((()=>{f&&v()}),[Z.current]),(0,o.useEffect)((()=>{const e=!m.loading;x.initiallyLoaded!==e&&(f||y({...x,initiallyLoaded:e}))}),[m.loading]);const{initiallyLoaded:w,fetching:S,fetchError:b,hasMore:_}=x,z=t?m.projects.filter((e=>t.includes(e.slug))):m.projects,C=g.map((e=>({slug:e}))),M={projects:z,placeholders:C,fetching:S||m.loading,initiallyLoaded:w,fetchError:b,hasMore:_,onSearch:j};return M}},"./app/utils/useTeams.tsx":(e,t,s)=>{s.d(t,{Z:()=>h}),s("../node_modules/core-js/modules/es.array.includes.js");var o=s("../node_modules/react/index.js"),r=s("../node_modules/lodash/uniqBy.js"),n=s.n(r),i=s("./app/actionCreators/teams.tsx"),a=s("./app/stores/organizationStore.tsx"),l=s("./app/stores/teamStore.tsx"),c=s("./app/stores/useLegacyStore.tsx"),u=s("./app/utils/isActiveSuperuser.tsx"),d=s("./app/utils/parseLinkHeader.tsx"),m=s("./app/utils/useApi.tsx");async function p(e,t){let{slugs:s,ids:o,search:r,limit:n,lastSearch:i,cursor:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l={};void 0!==s&&s.length>0&&(l.query=s.map((e=>`slug:${e}`)).join(" ")),void 0!==o&&o.length>0&&(l.query=o.map((e=>`id:${e}`)).join(" ")),r&&(l.query=`${l.query??""} ${r}`.trim());const c=i===r||!i&&!r;c&&a&&(l.cursor=a),void 0!==n&&(l.per_page=n);let u=!1,m=null;const[p,,h]=await e.requestPromise(`/organizations/${t}/teams/`,{includeAllArgs:!0,query:l}),g=h?.getResponseHeader("Link");if(g){const e=(0,d.Z)(g);u=e?.next?.results,m=e?.next?.cursor}return{results:p,hasMore:u,nextCursor:m}}const h=function(){let{limit:e,slugs:t,ids:s,provideUserTeams:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=(0,m.Z)(),{organization:h}=(0,c.X)(a.Z),g=(0,c.X)(l.Z),f=h?.slug,x=new Set(g.teams.map((e=>e.slug))),y=t?.filter((e=>!x.has(e)))??[],Z=new Set(g.teams.map((e=>e.id))),v=s?.filter((e=>!Z.has(e)))??[],j=y.length>0,w=v.length>0,S=r&&!g.loadedUserTeams,b=!j&&!S&&!w,[_,z]=(0,o.useState)({initiallyLoaded:b,fetching:!1,hasMore:g.hasMore,lastSearch:null,nextCursor:g.cursor,fetchError:null}),C=(0,o.useRef)(null);if(void 0!==t||void 0!==s){const e=(t||s)??[];null===C.current&&(C.current=new Set(e)),(e.length!==C.current.size||e.some((e=>!C.current?.has(e))))&&(C.current=new Set(e))}async function M(){if(void 0!==f){z({..._,fetching:!0});try{await(0,i.PX)(d,{orgId:f}),z({..._,fetching:!1,initiallyLoaded:!0})}catch(e){console.error(e),z({..._,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}async function I(){if(void 0!==f){z({..._,fetching:!0});try{const{results:t,hasMore:s,nextCursor:o}=await p(d,f,{slugs:y,ids:v,limit:e}),r=n()([...t,...g.teams],(e=>{let{id:t}=e;return t}));l.Z.loadInitialData(r),z({..._,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:o})}catch(e){console.error(e),z({..._,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}function k(e){return""!==e?$(e):(_.hasMore===g.hasMore&&_.nextCursor===g.cursor||z({..._,lastSearch:e,hasMore:g.hasMore,nextCursor:g.cursor}),Promise.resolve())}async function $(t){const{lastSearch:s}=_,o=t?_.nextCursor:g.cursor;if(void 0!==f){z({..._,fetching:!0});try{d.clear();const{results:r,hasMore:i,nextCursor:a}=await p(d,f,{search:t,limit:e,lastSearch:s,cursor:o}),c=n()([...g.teams,...r],(e=>{let{slug:t}=e;return t}));t?c.length>g.teams.length&&l.Z.loadInitialData(c):l.Z.loadInitialData(c,i,a),z({..._,hasMore:i&&g.hasMore,fetching:!1,lastSearch:t??null,nextCursor:a})}catch(e){console.error(e),z({..._,fetching:!1,fetchError:e})}}else console.error("Cannot fetch teams without an organization in context")}(0,o.useEffect)((()=>{j||w?I():S&&M()}),[C.current,r]);const D=(0,u.M)(),E=(0,o.useMemo)((()=>t?g.teams.filter((e=>t.includes(e.slug))):s?g.teams.filter((e=>s.includes(e.id))):r&&!D?g.teams.filter((e=>e.isMember)):g.teams),[g.teams,s,t,r,D]),L={teams:E,fetching:_.fetching||g.loading,initiallyLoaded:_.initiallyLoaded,fetchError:_.fetchError,hasMore:_.hasMore??g.hasMore,onSearch:k,loadMore:$};return L}},"./app/utils/withApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./app/utils/getDisplayName.tsx"),r=s("./app/utils/useApi.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=s=>{let{api:o,...i}=s;const a=(0,r.Z)({api:o,...t});return(0,n.tZ)(e,{...i,api:a})};return s.displayName=`withApi(${(0,o.Z)(e)})`,s}},"./app/utils/withProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./app/utils/getDisplayName.tsx"),r=s("./app/utils/useProjects.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){const t=t=>{const{projects:s,initiallyLoaded:o}=(0,r.Z)(),i=!o;return(0,n.tZ)(e,{...t,projects:s,loadingProjects:i})};return t.displayName=`withProjects(${(0,o.Z)(e)})`,t}}}]);
//# sourceMappingURL=../sourcemaps/app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx--9ea265.26f3f031fb4287319c3f004e50a4de2f.js.map