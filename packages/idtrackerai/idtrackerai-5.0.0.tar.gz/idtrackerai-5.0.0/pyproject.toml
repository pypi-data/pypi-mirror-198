[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"


[project]
name = "idtrackerai"
version = "5.0.0"
authors = [
    { name = "Jordi Torrents", email = "jordi.torrentsm@gmail.com" },
    { name = "Francisco Romero Ferrero" },
    { name = "Mattia G. Bergomi" },
    { name = "Francisco J.H. Heras" },
    { name = "Ricardo Ribeiro" },
]
description = "A multi-animal tracking algorithm based on convolutional neural networks"
readme = "README.md"
requires-python = ">=3.10"
classifiers = [
    "Development Status :: 3 - Alpha",
    "Environment :: Console",
    "Intended Audience :: Science/Research",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)",
    "Operating System :: OS Independent",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Topic :: Scientific/Engineering",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
]
dependencies = [
    "numpy >= 1.24.2",
    "rich >= 13.3.1",
    "scikit-learn >= 1.2.1",
    "h5py >= 3.8.0",
    "scipy >= 1.10.0",
    "opencv-python >= 4.7.0",
    "pyqt6 >= 6.4.2",
    'superqt >= 0.4.1',
    'toml >= 0.10.2',
]

[project.optional-dependencies]
dev = [
    'pytest',
    "black",
    'pylint',
    'vulture',
    'isort',
    "pydata_sphinx_theme",
    "sphinx-copybutton",
    "sphinx_design",
    "sphinx==5.3.0",
    "twine",
    "build",
]
docs = [
    "pydata_sphinx_theme",
    "sphinx-copybutton",
    "sphinx_design",
    "sphinx==5.3.0",
]

[project.urls]
"Homepage" = "https://idtrackerai.readthedocs.io/en/latest/"
"Repository" = "https://gitlab.com/polavieja_lab/idtrackerai"

[tool.setuptools.packages.find]
where = ["src"]
[tool.setuptools.package-data]
"idtrackerai.data" = ["**"]                          # for Gitlab CICD
idtrackerai = ["*.avi", "*.toml"]
idtrackerai_GUI_tools = ["*.dat", "*.toml", "*.png"]
idtrackerai_start_app = ["*.dat", "*.toml"]
idtrackerai_validator = ["*.toml"]

[project.scripts]
idtrackerai_test = "idtrackerai_start_app.__main__:general_test"
idtrackerai = "idtrackerai_start_app.__main__:main"
idtrackerai_validate = "idtrackerai_validator.__main__:main"
idtrackerai_video = "idtrackerai_video.main:main"
idtrackerai_csv = "idtrackerai.postprocess.trajectories_to_csv:main"

[tool.pytest.ini_options]
log_file_format = "[%(asctime)s %(levelname)8s] %(message)s (%(filename)s:%(lineno)s)"
log_file = 'pytest.log'
testpaths = ["tests"]
log_file_level = 0
addopts = '-v'


[tool.black]
skip-magic-trailing-comma = true
preview = true

[tool.isort]
profile = "black"

[tool.pylint]
extension-pkg-whitelist = 'PyQt6'
generated-members = 'cv2.*, torch.*'
disable = [
    "missing-docstring",
    "fixme",
    "logging-fstring-interpolation",
    "wrong-import-order",
    "invalid-name",
]
