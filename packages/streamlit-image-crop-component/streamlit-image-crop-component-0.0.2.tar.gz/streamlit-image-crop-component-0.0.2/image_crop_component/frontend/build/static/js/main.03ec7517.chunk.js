(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{49:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),o=a(25),c=a.n(o),s=a(4),i=a(7),l=a(1),h=a(0),d=a(2),p=a(3),u=a(36),m=a(72),g=a(39),j=(a(49),a(71)),b=function(e){return new Promise((function(t,a){var n=new Image;n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(e){return a(e)})),n.setAttribute("crossOrigin","anonymous"),n.src=e}))};function f(e){return e*Math.PI/180}function v(e,t,a){var n=f(a);return{width:Math.abs(Math.cos(n)*e)+Math.abs(Math.sin(n)*t),height:Math.abs(Math.sin(n)*e)+Math.abs(Math.cos(n)*t)}}function x(e,t){return w.apply(this,arguments)}function w(){return w=Object(i.a)(Object(s.a)().mark((function e(t,a){var n,r,o,c,i,l,h,d,p,u,m,g,j=arguments;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.length>2&&void 0!==j[2]?j[2]:0,r=j.length>3&&void 0!==j[3]?j[3]:{horizontal:!1,vertical:!1},e.next=4,b(t);case 4:if(o=e.sent,c=document.createElement("canvas"),i=c.getContext("2d")){e.next=9;break}return e.abrupt("return",null);case 9:return l=f(n),h=v(o.width,o.height,n),d=h.width,p=h.height,c.width=d,c.height=p,i.translate(d/2,p/2),i.rotate(l),i.scale(r.horizontal?-1:1,r.vertical?-1:1),i.translate(-o.width/2,-o.height/2),i.drawImage(o,0,0),u=i.getImageData(a.x,a.y,a.width,a.height),c.width=a.width,c.height=a.height,i.putImageData(u,0,0),m=document.createElement("canvas"),g=m.getContext("2d"),m.width=900,m.height=900,g.drawImage(c,0,0,900,900),e.abrupt("return",new Promise((function(e,t){m.toBlob((function(t){e(URL.createObjectURL(t))}),"image/jpeg")})));case 28:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}var O=a(12),C=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imageSrc:null,crop:{x:0,y:0},zoom:1,aspect:1,croppedAreaPixels:null,rotation:0,croppedImage:null},e.onCropChange=function(t){e.setState({crop:t})},e.onCropComplete=function(t,a){console.log(t,a),e.setCroppedAreaPixels(a)},e.onZoomChange=function(t){Array.isArray(t)?e.setState({zoom:t[0]}):e.setState({zoom:t})},e.setImageSrc=function(t){var a=new Image;a.onload=function(){var t=document.createElement("canvas");t.width=a.width+150,t.height=a.height+150;var n=t.getContext("2d");n.fillStyle="black",n.fillRect(0,0,t.width,t.height),n.drawImage(a,75,75);var r=t.toDataURL();e.setState({imageSrc:r})},a.src=t,e.setState({imageSrc:t})},e.setCroppedImage=function(t){e.setState({croppedImage:t})},e.setCroppedAreaPixels=function(t){e.setState({croppedAreaPixels:t})},e.setRotation=function(t){e.setState({rotation:t})},e.onFileChange=function(){var t=Object(i.a)(Object(s.a)().mark((function t(a){var n,r;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.target.files&&a.target.files.length>0)){t.next=6;break}return n=a.target.files[0],t.next=4,I(n);case 4:r=t.sent,e.setImageSrc(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showCroppedImage=Object(i.a)(Object(s.a)().mark((function t(){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x(e.state.imageSrc,e.state.croppedAreaPixels,e.state.rotation);case 3:a=t.sent,console.log("donee",{croppedImage:a}),e.setCroppedImage(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.onClose=function(){e.setCroppedImage(null)},e.handleDownload=Object(i.a)(Object(s.a)().mark((function t(){var a,n,r,o;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(a=e.state.croppedImage)){t.next=14;break}return t.next=4,fetch(a);case 4:return n=t.sent,t.next=7,n.blob();case 7:r=t.sent,(o=document.createElement("a")).href=URL.createObjectURL(r),o.download="image.jpg",document.body.appendChild(o),o.click(),document.body.removeChild(o);case 14:case"end":return t.stop()}}),t)}))),e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{className:"App",children:this.state.imageSrc?Object(O.jsxs)(r.a.Fragment,{children:[Object(O.jsx)("div",{className:"crop-container",children:Object(O.jsx)(g.a,{image:this.state.imageSrc,crop:this.state.crop,zoom:this.state.zoom,aspect:this.state.aspect,onCropChange:this.onCropChange,onCropComplete:this.onCropComplete,onZoomChange:this.onZoomChange})}),Object(O.jsx)("div",{className:"controls",children:Object(O.jsx)(m.a,{value:this.state.zoom,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:function(t,a){return e.onZoomChange(a)},className:"slider"})}),Object(O.jsx)(j.a,{onClick:this.showCroppedImage,variant:"contained",color:"primary",className:"cropButton",children:"Show Result"}),this.state.croppedImage?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{children:" Preview "}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("img",{src:this.state.croppedImage,alt:"Cropped",height:"300px"})}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-4"}),Object(O.jsx)("div",{className:"col-4",children:Object(O.jsx)(j.a,{onClick:this.onClose,variant:"contained",color:"primary",className:"cropButton",children:"Close"})}),Object(O.jsx)("div",{className:"col-4",children:Object(O.jsx)(j.a,{onClick:this.handleDownload,variant:"contained",color:"primary",className:"cropButton",children:"Download"})})]})]})]}):Object(O.jsx)("p",{children:"Cropped image will appear here"})]}):Object(O.jsx)("input",{type:"file",onChange:this.onFileChange,accept:"image/*"})})}}]),a}(u.a);function I(e){return new Promise((function(t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)}),!1),a.readAsDataURL(e)}))}var y=Object(u.b)(C);c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(y,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.03ec7517.chunk.js.map